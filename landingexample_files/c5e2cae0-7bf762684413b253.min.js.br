"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9d96d368-c723-53a7-8b83-1d8bba60d8b8")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["1702"],{399374(e,t,a){a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M2 16c0 7.732 6.268 14 14 14 7.732 0 14-6.268 14-14 0-7.732-6.268-14-14-14C8.268 2 2 8.268 2 16M16 0C7.163 0 0 7.163 0 16c0 8.837 7.163 16 16 16 8.837 0 16-7.163 16-16 0-8.837-7.163-16-16-16m0 7.5c.828 0 1.5.672 1.5 1.5v6.252c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5V9c0-.828.672-1.5 1.5-1.5M18 22c0-1.105-.895-2-2-2-1.105 0-2 .895-2 2v.137c0 1.105.895 2 2 2 1.105 0 2-.895 2-2z"/></svg>'},357289(e,t,a){a.d(t,{A:()=>s});let s=1464==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>':null},727645(e,t,a){a.d(t,{x:()=>m});var s=a(239976),r=a(824272),i=a(50751),n=a(850159);a(574988);var l=a(113116),d=a(497544),o=a(328151),c=a(735415);function m({title:e,children:t,dataTestId:a,noHeaderMargin:m,showNextButton:u,onNextButtonClick:_,showEditButton:x,onEditButtonClick:p,trackingProperties:h,disableEditButton:g,disableNextButton:y,disabledNextButtonTooltip:f,nextButtonText:v,loadingNextButton:E,error:S,variant:T="default"}){return(0,s.jsxs)("div",{...{0:{className:"x78zum5 xdt5ytf x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd x1ger3g"},1:{className:"x78zum5 xdt5ytf x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd x1a4ebq4"}}["default"===T|0],"data-testid":a,children:[(0,s.jsxs)("div",{...{className:"x78zum5 x1qughib x1cy8zhl"},children:[(0,s.jsx)("div",{"data-testid":`${a}-title`,children:e&&(0,s.jsx)("h2",{...{0:{className:"x12sbs06 xor4psk x1ncjjhx xaoa4km x2i041 x14terfx"},1:{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xat24cr"}}[0|!!m],children:e})}),x&&p&&(0,s.jsx)(l.$z,{"data-testid":`${a}-edit-button`,variant:"secondary",onClick:p,disabled:g,children:(0,n.t)("all_carts.edit")})]}),t,u&&_&&(0,s.jsxs)(s.Fragment,{children:[S&&(0,s.jsx)("div",{...{className:"xmiv3ne"},children:(0,s.jsx)(r.$y,{variant:"danger",children:(0,s.jsx)(i.Q,{children:S.message})})}),(0,s.jsx)("div",{...{className:"xpvyfi4 x1rsb5j9"},children:(0,s.jsx)(c.LA,{"data-testid":`${a}-next-button`,onClick:_,trackingProperties:h,disabled:y||E,"data-tooltip":y?f:void 0,"data-tooltip-type":o.Ib.TEXT,children:E?(0,s.jsx)("div",{...{className:"x1g5ndwp"},"data-testid":"cart-card-next-button-loading",children:(0,s.jsx)(d.k,{})}):v||(0,n.t)("all_carts.next")})})]})]})}},548202(e,t,a){a.d(t,{m:()=>r});var s=a(239976);function r({header:e,value:t,dataTestId:a,showDivider:r=!0}){return(0,s.jsxs)("div",{...{0:{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 x1cy8zhl"},1:{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 x1cy8zhl xso031l x1q0q8m5 xertd99"}}[0|!!r],"data-testid":a,children:[(0,s.jsx)("h4",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9 x1ihwiht",children:e}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x13faqbe",children:t})]})}a(574988)},145939(e,t,a){a.d(t,{$j:()=>E,PD:()=>j,RY:()=>y,eP:()=>T,oD:()=>f});var s=a(239976),r=a(105652),i=a(523924),n=a(60177),l=a(555355),d=a(850159);if(a(574988),1464==a.j)var o=a(214030);var c=a(517436),m=a(497544),u=a(471789),_=a(735292),x=a(366434);if(1464==a.j)var p=a(735415);if(1464==a.j)var h=a(727645);var g=a(92576);let y="https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans",f="https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan",v=(0,s.jsx)(c.Ph,{newTab:!0,trusted:!0,href:"/pricing",children:(0,d.tx)("checkout.monthly_price")});function E({state:e,onSubmit:t}){let{renewalTerm:a,isSubmitting:i,tier:n}=e,[l,c]=r.useState(!1),u=(0,s.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp"},"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(m.k,{})});return(0,s.jsxs)(h.x,{title:n===_.Ju.ORG?(0,d.t)("checkout.upgrade_to_an_organization_plan"):(0,d.t)("checkout.upgrade_to_a_professional_plan"),dataTestId:"cart-review",children:[(0,s.jsx)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xpgiz1h x1vamu9a"},children:(0,s.jsx)(g.O,{state:e,isCartReviewSummary:!0})}),(0,s.jsx)("div",{...{className:"x1vi7shn xp6roeo x1gcgh60 x1jwbysl x1v8gsql x19y5rnk x78zum5 xdt5ytf xg2d0mh"},"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsx)(S,{tier:n,isAnnual:a===x.NW.YEAR})}),(0,s.jsx)("div",{...{className:"x1304juz xzxcnsb"},"data-testid":"cart-review-terms-checkbox",children:(0,s.jsx)(j,{hasAcknowledgedTerms:l,setHasAcknowledgedTerms:c,tier:n,isAnnual:a===x.NW.YEAR})}),(0,s.jsx)(p.Ff,{fullWidth:!0,onClick:t,disabled:i||!l,"data-testid":"cart-review-submit-button",trackingProperties:{trackingDescriptor:o.c.COMPLETE_PURCHASE,...{}},children:i?u:(0,d.tx)("checkout.complete_purchase")})]})}function S({tier:e,isAnnual:t}){let a=e===_.Ju.ORG?y:f;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:(0,d.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:T(e,t)}),(0,s.jsx)("div",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xlup9mm"},children:(0,s.jsx)(c.Ph,{newTab:!0,href:a,trusted:!0,children:(0,d.tx)("checkout.learn_more")})})]})}function T(e,t){switch(e){case _.Ju.ORG:return(0,d.tx)("checkout.cart_review_upgrade_info_org");case _.Ju.PRO:return t?(0,d.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:v}):(0,d.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,i.wc)(e)}}function j({hasAcknowledgedTerms:e,setHasAcknowledgedTerms:t,tier:a,isAnnual:r}){return(0,s.jsx)(n.S,{label:(0,s.jsx)(l.J,{children:(0,s.jsx)("span",{children:a===_.Ju.ORG?(0,s.jsx)(u.WA,{}):(0,s.jsx)(u.Um,{isAnnual:r})})}),checked:e,onChange:t})}},515613(e,t,a){a.d(t,{I:()=>d});var s=a(239976),r=a(850159);a(574988);var i=a(436174),n=a(497544),l=a(735415);function d({orgMigrated:e}){return(0,s.jsxs)("div",{...{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd"},children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid"},children:(0,r.t)("checkout.org_confirmation.title")}),(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06"},children:(0,r.t)("checkout.org_confirmation.body")}),(0,s.jsxs)("div",{...{className:"x78zum5 x13a6bvl x6s0dn4"},children:[!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.k,{}),(0,s.jsx)("div",{...{className:"x9hsxk x1n0bwc9"},children:(0,r.t)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(l.Ff,{disabled:!e,onClick:()=>{i.Ay.redirect("/files/recent")},children:(0,r.t)("checkout.org_confirmation.button")})]})]})}},474312(e,t,a){a.d(t,{M:()=>l});var s=a(239976),r=a(850159);a(574988);var i=a(921424),n=a(840856);function l({legalName:e,displayName:t,dispatch:a}){return(0,s.jsxs)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},"data-testid":"org-legal-name-card-expanded",children:[(0,s.jsx)(i.Lf,{htmlName:"legal_org_name",label:(0,r.t)("org_self_serve.details_step.legal_company_name"),value:e,onChange:e=>{let t=e.target.value;a({type:n.H.UPDATE_LEGAL_NAME,payload:{legalName:t.trim()}})}}),(0,s.jsx)(i.Lf,{noMarginBottom:!0,htmlName:"org_name",label:(0,r.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,r.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:t,onChange:e=>{let t=e.target.value;a({type:n.H.UPDATE_DISPLAY_NAME,payload:{displayName:t.trim()}})}})]})}},540160(e,t,a){a.d(t,{_:()=>B});var s=a(239976),r=a(105652),i=a(60177),n=a(555355),l=a(850159);a(574988);var d=a(921424),o=a(840856),c=a(675063),m=a(735292),u=a(824272),_=a(50751),x=a(741542),p=a(665737),h=a(843489),g=a(181645),y=a(781924),f=a(90550),v=a(824234),E=a(289886),S=a(660983),T=a(253701),j=a(173680),N=a(53791),b=a(212454),A=a(436866),I=a(20136);function w({createPaymentElement:e,unmountPaymentElement:t,paymentElementEventHandlers:a,paymentFlow:o,state:m,dispatch:u,canUpdateVatIds:_,shouldRenderErrors:x=!0}){let[w,C]=(0,r.useState)(!1),{vatGstId:k,regionalVatGstId:R,nameOnPaymentMethod:P,hasDifferentShippingAddress:D,errors:O,stripeError:M,paymentMethodType:U,billingAddress:B,shippingAddressInput:L}=m,V=o===c.wn.PRO_UPGRADE||o===c.wn.ORG_UPGRADE,z={paymentFlow:o,paymentMethodType:U,isCampfireCart:!0},G=[...O,M].filter(e=>!!e).map(e=>e.message);return(0,h.h)(()=>((async function(){await e({ready:e=>{C(!0),a?.ready?.(e)},change:a?.change})})(),()=>{t()})),(0,r.useEffect)(()=>{M&&g.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...z,message:M.message})},[M]),M?.code===c.Or.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid"},children:[(0,s.jsx)(v.B,{svg:I.A,...{className:"x1w6u5r6 x1fz3pi1 xqql8cr"}}),(0,s.jsx)("p",{...{className:"x1874spd x1t2kcbv x1n0bwc9 x1evy7pa"},children:M.message})]}):(0,s.jsxs)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},"data-testid":"stripe-payment-form",children:[x&&G.length>0&&(0,s.jsx)("div",{...{className:"x1buy44e"},children:G.map((e,t)=>(0,s.jsx)("div",{...{className:"x611mgq"},children:(0,s.jsx)(y._,{color:y.S.ERROR,"aria-live":"polite",text:e})},t))}),(0,s.jsx)("div",{id:T.I}),w?(0,s.jsxs)("div",{style:S.sx.add({marginTop:"7px"}).if(U&&j.d2.includes(U),{marginTop:"15px"}).$,children:[(0,s.jsx)(d.Lf,{value:P,htmlName:"name_on_card",label:(0,l.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,l.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{u({type:p.XO.UPDATE_NAME_ON_PAYMENT_METHOD,payload:e.target.value.trim()})},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,s.jsx)(b.X,{address:B,updateAddress:e=>{u({type:p.XO.UPDATE_BILLING_ADDRESS,payload:e})},isBillingAddress:!0,canSeeBillingAddressExp:!0}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.A,{onChange:e=>u({type:p.XO.UPDATE_VAT_GST_ID,payload:e}),country:B.country,vatId:k,isCommunityCheckout:o===c.wn.COMMUNITY_CHECKOUT}),(0,s.jsx)(A.A,{onChange:e=>u({type:p.XO.UPDATE_REGIONAL_VAT_GST_ID,payload:e}),country:B.country,region:B.region,vatId:R,isCommunityCheckout:o===c.wn.COMMUNITY_CHECKOUT,variant:"regional"})]}),U===N.lB.SEPA&&(0,s.jsx)("p",{...{className:"x1n0bwc9 x1j6dyjg x1d3mw78 xqp8s7e"},children:(0,l.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),V&&(0,s.jsx)("div",{...{className:"x78zum5 x6s0dn4 xpgiz1h x13q985h x1u94j8j"},style:S.sx.if(D,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,s.jsx)(i.S,{label:(0,s.jsx)(n.J,{children:(0,s.jsx)("span",{className:E.s.font13.$,children:(0,l.tx)("checkout.i_have_a_different_shipping_address")})}),checked:D,onChange:()=>{u({type:p.XO.TOGGLE_DIFFERENT_SHIPPING_ADDRESS})}})}),D&&(0,s.jsx)(b.X,{address:L,updateAddress:e=>{u({type:p.XO.UPDATE_SHIPPING_ADDRESS,payload:e})},canSeeBillingAddressExp:!0})]}):(0,s.jsx)("div",{...{className:"x78zum5 xaehx54 x6s0dn4 xl56j7k"},children:(0,s.jsx)(f.kt,{})})]})}var C=a(195784),k=a(865804),R=a(12524),P=a(354230);let D=(0,k.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function O({selectedPaymentMethodId:e,setSelectedPaymentMethod:t,paymentMethods:a}){return(0,s.jsx)("div",{...{className:"x78zum5 xdt5ytf xl56j7k x1n2onr6 xmkeg23 x1y0btm7 x7z60cl xgqun6i x1yjdb4r x9f619 x192jxwq xh8yej3 xn3w4p2 x1gnnqk1 x11ugzjr"},"data-testid":"payment-method-dropdown",children:(0,s.jsxs)("div",{...{className:"x78zum5 x1n2onr6 xh8yej3 x6s0dn4"},children:[(0,s.jsx)(D,{...{className:"x1akne3o xf3scy2 x1yjdb4r x5kalc8 x1vy7i8i x1mvmbdv xjyslct x1iyjqo2 x1se2ifz xfn42iu xng3xce x1r7ld26 x1a2a7pz x1x7eeca"},name:"selected_saved_payment_method",dataTestId:"payment-method-select",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e?C._R.POPULATED_COMPLETE:C._R.NOT_POPULATED,onChange:e=>{let s=e.target.value,r=a.find(e=>e.id===s);r&&t(r)},value:e??void 0,children:a.map(e=>(0,s.jsx)(M,{paymentMethod:e},e.id))}),(0,s.jsx)(v.B,{...{className:"x10l6tqk x1f6937p x47corl x1epfdc x1ja3g5x"},svg:P.A})]})})}function M({paymentMethod:e}){return(0,r.createElement)("option",{...{className:"x78zum5 x1qughib x1nfngrj"},value:e.id,key:e.id},(0,s.jsx)("span",{...{className:"xemv814"},children:e.payment_method}),e.billing_address&&(0,s.jsx)("span",{...{className:"x1n0bwc9 xemv814"},children:` - ${(0,R.DS)(e.billing_address)}`}))}function U(e){let{isUsingSavedPaymentMethod:t,savedPaymentMethod:a,savedPaymentMethods:r,errors:d,stripeError:o}=e.state,c=(0,x.getFeatureFlags)().cart_rewrite_full_send_saved_payment,m=[o,...d].filter(e=>!!e);return(0,s.jsxs)(s.Fragment,{children:[m.length>0&&(0,s.jsx)("div",{...{className:"x1buy44e"},children:m.map((e,t)=>(0,s.jsx)("div",{...{className:"x611mgq"},children:(0,s.jsx)(u.Yy,{variant:"danger","data-testid":"inline-banner",children:(0,s.jsx)(_.Q,{children:e.message})})},t))}),c&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.S,{label:(0,s.jsx)(n.J,{children:(0,s.jsx)("span",{...{className:"xemv814"},children:(0,l.t)("checkout.use_saved_payment_method")})}),onChange:()=>{e.dispatch({type:p.XO.TOGGLE_USE_SAVED_PAYMENT_METHOD})},checked:t}),(0,s.jsx)("div",{className:"x19ueytk"}),t&&(0,s.jsx)(O,{selectedPaymentMethodId:a?.id,setSelectedPaymentMethod:t=>{e.dispatch({type:p.XO.SET_SAVED_PAYMENT_METHOD,payload:t})},paymentMethods:r})]}),(0,s.jsx)("div",{...{0:{},1:{className:"xqtp20y xb3r6kr xg01cxk"}}[0|!!(c&&t)],children:(0,s.jsx)(w,{...e,shouldRenderErrors:!1})})]})}function B({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:u}){let{tier:_,hasDifferentLegalName:x,legalName:p}=e,[h,g]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>({...e,errors:e.paymentFormErrors,stripeError:e.stripeError}),[e]);return(0,s.jsxs)("div",{"data-testid":"payment_details_card_expanded",children:[(0,s.jsx)("div",{...{className:"xh8yej3 xdpxx8g"},children:(0,s.jsx)(U,{canUpdateVatIds:!0,createPaymentElement:a,dispatch:t,paymentFlow:_===m.Ju.ORG?c.wn.ORG_UPGRADE:c.wn.PRO_UPGRADE,state:y,unmountPaymentElement:u,paymentElementEventHandlers:{ready:()=>g(!0)}})}),h&&_===m.Ju.PRO&&(0,s.jsxs)("div",{...{className:"xpgiz1h xemv814"},children:[(0,s.jsx)(i.S,{label:(0,s.jsx)(n.J,{children:(0,s.jsx)("span",{...{className:"xemv814"},children:(0,l.tx)("checkout.i_have_a_different_legal_name")})}),checked:x,onChange:()=>{t({type:o.H.SET_HAS_DIFFERENT_LEGAL_NAME,payload:{hasDifferentLegalName:!x}})}}),(0,s.jsx)("div",{className:"x19ueytk"}),x&&(0,s.jsx)(d.Lf,{value:p||"",htmlName:"legal_company_name",label:(0,l.t)("pro_cart.payment.legal_company_name_label"),placeholder:(0,l.t)("pro_cart.payment.legal_company_name_placeholder"),onChange:e=>{t({type:o.H.UPDATE_LEGAL_NAME,payload:{legalName:e.target.value.trim()}})},autoCompleteName:"legal company name",trackingFieldName:"Legal Company Name",dataTestId:"legal-company-name"})]})]})}},92366(e,t,a){a.d(t,{z:()=>m});var s=a(239976),r=a(645186),i=a(850159);a(574988);var n=a(587212),l=a(208877),d=a(317507),o=a(508295),c=a(735415);function m({teamId:e}){let t=(0,r.wA)(),a=(0,o.iZ)();return(0,s.jsxs)("div",{...{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd"},children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid"},children:(0,i.t)("checkout.pro_confirmation.title")}),(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06"},children:(0,i.t)("checkout.pro_confirmation.body")}),(0,s.jsx)("div",{...{className:"x78zum5 x13a6bvl x6s0dn4"},children:(0,s.jsx)(c.Ff,{onClick:()=>{e&&t(d.b({[n.p]:!0})),e&&a?.id&&(0,l.M)({reduxDispatch:t,teamId:e,userId:a.id,showProOnboardingModal:!1})},children:(0,i.t)("checkout.pro_confirmation.button")})})]})}},92576(e,t,a){a.d(t,{O:()=>f});var s=a(239976),r=a(745463),i=a(706354),n=a(850159);a(574988);var l=a(865804),d=a(462198),o=a(202797),c=a(133580),m=a(12524),u=a(424044),_=a(965974),x=a(63504),p=a(12358),h=a(18526),g=a(366434),y=a(113641);function f({isCartReviewSummary:e=!1,showPerSeatBreakdown:t=!0,state:a}){let{countBySeatType:r,renewalTerm:i,currency:d,taxPercent:_,tier:x,applicablePriceData:h}=a,f=(0,o.B)({currency:d,tier:x,renewalTerm:i,unit:g.NW.MONTH}),T=(0,m.s$)(h),j=(0,m.s$)(f),N=_||0,b=t=>(0,c.up)(t,d,{showCents:e}),A=(0,c.Vh)(r,T),I=(0,c.kV)(r,T,N),w=(0,c.N9)(r,T,N),C=b(A),k=b(I),R=b(w),P=i===g.NW.YEAR;return(0,s.jsx)(l.fu,{name:y.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:x,renewalTerm:i,countBySeatType:(0,u.gS)(r),currency:d,taxPercent:N,subtotal:A,taxTotal:I,total:w},enabled:e,children:(0,s.jsxs)("table",{...{className:"xh8yej3 x1mwwwfo x1gukg7c"},children:[t&&(0,s.jsx)("tbody",{children:Object.keys(r).sort(p.AG).map(t=>(0,s.jsx)(v,{billableProductKey:t,count:r[t]||0,currency:d,isAnnual:P,isCartReviewSummary:e,paymentPrices:T,lineItemPrices:j},t))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-subtotal",children:(0,s.jsx)(E,{label:(0,n.tx)("checkout.subtotal"),amount:S({price:C,isCartReviewSummary:e,isAnnual:P})})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-taxes",children:(0,s.jsx)(E,{label:(0,n.tx)("checkout.purchase_summary.tax"),subtext:(0,n.tx)("pro_cart.review.tax_percent",{taxPercent:N}),amount:S({price:k,isAnnual:P,isCartReviewSummary:e})})}),(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-total-due",children:(0,s.jsx)(E,{label:(0,n.tx)("checkout.purchase_summary.total_due_today"),amount:S({price:R,isAnnual:P,isCartReviewSummary:e})})})]})]})]})})}function v({billableProductKey:e,count:t,currency:a,isAnnual:l,isCartReviewSummary:o,paymentPrices:c,lineItemPrices:m}){if(!(0,x.dA)(e))return(0,d.$D)(i.FigmaTeam.UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let u=c[e];if((0,r.uy)(u))return(0,d.$D)(i.FigmaTeam.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summary for ${e}`)),null;let p=m[e];if((0,r.uy)(p))return(0,d.$D)(i.FigmaTeam.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let g=new h.vr(a),y=g.formatMoney(u*t,{showCents:o}),f=(0,n.t)("checkout.price_per_month",{price:g.formatMoney(p)});return(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb xso031l x1q0q8m5 xertd99"},"data-testid":`purchase-summary-${e}-row`,children:(0,s.jsx)(E,{label:(0,n.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,_.tI)(e)}),subtext:(0,n.tx)(l?"checkout.rewrite.product_cost_breakdown_annually":"checkout.rewrite.product_cost_breakdown_monthly",{price:f}),amount:S({price:y,isCartReviewSummary:o,isAnnual:l})})})}function E({label:e,subtext:t,amount:a}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{...{className:"x1uil0o3"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:e}),t&&(0,s.jsx)("p",{className:"x1n0bwc9",children:t})]})}),(0,s.jsx)("td",{...{className:"x1hr2gdg x1uil0o3"},children:(0,s.jsx)("p",{children:a})})]})}function S({price:e,isAnnual:t,isCartReviewSummary:a}){var s;return a?e:(s=e,t?(0,n.t)("checkout.price_per_year",{price:s}):(0,n.t)("checkout.price_per_month",{price:s}))}},422154(e,t,a){a.d(t,{D:()=>w});var s=a(239976),r=a(105652),i=a(645186),n=a(594293),l=a(745463),d=a(555235),o=a(732632),c=a(417098),m=a(871471),u=a(927434),_=a(850159),x=a(574988),p=a(181645),h=a(493094),g=a(86057),y=a(897968),f=a(160427),v=a(840856),E=a(218576),S=a(12524),T=a(836861),j=a(598838),N=a(847965),b=a(38900),A=a(508295),I=a(694151);function w({state:e,teamId:t,shouldShowTeamColumn:a,dispatch:i}){let{tier:l,selectedUserSeatTypes:o,additionalSeatsCount:u,eligibleUsersByUserId:j,eligibleTeamsByTeamId:N,selectedTeamIds:b,currentUpgradingUserId:A}=e,I=(0,E.s)({eligibleUsersByUserId:j,eligibleTeamsByTeamId:N,selectedTeamIds:Array.from(b),currentUpgradingUserId:A}),w=(0,r.useRef)(null),R=(0,f.f)({tableContainerRef:w}),[P,D]=r.useState(!1),O=r.useMemo(()=>{let e=[...I];return(0,n.v7)(e,e=>e.handle,{isDescending:P}),e},[I,P]),M=(0,S.UL)((0,S.iB)(o)),U=(0,S.UL)(u),B=(0,y.G)({currency:e.currency,tier:e.tier,renewalTerm:e.renewalTerm,showCents:!1}),[L]=(0,h.Ad)(B);if(null===L.data)throw Error("No seat types data");let V=L.data;return(0,s.jsx)("div",{"data-testid":"select-seats-step",children:(0,s.jsxs)("div",{...{className:"x1yjdb4r x1mxnbhz xmkeg23 x1y0btm7 x7z60cl"},ref:w,children:[(0,s.jsx)(g.P,{maxHeight:R,className:x.xW(k.scrollContainer),hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{...{className:"xh8yej3 x140o2bo"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{...{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz x1xvsi7n xdmjnt8 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x19j9cuy"},children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{...{className:"x1rg5ohu"},"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(d.K,{onClick:()=>D(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:P?(0,s.jsx)(c.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(m.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{...{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz x1gcgh60 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r"},children:(0,_.tx)("checkout.select_seats_table.seat_column")}),a&&(0,s.jsx)("th",{...{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r"},children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{...{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1vp1w89 x1akne3o"},children:(0,_.tx)("checkout.select_seats_table.description_column")})]})}),(0,s.jsx)("tbody",{...{className:"x1yjdb4r x499qwo"},children:O.map(e=>(0,s.jsx)(C,{user:e,seatTypes:V,selectedSeatType:o[e.id],changeSeatType:a=>{var s;p.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:o[e.id],newSeatType:a,tier:l,teamId:t??void 0}),s=e.id,i({type:v.H.UPDATE_USER_SEAT_TYPE,payload:{userId:s,seatType:a}})},tier:l,teamId:t??void 0,shouldShowTeamColumn:a},e.id))})]})}),(0,s.jsxs)("div",{...{className:"x1xvsi7n xdmjnt8 x8rdmch xyx8554 x178xt8z x13fuv20 x16ufvko x78zum5 x6s0dn4 x1qughib"},children:[(0,s.jsx)(T.m,{tier:l,seatTypes:V,additionalSeatCounts:u,setAdditionalSeats:e=>{i({type:v.H.UPDATE_ADDITIONAL_SEATS,payload:e})}}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:M}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:U})})})]})]})})}function C({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:n,shouldShowTeamColumn:d,teamId:c}){let m=(0,i.wA)(),x=(0,A.TA)(),p=e.id===x;return(0,l.uy)(t[a])?null:(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{...{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz"},"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(I.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:p})}),(0,s.jsx)("td",{...{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz"},children:(0,s.jsx)(o.$n,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{m((0,b.to)({type:j.Y,showModalsBeneath:!0,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:n,teamId:c}}))},size:"lg",width:"fill",children:(0,s.jsxs)("span",{...{className:"x78zum5 x6s0dn4 x1qughib"},children:[(0,s.jsxs)("span",{...{className:"x78zum5 x6s0dn4 x8vt714"},children:[(0,s.jsx)(N.BC,{type:a,size:"24"}),t[a].displayName]}),(0,s.jsx)(u.R,{})]})})}),d&&(0,s.jsx)("td",{...{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv"},children:e.teams}),(0,s.jsx)("td",{...{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x1n0bwc9"},children:t[a].description})]})}let k={scrollContainer:{kIxVMA:"x19j9cuy",ksF3WI:"x1vp1w89",krdFHd:null,kfmiAY:null,$$css:!0}}},245598(e,t,a){a.d(t,{d:()=>m});var s=a(239976),r=a(156142),i=a(804902),n=a(850159);a(574988);var l=a(412427),d=a(840856),o=a(12524),c=a(441740);function m({dispatch:e,state:t}){let{selectedTeamIds:a,eligibleTeamsByTeamId:r}=t,i=(0,o.Ds)(Object.values(r));return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsx)("div",{...{className:"xrvj5dj x1i71x30 xnby9oq x1nqx6w4"},children:i.map(t=>(0,s.jsx)(u,{team:t,isSelected:a.has(t.id),onToggle:t=>{e({type:d.H.ON_TOGGLE_TEAM,payload:{toggledTeam:t}})}},t.id))})})}function u({team:e,isSelected:t,onToggle:a}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(r.F,{className:c.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,...{0:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x7z60cl x1yjdb4r"},1:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x1va2ikv xpjdn5u"}}[0|!!t],children:[(0,s.jsx)(l.nl,{team:e}),(0,s.jsxs)("span",{...{className:"x193iq5w"},children:[(0,s.jsx)("span",{...{className:"x1lliihq x193iq5w xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o xb3r6kr xlyipyv xuxw1ft"},children:e.name}),(0,s.jsx)("span",{...{className:"x1lliihq x4oah1p xewu7z0 x2ua9qx x1dnis8n xawads1 x1n0bwc9 xb3r6kr xlyipyv xuxw1ft"},children:(0,n.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{...{className:"xzdfcct x8x9d4c"},children:(0,s.jsx)(i.g,{})})]})]},e.id)}},210793(e,t,a){a.d(t,{EduReviewPage:()=>j});var s=a(239976),r=a(105652),i=a(645186),n=a(850159),l=a(865804),d=a(528984),o=a(921424),c=a(918378),m=a(529524),u=a(530705),_=a(585255),x=a(712231),p=a(824234),h=a(289886),g=a(213009),y=a(394207),f=a(985373),v=a(612883),E=a(222368),S=a(18526),T=a(217169);function j({selectedView:e}){let t,a,j,N,{teamId:b}=e,A=(t=(0,i.d4)(e=>{let t=E.Xw.loadingKeyForPayload({teamId:b});return e.loadingState[t]}),a=(0,i.d4)(e=>e.teamUserByTeamId[b]||{}),j=(0,i.wA)(),r.useEffect(()=>{j(E.Xw({teamId:b}))},[j,b]),N=t!==d.r.SUCCESS,r.useEffect(()=>{if(!N){let e=Object.keys(a).length;j(v.Az({numWhiteboardEditors:e})),j(v.js({numDesignEditors:e}))}},[j,N,a]),N),I=(0,i.wA)(),w=()=>{I(v.Nj({teamId:b,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(l.fu,{name:"Edu Review",properties:{teamId:b},children:(0,s.jsx)("div",{children:(0,s.jsxs)(m.O,{menu:(0,s.jsx)(c.X,{onClick:()=>{I(f.sf({view:"team",teamId:b})),e.onCloseOrComplete?.()},children:(0,s.jsx)(p.B,{svg:T.A,className:"edu_review--modalCloseX---pQum",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--vd4Ih",children:(0,s.jsx)(y.J,{index:3})}),(0,s.jsxs)("div",{className:h.s.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(x.JR,{children:(0,n.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(o.Kz,{multiple:4}),(0,s.jsx)(_.x,{isLoading:A,children:()=>(0,s.jsx)(u.o,{children:(0,s.jsx)(g.d,{selectedView:e,onClickConfirm:w,currency:(0,S.LN)(),canSeeBillingAddressExp:!1})})})]})]})})})}},543750(e,t,a){a.d(t,{C:()=>l,q:()=>n});var s=a(105652),r=a(946182),i=a(406995);function n(){let{getConfig:e}=(0,r.I7)("exp_streamlined_new_user_checkout");return s.useCallback(()=>!!e().getValue("enabled",!1),[e])}function l(e,t){let a=n();return s.useCallback(()=>!!t&&void 0!==e&&(e===i.C.PRICING_PAGE.id||e===i.C.PRICING_PAGE_PROFESSIONAL_PLAN.id)&&a(),[e,a,t])}},994361(e,t,a){a.d(t,{s:()=>s});function s(){return!0}},160427(e,t,a){a.d(t,{f:()=>r});var s=a(105652);function r({tableContainerRef:e}){let[t,a]=s.useState(window.innerHeight),r=()=>{a(window.innerHeight)};s.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}},208877(e,t,a){a.d(t,{x:()=>j,M:()=>b});var s=a(105652),r=a(645186),i=a(393106),n=a(850159),l=a(181645),d=a(436174),o=a(613629),c=a(506026),m=a(543750),u=a(840856),_=a(735292),x=a(12524),p=a(898312),h=a(985373),g=a(953236),y=a(317507),f=a(572543),v=a(575425),E=a(508295),S=a(739673),T=a(494104);function j({state:e,cartDispatch:t,teamId:a,entryPoint:l,newUser:d}){let p=(0,r.wA)(),h=(0,E.iZ)(),g=(0,m.C)(l,d),y=function(e,t){let{tier:a,currency:s,renewalTerm:r,selectedUserSeatTypes:i,selectedTeamIds:n,displayName:l,legalName:d,taxPercent:o,applicablePriceData:c,vatGstId:m,regionalVatGstId:u,stripeCustomerId:p,countBySeatType:h}=e,g=(0,x.s$)(c),{subtotal:y,taxTotal:f,total:v}=(0,x.ZY)({countBySeatType:h,applicablePrices:g,taxPercent:o}),E={selected_user_seat_types:(0,x.VB)(i),billing_interval:r,displayed_cost_breakdown:{subtotal:y,tax_total:f,total:v},displayed_price_keys:(0,x.vm)(c),selected_currency:s,vat_gst_id:m||null,regional_vat_gst_id:u||null,entrypoint_id:t??null,is_cart_rewrite:!0};return a===_.Ju.PRO?{...E,legal_name:d||null,display_name:l||null,count_by_billable_product:h}:{...E,requested_seats:h,org_name:l||d,legal_org_name:d,team_ids:Array.from(n),stripe_customer_id:p||null,new_team_options:0===n.size?{team_name:l||d,add_to_org:!0}:void 0}}(e,l),f=(0,s.useCallback)(e=>{let a=(0,i.J)(e,e.data?.message||(0,n.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again"));if("CARD_ERROR"!==e.data.reason)return p(o.F.enqueue({type:"checkout-flow-error",message:a,error:!0,preventDismissal:!0,icon:c.zX.WARNING_EXCLAMATION_WITH_TRIANGLE})),{code:u.C.UPGRADE_ERROR,message:a};{let e={code:u.C.CARD_ERROR,message:a};return t({type:u.H.SET_ERROR,payload:{error:e}}),e}},[t,p]);return(0,s.useCallback)(async()=>{if(t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!0}}),e.tier===_.Ju.PRO){let e=await N({requestBody:y,teamId:a,userId:h.id,reduxDispatch:p,handleError:f,shouldShowStreamlinedNewUserCheckoutUX:g()});if(e)return t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}else{let a=await A({requestBody:y,user:h,upsellSource:e.upsellSource,handleError:f,reduxDispatch:p});if(a)return t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a}return null},[e.tier,e.upsellSource,t,p,y,a,h,f,g])}async function N({requestBody:e,teamId:t,userId:a,reduxDispatch:s,handleError:r,shouldShowStreamlinedNewUserCheckoutUX:i}){try{let{data:{meta:{team:r}}}=await T.m.createTeamSubscription(t??"",e);r&&s(g.yJ({team:r,userInitiated:!1})),(0,l.sx)("Pro Team Purchased (GTM)"),s(y.b({completed_pro_cart_flow:!0})),i||b({reduxDispatch:s,teamId:r.id,userId:a})}catch(e){return r(e)}return null}function b({reduxDispatch:e,teamId:t,userId:a,showProOnboardingModal:s=!0}){let r=new URLSearchParams(d.Ay.location.search);if(r.get("onCompleteRedirectFileKey")){let a=decodeURIComponent(r.get("onCompleteRedirectFileKey")),s=decodeURIComponent(r.get("onCompleteRedirectNodeId"));e(h.sf({...{view:"fullscreen",fileKey:a,nodeId:s},teamToMoveFileToOnNavigate:t,editorType:v.nT.Design}))}else e(p._l({workspace:{userId:a,teamId:t,orgId:null},view:{view:"allProjects",isProUpgrade:s}}))}async function A({requestBody:e,user:t,upsellSource:a,handleError:s,reduxDispatch:r}){try{await S.Eh.createNewOrg(e),r(y.b({completed_org_cart_flow:!0})),(0,l.sx)("Self Serve Org Purchased (GTM)"),(0,f.u)("Self Serve Org Purchased",t,{org_name:e.org_name,upsellSource:a})}catch(e){return s(e)}return null}},202797(e,t,a){a.d(t,{B:()=>n});var s=a(493094),r=a(580618),i=a(795210);function n({currency:e,tier:t,renewalTerm:a,unit:n}){let l=(0,r.jv)({billableProductKeys:i.N_,baseQuery:{currency:e,tier:t,renewalTerm:a,unit:n??a}}),[d]=(0,s.Ad)(l),o=(0,r.vu)(d);if(null===o.data)throw Error("Price data is null");return o.data}},91194(e,t,a){a.d(t,{iW:()=>X});var s=a(105652),r=a(850159),i=a(181645),n=a(838719),l=a(630820),d=a(12524),o=a(840856),c=a(120706);function m({additionalSeatsCount:e,selectedUserSeatTypes:t,tier:a}){let s=(0,d.O$)(t,e);return(0,c.A)(s,a)?null:{code:o.C.INVALID_PAID_SEAT_TOTAL,message:(0,r.t)("checkout.sidebar.paid_seat_minimum_banner")}}var u=a(424044),_=a(340775),x=a(133580),p=a(523924),h=a(706354),g=a(393106),y=a(741542),f=a(462198),v=a(675063),E=a(18526),S=a(331850),T=a(173680),j=a(366434),N=a(53791),b=a(94160),A=a(388421),I=a(145334),w=a(318044),C=a(47047),k=a(665737),R=a(253701);let P={stripePaymentMethod:void 0,savedPaymentMethod:void 0,vatGstId:"",regionalVatGstId:"",nameOnPaymentMethod:"",hasDifferentShippingAddress:!1,errors:[],savedPaymentMethods:[],isUsingSavedPaymentMethod:!1};function D(e,t){switch(t.type){case k.XO.TOGGLE_DIFFERENT_SHIPPING_ADDRESS:return{...e,hasDifferentShippingAddress:!e.hasDifferentShippingAddress};case k.XO.INIT_SAVED_PAYMENT_METHODS:return{...e,savedPaymentMethods:t.payload,isUsingSavedPaymentMethod:t.payload.length>0,savedPaymentMethod:t.payload?.[0],stripePaymentMethod:t.payload?.[0]?B(t.payload?.[0]):void 0};case k.XO.UPDATE_VAT_GST_ID:return{...e,vatGstId:t.payload};case k.XO.UPDATE_REGIONAL_VAT_GST_ID:return{...e,regionalVatGstId:t.payload};case k.XO.UPDATE_NAME_ON_PAYMENT_METHOD:return{...e,nameOnPaymentMethod:t.payload};case k.XO.SET_ERRORS:return{...e,errors:t.payload};case k.XO.SET_STRIPE_PAYMENT_METHOD:var a;let s=(a=t.payload?.stripePaymentMethod)&&(a.type===N.lB.CARD&&a.card||a.type===N.lB.SEPA&&a.sepa_debit)?a.type===N.lB.CARD?{id:a.id,type:N.lB.CARD,card:{brand:a.card.brand,last4:a.card.last4}}:a.type===N.lB.SEPA?{id:a.id,type:N.lB.SEPA,sepa:{country:a.sepa_debit.country,last4:a.sepa_debit.last4}}:null:null;return{...e,stripePaymentMethod:s??void 0};case k.XO.TOGGLE_USE_SAVED_PAYMENT_METHOD:let r=e.isUsingSavedPaymentMethod;return{...e,isUsingSavedPaymentMethod:!r,stripePaymentMethod:r?void 0:B(e.savedPaymentMethod)};case k.XO.SET_SAVED_PAYMENT_METHOD:return{...e,savedPaymentMethod:t.payload,stripePaymentMethod:t.payload?B(t.payload):void 0};default:(0,p.xb)(t)}}async function O({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s}){if((0,j.$V)(e))return{code:k.Wc.MISSING_ADDRESS_ERROR,message:(0,r.t)("checkout.errors.missing_address")};try{await I.$.validateAddresses({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s})}catch(e){return{code:k.Wc.ADDRESS_VALIDATION_ERROR,message:(0,g.J)(e)||e.message}}}async function M({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:i}){if(!(0,j.$V)(t))try{await I.$.validateCurrency({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:i})}catch(t){return{code:k.Wc.CURRENCY_VALIDATION_ERROR,message:(0,r.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.toUpperCase()})}}}async function U({vatGstId:e,country:t,region:a}){if(e)try{let s=await (0,A.r)(e,t,a);if(!s.data.meta.valid)return{code:k.Wc.VAT_GST_ID_VERIFICATION_ERROR,message:(0,g.J)(s,(0,r.t)("tax.vat.vat_gst_validation_failed"))}}catch(e){return{code:k.Wc.VAT_GST_ID_VERIFICATION_ERROR,message:e?.data?.message||(0,r.t)("tax.vat.vat_gst_validation_failed")}}}function B(e){return e?e.type===N.lB.CARD?{id:e.id,type:N.lB.CARD,card:{brand:e.brand??"unknown",last4:e.last4}}:{id:e.id,type:N.lB.SEPA,sepa:{country:e.country??null,last4:e.last4}}:void 0}var L=a(63504),V=a(795210),z=a(735292),G=a(888034),F=a(645186),$=a(985373),q=a(886213),H=a(585930);let Y=q.M4.Query({fetch:async e=>(await b.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});var W=a(208877),K=a(202797);let J={eligibleTeamsByTeamId:{},eligibleUsersByUserId:{},currentUpgradingUserId:"",taxPercent:0,selectedUserSeatTypes:{},additionalSeatsCount:V.N_.dict(()=>0),selectedTeamIds:new Set,hasDifferentLegalName:!1,displayName:"",legalName:"",isLoading:!0,isSubmitting:!1,error:null};function X({teamId:e,entryPoint:t,newUser:a,isSingleFullExp:i,...c}){let[_,p]=(0,s.useReducer)(Z,c,Q),{tier:g,currency:A,renewalTerm:I,selectedUserSeatTypes:B,additionalSeatsCount:L,hasDifferentLegalName:V,legalName:J}=_,X=(0,n.initialOptions)().stripe_payment_method_configurations?.[g],ee=(0,K.B)({currency:A,tier:g,renewalTerm:I}),{state:et,dispatch:ea,createPaymentElement:es,unmountPaymentElement:er,createPaymentMethod:ei,confirmIntent:en}=function({useStripeProps:e,currency:t,defaultCountry:a,isCheckout:i,upgradingTier:n}){let l=(0,S.S2)().unwrapOr(null),[d,o]=(0,s.useReducer)(D,P),{address:c,updateAddress:m,trimAddress:u}=(0,w.U)({defaultCountry:a??(0,E.ub)()}),{address:_,updateAddress:x,trimAddress:p}=(0,w.U)({defaultCountry:a??(0,E.ub)()}),{createPaymentElement:g,unmountPaymentElement:A,createPaymentMethod:I,confirmIntent:B,error:L,paymentMethodType:V,stripeIntent:z,stripeCustomerId:G,is3ds:F}=(0,R.H)({...e,currency:t}),$={name:d.nameOnPaymentMethod,address:(0,T.sH)(c)},q=d.isUsingSavedPaymentMethod?(0,T._l)(d.savedPaymentMethod?.billing_address):c,H=d.hasDifferentShippingAddress&&!(0,j.$V)(_)?_:c,Y=d.savedPaymentMethod?.shipping_address?(0,T._l)(d.savedPaymentMethod?.shipping_address):q,W=d.isUsingSavedPaymentMethod?Y:H,{status:K,data:J}=(0,C.j)({enabledFetch:!!(0,y.getFeatureFlags)().cart_rewrite_full_send_saved_payment});(0,s.useEffect)(()=>{"loaded"===K&&o({type:k.XO.INIT_SAVED_PAYMENT_METHODS,payload:J})},[K]);let X=async()=>{u(),p();let e=await ee();if(o({type:k.XO.SET_ERRORS,payload:e}),e.length>0)return e;let t=await I($);if((0,v.hB)(t)||!t)return t;try{await b.V.postValidatePayment({billingAddress:q,shippingAddress:W,paymentMethodId:t.id})}catch(t){let e=[{code:k.Wc.PAYMENT_METHOD_VALIDATION_ERROR,message:t.message}];return o({type:k.XO.SET_ERRORS,payload:e}),e}return(o({type:k.XO.SET_STRIPE_PAYMENT_METHOD,payload:{stripePaymentMethod:t}}),t.type===N.lB.CARD&&t.card||t.type===N.lB.SEPA&&t.sepa_debit)?t.id:((0,f.$D)(h.FigmaTeam.UPGRADES,Error("Invalid state: payment type should only be Card or SEPA"),{extra:{paymentType:t.type,cardDetailsProvided:!!t.card,sepaDetailsProvided:!!t.sepa_debit}}),{code:v.Or.CREATE_PAYMENT_METHOD_ERROR,message:(0,r.t)("payments.errors.confirm_setup_error")})},Q=async({paymentMethod:a,createIntentParams:s})=>{let i=a||d.stripePaymentMethod?.id;if(!i){let e=[{code:k.Wc.MISSING_PAYMENT_METHOD_ERROR,message:(0,r.t)("payments.errors.missing_payment_method")}];return o({type:k.XO.SET_ERRORS,payload:e}),e}let c=await B({paymentMethod:i,createIntentParams:{...s,redirectUrl:"/",currency:t,billingAddress:q,shippingAddress:W,stripePaymentMethodConfiguration:e.stripePaymentMethodConfiguration}});if((0,v.hB)(c))return c;if(c.customer)try{await b.V.postSavePayment({paymentMethodId:i,stripeCustomerId:c.customer,teamId:s.teamId,planRecordId:l?.planRecordId,currency:t,billingAddress:q,shippingAddress:W,upgradingTier:n})}catch(t){let e=[{code:k.Wc.SAVE_PAYMENT_METHOD_ERROR,message:t.message}];return o({type:k.XO.SET_ERRORS,payload:e}),e}return c},Z=(0,s.useCallback)(e=>{switch(e.type){case k.XO.UPDATE_BILLING_ADDRESS:m(e.payload);break;case k.XO.UPDATE_SHIPPING_ADDRESS:x(e.payload);break;default:o(e)}},[m,x]);async function ee(){let{vatGstId:e,regionalVatGstId:a,nameOnPaymentMethod:s}=d,n=await Promise.all([O({billingAddress:q,shippingAddress:W,teamId:l?.key.parentId??null,isCheckout:!!i}),M({currency:t,billingAddress:q,shippingAddress:W,teamId:l?.key.parentId??null,isCheckout:!!i}),U({vatGstId:e,country:q.country}),U({vatGstId:a,country:q.country,region:q.region})]);return s||n.unshift({code:k.Wc.NAME_ON_PAYMENT_METHOD_REQUIRED,message:(0,r.t)("payments.errors.name_on_payment_method_required")}),n.filter(e=>!!e)}return{state:{...d,billingAddress:q,shippingAddress:W,shippingAddressInput:_,stripeError:L,paymentMethodType:V,stripeIntent:z,is3ds:F,stripeCustomerId:G},dispatch:Z,createPaymentElement:g,unmountPaymentElement:A,createPaymentMethod:X,confirmIntent:Q}}({useStripeProps:{currency:A,paymentFlowSource:v.wn.PRO_UPGRADE,stripePaymentMethodConfiguration:X},currency:A,defaultCountry:(0,E.ub)(),isCheckout:!0,upgradingTier:g}),{status:el,data:{eligibleTeams:ed,eligibleTeamUsers:eo,currentUpgradingUser:ec}}=function({teamId:e,tier:t}){let a=(0,F.wA)(),[s]=(0,q.IT)(Y({tier:t,teamId:e}));return((0,H.i)(s,(0,r.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again")),"errors"===s.status&&a($.sf({view:"recentsAndSharing"})),"loaded"===s.status)?{status:s.status,data:{eligibleTeams:s.data.eligible_teams,eligibleTeamUsers:s.data.eligible_team_users,currentUpgradingUser:s.data.current_upgrading_user}}:{status:s.status,data:{eligibleTeams:[],eligibleTeamUsers:[],currentUpgradingUser:null}}}({teamId:e,tier:g}),em=(0,s.useMemo)(()=>(0,d.O$)(B,L),[B,L]),eu=(0,s.useMemo)(()=>(0,d.s$)(ee),[ee]),e_=(0,s.useMemo)(()=>({..._,...et,applicablePriceData:ee,paymentFormErrors:et.errors,cartSelectionError:_.error,countBySeatType:em}),[_,et,ee,em]),ex=(0,W.x)({state:e_,cartDispatch:p,teamId:e,entryPoint:t,newUser:a});(0,s.useEffect)(()=>{if("loaded"===el){let{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s}=(0,l.W)(ed,eo,ec,i);(0,u.R9)({eligibleTeamIds:ed.map(e=>e.id).filter(e=>!!e),eligibleTeamUsers:eo,tier:g}),p({type:o.H.INIT,payload:{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s,currentUpgradingUserId:ec.user.id}})}},[el]);let ep=(0,s.useCallback)(e=>{(0,k.jO)(e)?ea(e):p(e)},[p,ea]);async function eh(){p({type:o.H.SET_IS_SUBMITTING,payload:{isSubmitting:!0}});let t=et.isUsingSavedPaymentMethod&&et.savedPaymentMethod?.id?et.savedPaymentMethod.id:await ei();if((0,k.cq)(t)||(0,v.hB)(t))return p({type:o.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),t;let a=await en({paymentMethod:t,createIntentParams:{teamId:e,subtotalEstimate:(0,x.Vh)(em,eu),currency:A,createStripeCustomer:!0}});if((0,v.hB)(a)||(0,k.cq)(a))return p({type:o.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a;try{let t=await G.T.calculateEstimate({teamId:e,address:et.billingAddress,billingAddress:et.billingAddress,shippingAddress:et.shippingAddress,currency:A,vatGstId:et.vatGstId,regionalVatGstId:et.regionalVatGstId});p({type:o.H.SET_TAX_PERCENT,payload:{taxPercent:t.data.meta.estimate.tax_percent??0}})}catch(t){let e={code:o.C.ESTIMATE_CALCULATION_ERROR,message:(0,r.t)("payments.errors.estimate_calculation_error")};return p({type:o.H.SET_ERROR,payload:{error:e}}),p({type:o.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}return p({type:o.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),null}let eg=(0,s.useCallback)(()=>{let e=m({additionalSeatsCount:L,selectedUserSeatTypes:B,tier:g});return ep({type:o.H.SET_ERROR,payload:{error:e}}),e},[ep,L,B,g]),ey=(0,s.useCallback)(()=>{if((g===z.Ju.ORG||g===z.Ju.PRO&&V)&&!J){let e={code:o.C.INVALID_LEGAL_NAME,message:(0,r.t)("checkout.errors.missing_legal_name")};return ep({type:o.H.SET_ERROR,payload:{error:e}}),e}return null},[ep,g,J,V]);return{state:e_,dispatch:ep,createPaymentElement:es,unmountPaymentElement:er,collectPaymentDetails:eh,performTierUpgrade:ex,validateUserSeatTypeSelections:eg,validatePaymentInputs:ey}}function Q({currency:e,renewalTerm:t,...a}){return{...J,...a,currency:e??(0,E.LN)(),renewalTerm:t??j.NW.YEAR}}function Z(e,t){switch(t.type){case o.H.UPDATE_DISPLAY_NAME:return{...e,displayName:t.payload.displayName};case o.H.UPDATE_LEGAL_NAME:return{...e,legalName:t.payload.legalName,error:e.error?.code===o.C.INVALID_LEGAL_NAME?null:e.error};case o.H.SET_RENEWAL_TERM:return{...e,renewalTerm:t.payload.renewalTerm};case o.H.SET_CURRENCY:return{...e,currency:t.payload.currency};case o.H.SET_TAX_PERCENT:return{...e,taxPercent:t.payload.taxPercent};case o.H.SET_ERROR:return{...e,error:t.payload.error};case o.H.SET_IS_SUBMITTING:return{...e,isSubmitting:t.payload.isSubmitting};case o.H.SET_HAS_DIFFERENT_LEGAL_NAME:return{...e,legalName:"",hasDifferentLegalName:t.payload.hasDifferentLegalName};case o.H.INIT:return{...e,...t.payload,isLoading:!1};case o.H.UPDATE_ADDITIONAL_SEATS:return{...e,additionalSeatsCount:t.payload,error:m({additionalSeatsCount:t.payload,selectedUserSeatTypes:e.selectedUserSeatTypes,tier:e.tier})};case o.H.UPDATE_USER_SEAT_TYPE:{let{userId:a,seatType:s}=t.payload,r={...e.selectedUserSeatTypes,[a]:s};return{...e,selectedUserSeatTypes:r,error:m({additionalSeatsCount:e.additionalSeatsCount,selectedUserSeatTypes:r,tier:e.tier})}}case o.H.ON_TOGGLE_TEAM:{let{selectedTeamIds:a}=e,{toggledTeam:s}=t.payload,r=a.has(s);i.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:s,selectedTeam:!r});let n=new Set(a);return r?n.delete(s):n.add(s),{...e,selectedTeamIds:n}}case o.H.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS:{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i}=e;return{...e,selectedUserSeatTypes:(0,_.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i})}}case o.H.UPDATE_TO_DEFAULT_SEAT_SELECTIONS:{let{shouldUseSingleEditor:a}=t.payload;if(a)return{...e,selectedUserSeatTypes:{[e.currentUpgradingUserId]:L.ud.EXPERT},additionalSeatsCount:V.N_.dict(()=>0)};{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,currentUpgradingUserId:r}=e;return{...e,selectedUserSeatTypes:(0,_.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:{},currentUpgradingUserId:r})}}}default:return e}}},840856(e,t,a){a.d(t,{C:()=>i,H:()=>n});var s,r,i=((s=i||{}).CARD_ERROR="card_error",s.ESTIMATE_CALCULATION_ERROR="estimate_calculation_error",s.INVALID_PAID_SEAT_TOTAL="invalid_paid_seat_total",s.INVALID_LEGAL_NAME="invalid_legal_name",s.INVALID_TEAM_TOTAL="invalid_team_total",s.UPGRADE_ERROR="upgrade_error",s),n=((r=n||{}).INIT="init",r.ON_TOGGLE_TEAM="on_toggle_team",r.SET_CURRENCY="set_currency",r.SET_ERROR="set_error",r.SET_IS_SUBMITTING="set_is_submitting",r.SET_HAS_DIFFERENT_LEGAL_NAME="set_has_different_legal_name",r.SET_RENEWAL_TERM="set_renewal_term",r.SET_TAX_PERCENT="set_tax_percent",r.UPDATE_ADDITIONAL_SEATS="update_additional_seats",r.UPDATE_DISPLAY_NAME="update_display_name",r.UPDATE_LEGAL_NAME="update_legal_name",r.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS="update_state_from_new_team_selections",r.UPDATE_TO_DEFAULT_SEAT_SELECTIONS="update_to_default_seat_selections",r.UPDATE_USER_SEAT_TYPE="update_user_seat_type",r)},630820(e,t,a){a.d(t,{W:()=>i});var s=a(63504),r=a(340775);function i(e,t,a,i){if(0===e.length&&a)return{eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{[a.user.id]:{...n(a.user),recommendedSeatTypeByTeamId:{},teamIds:[]}},selectedUserSeatTypes:{[a.user.id]:a.recommended_seat_type?.key??s.ud.EXPERT}};let l=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),d=new Set(Object.keys(l)),o={};t.forEach(e=>{let t=e.user,r=t.id;o[r]||(o[r]={...n(t),recommendedSeatTypeByTeamId:{},teamIds:[]}),o[r].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??s.Gu.VIEW,o[r].teamIds.push(e.team_id),l[e.team_id]&&l[e.team_id].eligibleUsers.add(r),i&&Object.entries(o).forEach(([e,t])=>{let r=t.recommendedSeatTypeByTeamId;Object.keys(r).forEach(t=>{let i=e===a?.user?.id?s.ud.EXPERT:s.Gu.VIEW;r[t]=i})})});let c=(0,r.h)({eligibleTeamsByTeamId:l,selectedTeamIds:d,eligibleUsersByUserId:o,selectedUserSeatTypes:{},currentUpgradingUserId:a?.user.id});return{eligibleTeamsByTeamId:l,selectedTeamIds:d,eligibleUsersByUserId:o,selectedUserSeatTypes:c}}function n(e){return{id:e.id,email:e.email,handle:e.handle,img_url:e.img_url}}},241146(e,t,a){a.d(t,{e:()=>o,g:()=>d});var s=a(689637),r=a.n(s),i=a(735292),n=a(366434);if(1464==a.j)var l=a(587212);function d({tier:e,eligibleTeams:t,checkoutFlowType:a,isSingleEditorCheckoutExpEnabled:s,shouldShowStreamlinedNewUserCheckoutUX:r,isSingleFullCheckoutExpEnabled:d}){let o=[n.fI.SELECT_SEATS,n.fI.PAYMENT_AND_ADDRESS,n.fI.REVIEW],c=[n.fI.SELECT_SEATS_AND_PAYMENT,n.fI.REVIEW],m=[];if(e===i.Ju.PRO)return m=d?c:s?a===l.x.SINGLE_EDITOR?[n.fI.UPGRADE_TYPE,...c]:[n.fI.UPGRADE_TYPE,...o]:o,r&&m.push(n.fI.CONFIRMATION),m;{let e=[...o,n.fI.CONFIRMATION];return t.length>0?[n.fI.SELECT_TEAMS,...e]:e}}function o({tier:e,eligibleTeams:t,shouldShowStreamlinedNewUserCheckoutUX:a}){if(e!==i.Ju.PRO)return r()([t.length>0&&n.fI.SELECT_TEAMS,n.fI.SELECT_SEATS,n.fI.ORG_NAME,n.fI.PAYMENT_AND_ADDRESS,n.fI.REVIEW,n.fI.CONFIRMATION]);{let e=[n.fI.UPGRADE_TYPE_AND_SELECT_SEATS,n.fI.PAYMENT_AND_ADDRESS,n.fI.REVIEW];return a&&e.push(n.fI.CONFIRMATION),e}}},218576(e,t,a){a.d(t,{s:()=>r});var s=a(850159);function r({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a,currentUpgradingUserId:r}){let i=[];return 0===a.length&&r?i.push({id:r,handle:e[r].handle,email:e[r].email,img_url:e[r].img_url,teams:"\u2014"}):Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,n=a.filter(e=>r.includes(e)).map(e=>t[e]),l=1===n.length?n[0].name:(0,s.t)("checkout.multiple_teams_label");i.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:l})}),i}},229249(e,t,a){a.d(t,{Nq:()=>c,VC:()=>o,r5:()=>d});var s=a(239976),r=a(850159),i=a(214030),n=a(517436),l=a(366434);let d={[l.fI.SELECT_TEAMS]:{name:(0,r.tx)("org_self_serve.headers.teams_to_upgrade"),getPageTitle:()=>(0,r.tx)("checkout.org_self_serve.select_teams_title"),buttonText:(0,r.tx)("checkout.org_self_serve.next_select_seats")},[l.fI.SELECT_SEATS]:{name:(0,r.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:e=>e?(0,r.tx)("checkout.unified_cart.select_seats_header.pro",{teamName:e}):(0,r.tx)("checkout.unified_cart.select_seats_header.org"),pageSubtitle:(0,r.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(n.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:i.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,r.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,r.tx)("pro_cart.sidebar.next_payment_information")},[l.fI.PAYMENT_AND_ADDRESS]:{name:(0,r.tx)("pro_cart.breadcrumbs.payment_information"),getPageTitle:()=>(0,r.tx)("checkout.enter_your_payment_details"),buttonText:(0,r.tx)("pro_cart.sidebar.next_review")},[l.fI.REVIEW]:{name:(0,r.tx)("pro_cart.breadcrumbs.review"),getPageTitle:()=>(0,r.tx)("checkout.everything_look_good")},[l.fI.UPGRADE_TYPE]:{name:(0,r.tx)("checkout.breadcrumbs.upgrade_type"),getPageTitle:()=>(0,r.tx)("checkout.breadcrumbs.upgrade_type_title")},[l.fI.SELECT_SEATS_AND_PAYMENT]:{name:(0,r.tx)("checkout.breadcrumbs.select_seats_and_payment"),getPageTitle:()=>(0,r.tx)("checkout.enter_your_payment_details"),pageSubtitle:(0,r.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(n.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:i.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,r.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,r.tx)("pro_cart.sidebar.next_review")},[l.fI.UPGRADE_TYPE_AND_SELECT_SEATS]:{name:(0,r.tx)("checkout.breadcrumbs.upgrade_type"),getPageTitle:()=>(0,r.tx)("checkout.breadcrumbs.upgrade_type_title"),buttonText:(0,r.tx)("pro_cart.sidebar.next_payment_information")},[l.fI.ORG_NAME]:{name:(0,r.tx)("checkout.organization_details"),getPageTitle:()=>(0,r.tx)("checkout.organization_details")}},o={...d,[l.fI.SELECT_SEATS]:{name:(0,r.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:()=>(0,r.tx)("checkout.choose_seats")},[l.fI.UPGRADE_TYPE_AND_SELECT_SEATS]:{name:(0,r.tx)("checkout.breadcrumbs.upgrade_type"),getPageTitle:()=>(0,r.tx)("checkout.breadcrumbs.upgrade_type_title")},[l.fI.ORG_NAME]:{name:(0,r.tx)("checkout.organization_details"),getPageTitle:()=>(0,r.tx)("checkout.lightweight.org_legal_name.title")},[l.fI.PAYMENT_AND_ADDRESS]:{name:(0,r.tx)("checkout.payment_details"),getPageTitle:()=>(0,r.tx)("checkout.lightweight.payment_information.title")}},c={...d,[l.fI.SELECT_SEATS_AND_PAYMENT]:{name:(0,r.tx)("single_full.checkout.breadcrumbs.select_seats_and_payment"),getPageTitle:()=>(0,r.tx)("single_full.checkout.cart_title"),buttonText:(0,r.tx)("pro_cart.sidebar.next_review")}}},340775(e,t,a){a.d(t,{h:()=>r});var s=a(12524);function r({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:i}){if(0===t.size&&i)return{[i]:r[i]};let n={},l={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!n[e])if(r[e])n[e]=r[e];else{let s=a[e];l[e]||(l[e]=[]),l[e].push(s.recommendedSeatTypeByTeamId[t])}})}),{...n,...Object.keys(l).reduce((e,t)=>(e[t]=(0,s.Up)(l[t]),e),{})}}},241732(e,t,a){a.d(t,{LightweightTierUpgradeFlow:()=>e1});var s=a(239976),r=a(105652),i=a(645186),n=a(706354),l=a(741542),d=a(181645),o=a(865804),c=a(730002),m=a(59762),u=a(436174),_=a(140979),x=a(227031),p=a(462198),h=a(684325),g=a(515613),y=a(92366),f=a(543750),v=a(91194),E=a(840856),S=a(241146),T=a(424044),j=a(587212),N=a(850159);a(574988);var b=a(548202),A=a(12524),I=a(735292),w=a(53791);function C({state:e,showDetails:t}){var a;let r=e.stripePaymentMethod?(a=e.stripePaymentMethod).type===w.lB.CARD&&a.card?(0,N.t)(`lightweight.checkout.payment_method.card.${a.card.brand}`,{last4:a.card.last4}):a.type===w.lB.SEPA&&a.sepa?.last4?a.sepa.country?(0,N.t)("lightweight.checkout.payment_method.sepa_debit",{countryCode:a.sepa.country.toUpperCase(),last4:a.sepa.last4}):(0,N.t)("lightweight.checkout.payment_method.sepa_debit.no_country_code",{last4:a.sepa.last4}):null:null,i=(0,A.DS)(e.billingAddress),n=(0,A.DS)(e.shippingAddress),l=e.hasDifferentShippingAddress&&n,d=e.tier===I.Ju.PRO&&e.hasDifferentLegalName&&e.legalName;return t?(0,s.jsxs)("div",{children:[r&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.lightweight.payment_information.payment_method"),value:r,dataTestId:"cart-plan-details-last-4"}),i&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.cart_plan_details.billing_address"),value:i,dataTestId:"cart-plan-details-billing-address",showDivider:!!l||!!d}),l&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.cart_plan_details.shipping_address"),value:n,dataTestId:"cart-plan-details-shipping-address",showDivider:!!d}),d&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name",showDivider:!1})]}):(0,s.jsx)("div",{})}var k=a(540160),R=a(727645),P=a(229249);function D({step:e,matchingStep:t,setStep:a,expandedComponent:r,collapsedComponent:i,dataTestId:n,disableEditButton:l,disableNextButton:d,hideNextButton:o,hideEditButton:c,disabledNextButtonTooltip:m,onNext:u,nextButtonText:_,loadingNextButton:x,error:p,variant:h="default"}){let g=e===t,y=P.VC[t]||null;return(0,s.jsx)(R.x,{dataTestId:`${n||""}${g?"-expanded":"-collapsed"}-cart-card`,disableEditButton:l,disableNextButton:d,disabledNextButtonTooltip:m,error:p,loadingNextButton:x,nextButtonText:_,onEditButtonClick:()=>a(t),onNextButtonClick:u,showEditButton:!g&&!c,showNextButton:g&&!o,title:y?.getPageTitle()||null,trackingProperties:{},variant:h,children:g?r:i})}var O=a(366434);function M({step:e,setStep:t,state:a,dispatch:i,createPaymentElement:n,unmountPaymentElement:l,onNext:d}){let[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[_,x]=r.useState(!1),p=a.tier===I.Ju.PRO&&a.hasDifferentLegalName&&!a.legalName&&_?{code:E.C.INVALID_LEGAL_NAME,message:(0,N.t)("checkout.errors.missing_legal_name")}:void 0;r.useEffect(()=>{a.legalName&&x(!1)},[a.legalName]),(0,r.useEffect)(()=>{e===O.fI.PAYMENT_AND_ADDRESS?u(!0):e===O.fI.REVIEW&&c(!0)},[e]);let h=(0,r.useCallback)(()=>{if(!a.isSubmitting){if(a.tier===I.Ju.PRO&&a.hasDifferentLegalName&&!a.legalName)return void x(!0);d()}},[a.isSubmitting,a.tier,a.hasDifferentLegalName,a.legalName,d]),g=(0,s.jsx)(k._,{state:a,dispatch:i,createPaymentElement:n,unmountPaymentElement:l}),y=(0,s.jsx)(C,{state:a,showDetails:o});return(0,s.jsx)(D,{collapsedComponent:y,error:p,expandedComponent:g,hideEditButton:!m,loadingNextButton:a.isSubmitting,matchingStep:O.fI.PAYMENT_AND_ADDRESS,nextButtonText:(0,N.t)("checkout.review"),onNext:h,setStep:t,step:e,variant:"narrow"})}var U=a(120706),B=a(838719),L=a(834116),V=a(113116),z=a(208650),G=a(147911),F=a(68278),$=a(505087),q=a(877304),H=a(897968),Y=a(965974),W=a(63504),K=a(12358),J=a(328151);function X({teamId:e,dispatch:t,state:a}){let{currency:i,currentUpgradingUserId:l,eligibleUsersByUserId:o,renewalTerm:c,selectedUserSeatTypes:m,tier:u}=a,_=r.useRef(null),x=(0,H.G)({currency:i,tier:u,renewalTerm:c,showCents:!1}),[h]=(0,q.m)([x]);if(null===h)throw(0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid state: No seat types data"),{extra:{currency:i,tier:u,renewalTerm:c,showCents:!1,seatTypesQuery:x,seatTypesResponse:h}}),Error("No seat types data");let g=m[l],y=(0,K.SS)(g,{overridePlanTier:u}),f=g===W.ud.EXPERT,v=o[l];return v?(0,s.jsxs)("div",{...{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj x1mxnbhz xmkeg23 x1y0btm7 x7z60cl x1ef8nbk x1kzcg16"},children:[(0,s.jsxs)("div",{...{className:"x1iyjqo2 xs83m0k xdl72j9"},children:[(0,s.jsxs)("div",{"data-testid":"seat-type-container",...{className:"x78zum5 xg2d0mh x6s0dn4"},children:[(0,s.jsx)("p",{...{className:"x1akne3o xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly"},children:(0,Y.JT)(g)}),f&&(0,s.jsx)("div",{children:(0,s.jsx)(z.E,{"data-testid":"badge",variant:"brandOutline",size:"md",children:(0,N.t)("checkout.recommended")})})]}),(0,s.jsx)("p",{"data-tooltip-type":J.Ib.TEXT,"data-tooltip":_.current&&_.current.offsetWidth<_.current.scrollWidth?y:null,"data-tooltip-timeout-delay":500,...{className:"x1n0bwc9 xuxw1ft xb3r6kr xlyipyv"},ref:_,children:y})]}),(0,s.jsx)("div",{children:(0,s.jsx)(Q,{currentSeatType:g,changeSeatType:a=>{d.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:v?.id,previousSeatType:g,newSeatType:a,tier:u,teamId:e}),t({type:E.H.UPDATE_USER_SEAT_TYPE,payload:{userId:v?.id,seatType:a}})},displayableSeatTypes:h})})]}):((0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid user"),{extra:{user:v}}),null)}function Q({currentSeatType:e,changeSeatType:t,displayableSeatTypes:a}){let{getTriggerProps:r,manager:i}=G.b(),n=a?Object.keys(a).sort(K.AG):[];return(0,s.jsxs)(G.bL,{manager:i,children:[(0,s.jsx)("div",{...{className:"x2lah0s x1hr2gdg xuxw1ft"},children:(0,s.jsx)(V.rb,{"data-testid":"button-link-tracked",...r(),children:(0,N.tx)("members_table.batch_actions_menu.role_change.seat_rename")})}),(0,s.jsx)(G.mc,{children:(0,s.jsx)(F.z6,{title:(0,s.jsx)(G.hE,{children:(0,N.tx)("lightweight.checkout.change_seat_menu.title")}),onChange:t,value:e,children:n.map(e=>{let t=a[e];return t?(0,s.jsx)(Z,{seatType:e,displayName:t.displayName,priceString:t.displayPrice,description:t.description},e):null}).filter(Boolean)})})]})}function Z({seatType:e,displayName:t,description:a,priceString:r}){let i=e===W.Gu.VIEW?(0,N.t)("checkout.free"):(0,N.t)("general.price_per_month",{priceString:r});return(0,s.jsx)(F.CU,{value:e,children:(0,s.jsxs)($.fv,{...{className:"x1iorvi4 xjkvuk6 x163pfp xy13l1i"},children:[(0,s.jsx)("div",{children:`${t} \xb7 ${i}`}),(0,s.jsx)("div",{className:"x126k92a xkrz9af x1p6yuv4",children:a})]})})}var ee=a(422154);function et({checkoutFlowType:e,setCheckoutFlowType:t,state:a,dispatch:r,teamId:i}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{...{className:"x78zum5 x1pulhmw xwk1qbt"},children:[(0,s.jsx)(ea,{checkoutFlowType:j.x.SINGLE_EDITOR,title:(0,N.t)("checkout.upgrade_type_single_title"),description:(0,N.t)("checkout.upgrade_type_single_description"),imgUrl:(0,B.staticAssetWithUploadsPath)("8d5db7b121eb482d3e18c67dcb1688f2cc5859d7"),selected:e===j.x.SINGLE_EDITOR,setCheckoutFlowType:t}),(0,s.jsx)(ea,{checkoutFlowType:j.x.MULTI_EDITOR,title:(0,N.t)("checkout.upgrade_type_team_title"),description:(0,N.t)("checkout.upgrade_type_team_description"),imgUrl:(0,B.staticAssetWithUploadsPath)("4d8bc7168c9095f834085230ca86d7bdab0925f0"),selected:e===j.x.MULTI_EDITOR,setCheckoutFlowType:t})]}),!!e&&i&&(0,s.jsx)(es,{checkoutFlowType:e,state:a,dispatch:r,teamId:i})]})}function ea({checkoutFlowType:e,title:t,description:a,imgUrl:r,selected:i,setCheckoutFlowType:n}){return(0,s.jsxs)(V.e6,{"data-testid":`upgrade-type-${e}-button`,...{0:{className:"x78zum5 x98rzlu xf7z5ut x6s0dn4 x1nfngrj xmkeg23 x1y0btm7 x1mxnbhz x1yjdb4r xv2f06h x7z60cl"},1:{className:"x78zum5 x98rzlu xf7z5ut x6s0dn4 x1nfngrj xmkeg23 x1y0btm7 x1mxnbhz xpjdn5u x1va2ikv"}}[0|!!i],onClick:()=>n(e),children:[(0,s.jsx)(L.oW,{draggable:!1,src:r,alt:t,className:"xkz2mw3 xpl1tfi"}),(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1cy8zhl"},children:[(0,s.jsx)("span",{className:"x1akne3o xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly",children:t}),(0,s.jsx)("span",{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up",children:a})]})]})}function es({checkoutFlowType:e,state:t,dispatch:a,teamId:r}){let i=(0,N.tx)("checkout.lightweight.seat_selection.title",{count:e===j.x.SINGLE_EDITOR?1:2});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x7oc15f",children:i}),e===j.x.SINGLE_EDITOR?(0,s.jsx)("div",{...{className:"x7oc15f"},children:(0,s.jsx)(X,{teamId:r,dispatch:a,state:t})}):(0,s.jsx)("div",{children:(0,s.jsx)(ee.D,{state:t,teamId:r,dispatch:a,shouldShowTeamColumn:!1})})]})}function er({checkoutFlowType:e,countBySeatType:t,currentUpgradingUserSeatType:a}){var r,i;let l,d,o=(0,N.t)("checkout.lightweight.seat_selection.title",{count:e===j.x.SINGLE_EDITOR?1:2});return d=e===j.x.SINGLE_EDITOR?(r=a,(0,N.t)("checkout.lightweight.seat_selection.single_editor.description",{seatType:(0,Y.tI)(r)})):(i=t,(l=[W.ud.EXPERT,W.ud.DEVELOPER,W.ud.COLLABORATOR].map(e=>{let t=i[e]||0;return 0===t?"":(0,N.t)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,Y.tI)(e)})}).filter(Boolean).join(", "))||((0,p.$D)(n.FigmaTeam.UPGRADES,Error(`Invalid seat selection state: 0 paid seats selected. ${i}`)),null)||""),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:e===j.x.SINGLE_EDITOR?(0,N.t)("checkout.upgrade_type_single_title"):(0,N.t)("checkout.upgrade_type_team_title")}),(0,s.jsx)("div",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xmiv3ne",children:o}),(0,s.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:d})]})}function ei({checkoutFlowType:e,setCheckoutFlowType:t,state:a,dispatch:i,teamId:l,step:d,setStep:o,onNext:c}){let m=r.useMemo(()=>(0,U.A)(a.countBySeatType,a.tier),[a.countBySeatType,a.tier])||a.cartSelectionError?.code!==E.C.INVALID_PAID_SEAT_TOTAL?void 0:a.cartSelectionError;if(d!==O.fI.UPGRADE_TYPE_AND_SELECT_SEATS&&!e)throw(0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid state: No checkout flow type selected after passing upgrade type and seat selection step"),{extra:{step:d}}),Error("No upgrade type selected");if(!(a.currentUpgradingUserId in a.selectedUserSeatTypes))throw(0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid state: current user does not have a selected seat type"),{extra:{selectedUserSeatTypes:a.selectedUserSeatTypes}}),Error("No seat types data for current user");let u=(0,s.jsx)(et,{checkoutFlowType:e,setCheckoutFlowType:t,state:a,dispatch:i,teamId:l}),_=(0,s.jsx)(er,{checkoutFlowType:e,countBySeatType:a.countBySeatType,currentUpgradingUserSeatType:a.selectedUserSeatTypes[a.currentUpgradingUserId]});return(0,s.jsx)(D,{collapsedComponent:_,dataTestId:"upgrade-type-and-seat-selection",disableEditButton:a.isSubmitting,error:m,expandedComponent:u,hideNextButton:!e,matchingStep:O.fI.UPGRADE_TYPE_AND_SELECT_SEATS,onNext:()=>{m||c()},setStep:o,step:d,variant:"narrow"})}var en=a(474312),el=a(942980);function ed({step:e,onNext:t,setStep:a,state:i,dispatch:n}){let[l,d]=(0,r.useState)(!0),[o,c]=r.useState(!1),m=!i.legalName&&o?{code:E.C.INVALID_LEGAL_NAME,message:(0,N.t)("checkout.errors.missing_legal_name")}:void 0;return(0,r.useEffect)(()=>{e===el.fI.ORG_NAME&&d(!1)},[e]),(0,r.useEffect)(()=>{i.legalName&&c(!1)},[i.legalName]),(0,s.jsx)(D,{collapsedComponent:(0,s.jsx)(eo,{legalName:i.legalName,displayName:i.displayName}),disableEditButton:i.isSubmitting,error:m,expandedComponent:(0,s.jsx)(en.M,{legalName:i.legalName,displayName:i.displayName,dispatch:n}),hideEditButton:l,matchingStep:el.fI.ORG_NAME,onNext:()=>{i.legalName?t():c(!0)},setStep:a,step:e,variant:"narrow"})}function eo({legalName:e,displayName:t}){return(0,s.jsxs)("div",{"data-testid":"org-legal-name-card-collapsed",children:[e&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.lightweight.org_name.legal_name_title"),value:e,dataTestId:"cart-details-org-legal-name",showDivider:!!t}),t&&(0,s.jsx)(b.m,{header:(0,N.t)("checkout.lightweight.org_name.display_name_title"),value:t,dataTestId:"cart-details-org-display-name",showDivider:!1})]})}var ec=a(824272),em=a(50751),eu=a(690607),e_=a(609024),ex=a(555355),ep=a(364136),eh=a(214030),eg=a(497544),ey=a(735415),ef=a(145939),ev=a(92576),eE=a(658403),eS=a(102644),eT=a(2259),ej=a(38900),eN=a(636773),eb=a(18526),eA=a(383177),eI=a(558920),ew=a(517436);function eC({defaultExpanded:e,tier:t,isAnnual:a}){let[i,n]=r.useState(e),l=t===I.Ju.ORG?ef.RY:ef.oD;return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1yjdb4r x1mxnbhz xmkeg23 x1y0btm7 x7z60cl xb3r6kr xh8yej3"},children:[(0,s.jsxs)(V.e6,{...{0:{className:"x78zum5 x6s0dn4 x1qughib xf7z5ut x1gcgh60 x1yjdb4r xh8yej3 xdpxx8g"},1:{className:"x78zum5 x6s0dn4 x1qughib xf7z5ut x1gcgh60 x1yjdb4r xh8yej3 xdpxx8g xso031l x1q0q8m5 xertd99"}}[0|!!i],onClick:()=>{n(e=>!e)},"aria-expanded":i,"data-testid":"legal-content-toggle",children:[(0,s.jsx)("span",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o"},children:(0,N.t)("checkout.how_do_new_seat_additions_and_upgrades_work")}),i?(0,s.jsx)(eA.l,{}):(0,s.jsx)(eI.k,{})]}),i&&(0,s.jsx)("div",{...{className:"x1gcgh60 x1jwbysl x1vi7shn xp6roeo x1yjdb4r"},"data-testid":"legal-content-body",children:(0,s.jsxs)("span",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o"},children:[(0,s.jsx)("p",{children:(0,ef.eP)(t,a)}),(0,s.jsx)(ew.Ph,{newTab:!0,href:l,trusted:!0,children:(0,N.t)("checkout.learn_more")})]})})]})}function ek({state:e,dispatch:t,onSubmit:a,trackingProperties:n,showTermAndUpgradeButton:l}){let{selectedTeamIds:d,tier:o,renewalTerm:c,currency:m,cartSelectionError:u,isSubmitting:_,countBySeatType:x,eligibleTeamsByTeamId:p}=e,h=(0===Object.values(p).length||d.size>0)&&!!x,g=(0,eb._Z)(),y=(0,eN.Um)(),[f,v]=r.useState(!1),[S,T]=r.useState(!1),j=e.cartSelectionError?.code&&![E.C.INVALID_PAID_SEAT_TOTAL,E.C.INVALID_LEGAL_NAME].includes(e.cartSelectionError.code)?u:void 0,b=(0,i.wA)();return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1r05qx8"},children:[(0,s.jsxs)(R.x,{title:o===I.Ju.PRO?(0,N.t)("checkout.your_professional_plan"):(0,N.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",noHeaderMargin:!0,variant:"narrow",children:[(0,s.jsxs)("div",{children:[g&&(0,s.jsxs)("div",{...{className:"x78zum5 x1qughib x6s0dn4 xso031l x1q0q8m5 xertd99 x1vi7shn xp6roeo"},"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:(0,N.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(eT.D,{currency:m,dropdownShown:y,supportedCurrencies:(0,eb.B9)(),changeCurrency:e=>{t({type:E.H.SET_CURRENCY,payload:{currency:e}})},shortFormDisplay:!0,paddingOverride:0})]}),h&&(0,s.jsxs)(s.Fragment,{children:[o===I.Ju.PRO&&(0,s.jsx)(eR,{dispatch:t,renewalTerm:c}),(0,s.jsx)(ev.O,{isCartReviewSummary:!0,state:e}),l&&(0,s.jsx)(eP,{hasAcknowledgedTerms:f,setHasAcknowledgedTerms:e=>{v(e),T(!1)},tier:o,isAnnual:c===O.NW.YEAR})]})]}),(0,s.jsxs)("div",{...{className:"x7hzu26"},children:[j&&(0,s.jsx)("div",{...{className:"x1ef8nbk"},children:(0,s.jsx)(ec.$y,{variant:"warn",children:(0,s.jsx)(em.Q,{children:j.message})})}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eD,{shouldDisableSubmitButton:_,trackingProperties:n,isSubmitting:_,tier:o,onSubmit:e=>{f?a(e):T(!0)}}),S&&(0,s.jsx)("div",{...{className:"xehsoiq"},children:(0,s.jsx)(ec.$y,{variant:"danger",children:(0,s.jsx)(em.Q,{children:(0,N.t)("checkout.lightweight_checkout.sidebar.terms_and_conditions_not_checked_error_message")})})})]})]})]}),(0,s.jsx)(eC,{tier:o,isAnnual:c===O.NW.YEAR}),o===I.Ju.ORG&&(0,s.jsxs)("div",{...{className:"x78zum5 xg2d0mh"},"data-testid":"cart-sidebar-footer",children:[(0,s.jsx)(ep.a,{}),(0,s.jsx)("p",{children:(0,N.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("button",{type:"button",...{className:"x1quhyk7"},onClick:()=>{b((0,ej.to)({type:eE.lk,showModalsBeneath:!0,data:{source:eS.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},children:(0,N.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]})]})}function eR({dispatch:e,renewalTerm:t}){return(0,s.jsx)("fieldset",{...{className:"x1vi7shn xp6roeo"},"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(eu.b,{legend:(0,s.jsx)(e_.q,{children:(0,N.tx)("checkout.sidebar.switch_your_billing_interval")}),value:t,onChange:t=>{e({type:E.H.SET_RENEWAL_TERM,payload:{renewalTerm:t}})},children:[(0,s.jsx)(eu.c,{value:O.NW.YEAR,label:(0,s.jsxs)(ex.J,{...{className:"x78zum5 x6s0dn4 xg2d0mh"},children:[(0,N.tx)("checkout.sidebar.annual")," ",(0,s.jsx)(z.E,{variant:"successOutline",size:"md",children:(0,N.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(eu.c,{value:O.NW.MONTH,label:(0,s.jsx)(ex.J,{children:(0,N.tx)("checkout.sidebar.monthly")})})]})})}function eP(e){return(0,s.jsx)("div",{...{className:"xehsoiq"},"data-testid":"cart-sidebar-terms-checkbox",children:(0,s.jsx)(ef.PD,{...e})})}function eD({tier:e,shouldDisableSubmitButton:t,trackingProperties:a,isSubmitting:r,onSubmit:i}){let n=e===I.Ju.PRO?(0,N.tx)("lightweight.checkout.sidebar_cta.pro"):(0,N.tx)("lightweight.checkout.sidebar_cta.org");return(0,s.jsx)(ey.Ff,{fullWidth:!0,onClick:e=>{e.preventDefault(),i(e)},disabled:t,"data-testid":"cart-sidebar-button",trackingProperties:{trackingDescriptor:eh.c.CART_SIDEBAR,...a},children:r?(0,s.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp"},"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(eg.k,{})}):n})}var eO=a(542706),eM=a(747880),eU=a(387960);function eB({step:e,onNext:t,setStep:a,state:i,dispatch:n}){let l=r.useMemo(()=>(0,U.A)(i.countBySeatType,i.tier),[i.countBySeatType,i.tier]),[d,o]=r.useState(!1),c=l||i.cartSelectionError?.code!==E.C.INVALID_PAID_SEAT_TOTAL?void 0:i.cartSelectionError;return r.useEffect(()=>{e===el.fI.SELECT_SEATS&&o(!0)},[e]),(0,s.jsx)(D,{collapsedComponent:(0,s.jsx)(eL,{state:i,showDetails:d}),disableEditButton:i.isSubmitting,disabledNextButtonTooltip:(0,N.t)("checkout.sidebar.paid_seat_minimum_banner"),error:c,expandedComponent:(0,s.jsx)(ee.D,{state:i,dispatch:n,shouldShowTeamColumn:!0,teamId:null}),hideEditButton:!d,matchingStep:el.fI.SELECT_SEATS,onNext:()=>{l&&t()},setStep:a,step:e,variant:"narrow"})}function eL({state:e,showDetails:t}){let{countBySeatType:a}=e,r=Object.entries(a).sort(([e],[t])=>(0,K.AG)(e,t)).map(([e,t])=>(0,N.tx)("checkout.lightweight.select_seats.description.per_seat_type",{count:t,seatType:(0,eU.QC)(e)}));return t?(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:(0,s.jsx)(eM.T,{children:r})})}):(0,s.jsx)("div",{})}var eV=a(245598);function ez({step:e,setStep:t,state:a,dispatch:r,onNext:i}){let n=a.selectedTeamIds.size>0?void 0:{code:E.C.INVALID_TEAM_TOTAL,message:(0,N.t)("lightweight.checkout.team_selection.invalid_team_total_message")};return(0,s.jsx)(D,{collapsedComponent:(0,s.jsx)(eG,{state:a}),disableEditButton:a.isSubmitting,error:n,expandedComponent:(0,s.jsx)(eV.d,{state:a,dispatch:r}),matchingStep:el.fI.SELECT_TEAMS,onNext:()=>{n||i()},setStep:t,step:e,variant:"narrow"})}function eG({state:e}){return(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:(0,N.tx)("checkout.lightweight.select_teams.description",{count:e.selectedTeamIds.size})})})}function eF(e){return(0,s.jsxs)(eO.E,{children:[(0,s.jsx)("div",{...{className:"xf1vcxl"},"data-testid":"lightweight-cart-header",children:(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu"},children:(0,N.tx)("all_carts.title.checkout")})}),(0,s.jsxs)("div",{...{className:"xrvj5dj xgr4fv1 x1excjyp"},children:[(0,s.jsx)("div",{children:e.tier===I.Ju.ORG?(0,s.jsx)(eq,{...e}):(0,s.jsx)(e$,{...e})}),(0,s.jsx)(ek,{state:e.state,dispatch:e.dispatch,onSubmit:e.performTierUpgrade,showTermAndUpgradeButton:e.step===O.fI.REVIEW})]})]})}function e$(e){return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf xnfooyd"},children:[(0,s.jsx)(ei,{...e}),(0,s.jsx)(M,{...e})]})}function eq(e){let t=Object.values(e.state.eligibleTeamsByTeamId);return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf xnfooyd"},children:[t.length>0&&(0,s.jsx)(ez,{...e}),(0,s.jsx)(eB,{...e}),(0,s.jsx)(ed,{...e}),(0,s.jsx)(M,{...e})]})}var eH=a(420018),eY=a(694471),eW=a(494423),eK=a(496172),eJ=a(487817),eX=a(644350),eQ=a(640818),eZ=a(113641);function e0({teamId:e,entryPoint:t,newUser:a,...x}){let h=(0,f.C)((0,eW.cH)(t),a),N=(0,i.wA)(),{state:b,dispatch:A,createPaymentElement:w,unmountPaymentElement:C,performTierUpgrade:k,collectPaymentDetails:R,validatePaymentInputs:P,validateUserSeatTypeSelections:D}=(0,v.iW)({teamId:e,tier:x.tier,currency:x.currency,renewalTerm:x.renewalTerm,entryPoint:t,newUser:a}),{tier:M,currency:U,renewalTerm:B,selectedTeamIds:L,selectedUserSeatTypes:V,additionalSeatsCount:z,countBySeatType:G,applicablePriceData:F,isLoading:$,cartSelectionError:q,isSubmitting:H,eligibleUsersByUserId:Y,eligibleTeamsByTeamId:W}=b,[K,J]=r.useState(null);(0,r.useEffect)(()=>{$||1!==Object.keys(Y).length||M!==I.Ju.PRO||J(j.x.SINGLE_EDITOR)},[Y,$,J,M]);let X=(0,r.useMemo)(()=>$?[]:(0,S.e)({tier:M,eligibleTeams:Object.values(W),shouldShowStreamlinedNewUserCheckoutUX:h()}),[$,M,W,h]),[Q,Z]=(0,r.useState)(null),{teamName:ee,isOrgAdmin:et,userEmail:ea}=(0,_.bc)((0,eX.CJW)({teamId:e})).transform(({team:e,currentUser:t})=>({teamName:e?.name??"",userEmail:t?.email??"",isOrgAdmin:t?.baseOrgUsers?.some(e=>e.permission===eJ._D.ADMIN)})).unwrapOr({teamName:"",isOrgAdmin:!1,userEmail:""}),es=(0,r.useCallback)(t=>{-1===X.indexOf(t)?(0,p.$D)(n.FigmaTeam.UPGRADES,Error(`Invalid step: ${t}`),{extra:{steps:X,step:t}}):(Z(t),Q&&d.az.trackDefinedEvent("monetization_upgrades.checkout_change_step",{teamId:e?.toString(),currentStep:Q,tier:M,newStep:t,selectedTeamIds:(0,T.gu)(Array.from(L)),selectedUserSeatTypes:(0,T.Tj)(V)??void 0,additionalSeatsCount:(0,T.gS)(z)??void 0,countBySeatType:(0,T.gS)(G)??void 0}))},[X,e,Q,M,L,V,z,G]),er=(0,r.useCallback)(()=>X[Math.min(X.indexOf(Q)+1,X.length-1)],[Q,X]),ei=(0,r.useCallback)(async()=>{if(H)return!1;switch(A({type:E.H.SET_ERROR,payload:{error:null}}),Q){case O.fI.SELECT_TEAMS:A({type:E.H.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case O.fI.SELECT_SEATS:if(await D())return!1;break;case O.fI.PAYMENT_AND_ADDRESS:if(P()||await R())return!1}return es(er()),!0},[H,A,Q,es,er,D,P,R]),en=r.useCallback(async()=>{let e=await k();e||M!==I.Ju.ORG||es(O.fI.CONFIRMATION),!e&&M===I.Ju.PRO&&h()&&es(O.fI.CONFIRMATION)},[k,es,M,h]),el=(0,r.useCallback)(e=>{A({type:E.H.UPDATE_TO_DEFAULT_SEAT_SELECTIONS,payload:{shouldUseSingleEditor:e===j.x.SINGLE_EDITOR}}),J(e)},[A,J]),ed=()=>{u.Ay.redirect("/files/recent")};return(0,r.useEffect)(()=>{if(!$&&!Q){let a=X[0];a&&(es(a),(0,l.getFeatureFlags)().enable_starter_cart_rum_tracking&&(0,c.se)(n.FigmaTeam.UPGRADES),d.az.trackDefinedEvent("monetization_upgrades.checkout_entry",{teamId:e?.toString(),entryPoint:(0,eW.cH)(t),upsellSource:(0,eW.dh)(t),step:a,tier:M,currency:U,renewalTerm:B,selectedTeamIds:(0,T.gu)(Array.from(L)),selectedUserSeatTypes:(0,T.Tj)(V)??void 0,additionalSeatsCount:(0,T.gS)(z)??void 0,countBySeatType:(0,T.gS)(G)??void 0}))}},[$,Q,X,es,e,t,M,U,B,L,V,G,z]),(0,r.useEffect)(()=>{q?.code===E.C.CARD_ERROR&&Q===O.fI.REVIEW&&es(O.fI.PAYMENT_AND_ADDRESS)},[q?.code,es,Q,K,M]),(0,r.useEffect)(()=>{ee&&A({type:E.H.UPDATE_DISPLAY_NAME,payload:{displayName:ee}})},[ee,A]),(0,s.jsx)(o.fu,{name:eZ.e0.LIGHTWEIGHT_TIER_UPGRADE_FLOW,properties:{teamId:e?.toString(),entryPoint:(0,eW.cH)(t),upsellSource:a?eQ.b.PURCHASE_PROFESSIONAL_ROUTE:(0,eW.dh)(t),tier:M,step:Q,currency:U,renewalTerm:B,prices:(0,T.Jh)(F),paywallType:(0,eW.fU)(t)},enabled:!$,trackingOptions:{teamName:n.FigmaTeam.UPGRADES,addToRUM:!0},children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(eY.f,{}),children:$||!Q?(0,s.jsx)(eY.f,{}):Q===O.fI.CONFIRMATION?M===I.Ju.PRO?(0,s.jsx)(y.z,{teamId:e}):(0,s.jsx)(g.I,{orgMigrated:x.orgMigrated}):(0,s.jsxs)("form",{children:[M===I.Ju.ORG&&et&&(0,s.jsx)(eH.wW,{onContactSales:()=>{N((0,ej.to)({type:eE.lk,data:{source:eS.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},onFileBrowserClick:ed}),M===I.Ju.ORG&&(0,m.qe)(ea)&&(0,s.jsx)(eH.VE,{onFileBrowserClick:ed}),(0,s.jsx)(eF,{checkoutFlowType:K,createPaymentElement:w,dispatch:A,onNext:ei,performTierUpgrade:en,setCheckoutFlowType:el,setStep:es,state:b,step:Q,teamId:e,tier:M,unmountPaymentElement:C})]})})})}function e1(e){return(0,s.jsx)(x.u9,{label:"LightweightTierUpgradeFlow",children:(0,s.jsx)(h.tH,{team:n.FigmaTeam.UPGRADES,boundaryKey:"TierUpgradeFlow",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:eK.y4,children:(0,s.jsx)(e0,{...e})})})}},576743(e,t,a){a.d(t,{ResubscribeModal:()=>M});var s=a(239976),r=a(105652),i=a(645186),n=a(732632),l=a(395227),d=a(71239),o=a(297151),c=a(850159),m=a(741542),u=a(877304),_=a(843489);a(574988);var x=a(214030),p=a(865804),h=a(568660),g=a(651255),y=a(613629),f=a(133580),v=a(12524),E=a(293216),S=a(38900),T=a(580618),j=a(415591),N=a(47047),b=a(795210),A=a(886213),I=a(331850),w=a(173680),C=a(735292),k=a(366434),R=a(94160),P=a(888034);let D=(0,p.tf)(n.$n),O=(0,p.tf)(n.$n);function M(e){return(0,s.jsx)(h.n,{boundaryKey:"resubscribe-modal",loadingFallback:(0,s.jsx)(g.H,{estimatedWidth:"md",estimatedHeight:120,onClose:e.onClose,hiddenTitle:"Loading"}),errorFallback:(0,s.jsx)(B,{onClose:e.onClose}),children:(0,s.jsx)(U,{...e})})}function U(e){let{upsellSource:t,nextBillDate:a,team:n,annualSubscription:h,monthlySubscription:g,currency:v,open:M,onClose:U}=e,B=(0,i.wA)(),[V,z]=(0,r.useState)(!0),G=l.hS({open:M,onClose:U}),F=(0,I.S2)().unwrapOr(null),[$,q]=(0,A.IT)((0,P.i)(F?.planRecordId??"")),H=(0,N.j)({enabledFetch:!!(0,m.getFeatureFlags)().can_one_click_resubscribe}),Y=C.Ju.PRO,W=(0,T.jv)({billableProductKeys:b.N_,baseQuery:{currency:v,tier:Y,renewalTerm:k.NW.YEAR,unit:k.NW.YEAR}}),K=(0,T.jv)({billableProductKeys:b.N_,baseQuery:{currency:v,tier:Y,renewalTerm:k.NW.MONTH,unit:k.NW.MONTH}}),[J,X,Q]=(0,u.m)([H,W,K]),Z=()=>{B((0,S.Ce)()),(0,E.C8)({team:n,dispatch:B,cancelling:!0,monthlySub:null,annualSub:null,currency:v,canSeeBillingAddressExp:!0,trackingProperties:{upsellSource:t},source:"resubscribe_modal"})},ee=!!J&&J.length>0&&J[0];if((0,_.h)(()=>{ee||Z()}),!ee)return null;let et=L(X,h?.seats),ea=L(Q,g?.seats),es=(0,f.up)(et+ea,v,{showCents:!0}),er=ee.last4,ei=async e=>{z(!1),e.preventDefault();let t=F?.stripeCustomerId;if(!t)throw Error("Missing stripeCustomerId for resubscription");try{await R.V.postSavePayment({paymentMethodId:ee.id,stripeCustomerId:t,teamId:n.id,currency:v,billingAddress:(0,w._l)(ee.billing_address)}),await P.T.deletePendingCancellations(F?.planRecordId??"","resubscribe_modal")}catch(e){z(!0),B(y.F.enqueue({message:(0,c.t)("general.an_error_occurred_while_performing_that_action"),error:!0}));return}finally{z(!0)}q.refetch(),B((0,E.Be)({teamId:n.id})),B(y.F.enqueue({message:(0,c.t)("resubscribe_modal.success_message"),type:"success"})),B((0,S.Ce)())};return(0,s.jsxs)(p.fu,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.bL,{manager:G,width:"fit-content",children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,c.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.nB,{...{className:"x1dc814f"},children:(0,s.jsx)("p",{children:(0,c.tx)("resubscribe_modal.body",{last4:er,formattedAmount:es,nextBillDate:a})})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(O,{variant:"secondary",disabled:!V,onClick:Z,trackingProperties:{trackingDescriptor:x.c.UPDATE_PAYMENT},children:(0,c.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(D,{variant:"primary",disabled:!V,onClick:ei,trackingProperties:{trackingDescriptor:x.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,c.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:j.Ix,...{className:"x1s85apg"}})]})}function B({onClose:e}){let t=(0,i.wA)();return(0,r.useEffect)(()=>{t(y.F.enqueue({message:(0,c.t)("general.an_error_occurred_while_performing_that_action"),error:!0})),e()},[t,e]),null}function L(e,t){let a=(0,v.s$)(e),s=b.N_.dict(e=>t?.[e]||0);return(0,f.Vh)(s,a)}},562678(e,t,a){a.d(t,{UniversalUpgradeSequence:()=>H});var s=a(239976),r=a(105652),i=a(645186),n=a(850159),l=a(843489),d=a(865804),o=a(921282),c=a(705828),m=a(921424),u=a(783142),_=a(898312),x=a(274263),p=a(985373),h=a(612883),g=a(38900),y=a(267925),f=a(494423),v=a(110638),E=a(773201),S=a(18526),T=a(523454),j=a(366434),N=a(710383),b=a(754305),A=a(130729),I=a(116682),w=a(548424),C=a(692851),k=a(90550),R=a(265773),P=a(964305),D=a(953236),O=a(402713),M=a(473397),U=a(406995),B=a(508295),L=a(418754),V=a(554865),z=a(802325);let G=(0,R.nF)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:n})=>{let l;I.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(l="team"in t.meta?t.meta.team:t.meta,e.dispatch(D.bE({team:l})),(0,O._)("Team Created",l),V.G.getTeam({teamId:l.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(P.bE({role:a}));r(),e.dispatch(h.WX({teamId:l.id,selectedView:a,newTeam:!0,currency:s,entryPoint:(0,f.cH)(U.C.PLAN_CREATION_NEW_PAID_TEAM),...n?{onBillingCompleteRedirectInfo:n}:{}}))}).catch(()=>{i()})});function F(e){let t=(0,i.wA)(),a=(0,B.TA)(),l=(0,i.d4)(L.P),d=(0,i.d4)(e=>e.roles.byTeamId),[o,c]=r.useState(!1),[u,_]=r.useState(!1),[x,p]=r.useState(""),h=(0,S.LN)(),y=()=>{t(g.Ce())},f=(0,A.s)(()=>{c(!0),x?t(G({teamName:x,selectedView:e.selectedView,currency:h,onSuccess:y,onError:()=>{c(!1),_(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(c(!1),_(!0))});return a&&!(0,M.e5)({userId:a,teams:Object.values(l),rolesByTeamId:d})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:z.KV,children:(0,n.tx)("universal_upgrade_sequence.subtitle")}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.I,{message:(0,n.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(m.Kz,{multiple:1})]}),(0,s.jsx)(m.Kz,{multiple:2}),(0,s.jsxs)("div",{className:z.$g,children:[(0,s.jsx)("div",{className:z.Eh,children:(0,s.jsx)(C.i,{dataTestId:"createTeamInput",placeholder:(0,n.t)("universal_upgrade_sequence.team_name.placeholder"),value:x||"",onChange:e=>p(e.target.value),required:!0,maxLength:255})}),(0,s.jsx)(m.vd,{dataTestId:"nextButton",className:z.DI,disabled:!x||o,onClick:f,children:o?(0,s.jsx)(k.kt,{className:z.u1}):(0,n.tx)("universal_upgrade_sequence.next")})]})]}):null}var $=a(924395),q=a(926808);function H(e){let[t,a]=r.useState("selectTeam"),A=(0,i.wA)(),I=(0,E._6)(),w=(0,v.FC)(),C=(0,i.d4)(e=>e.payment.promo),k=(0,i.d4)(e=>e.payment.billingPeriod),R=()=>{(0,y.EM)(x.y),(0,y.EM)("entryPoint"),A(g.Lo())};if((0,l.h)(()=>{e.plan===$.I.PRO&&(0===(0,T.PS)(w).length?(A(_.Dw({openInNewTab:!o.eD})),a("createTeam")):a("selectTeam"))}),"selectTeam"===t){let t;return t=(0,T.PS)(w),(0,s.jsx)(d.fu,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(b.ey,{hide:R,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:z.GK,children:(0,n.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(c.Jn,{dataTestId:"closeButton",className:z.b,onClick:R,innerText:(0,n.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(m.Kz,{multiple:2}),(0,s.jsx)(q.I,{eligibleTeams:t,selectTeam:t=>{"teamUpgrade"===I.view?A(p.sf({...I,teamFlowType:N.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,u.kR)(I.paymentStep,N.SC.UPGRADE_EXISTING_TEAM,I.billingPeriod||null,C,I.planType||N.Sc.UNDETERMINED,C?j.Vv.CONFIRM_PAY:j.Vv.CHOOSE_PLAN),billingPeriod:e.billingPeriod||k,entryPoint:e.entryPoint})):A(h.WX({teamId:t.id,selectedView:I,newTeam:!1,currency:(0,S.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:(0,f.cH)(e.entryPoint),openInNewTab:e.openInNewTab})),(0,y.EM)(x.y),(0,y.EM)("entryPoint"),A(g.Ce()),e.onDone?.()}}),(0,s.jsx)(m.Kz,{multiple:2}),(0,s.jsx)(F,{selectedView:I,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})}return(0,s.jsx)(s.Fragment,{})}},23959(e,t,a){a.d(t,{UpgradeContactSalesModal:()=>N});var s=a(239976),r=a(105652),i=a(645186),n=a(130729),l=a(850159),d=a(865804),o=a(59762),c=a(227031),m=a(116682),u=a(705828),_=a(548424),x=a(921424),p=a(824234),h=a(38900),g=a(936652),y=a(925420),f=a(754305),v=a(411805);let E="upgrade_contact_sales_modal--closeButton--9pv7g";var S=a(354230),T=a(809059);let j=(0,g.Ju)(function({hideModal:e}){return(0,s.jsx)(d.fu,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(f.ey,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--qhlLg",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Vp9yQ upgrade_contact_sales_modal--modalTitle--kKN1X text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,s.jsx)(p.B,{className:"upgrade_contact_sales_modal--successIcon--lrHKb",svg:T.A}),(0,l.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(u.Jn,{className:E,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--M2hRy text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,l.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function N(e){return(0,s.jsx)(c.u9,{label:"UpgradeContactSalesModal",children:(0,s.jsx)(b,{...e})})}function b(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),[c,g]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),T=()=>{t(h.Lo())},N=(0,n.s)(()=>{let a={},s=(0,l.t)("universal_upgrade.this_field_is_required");if(c.email?(0,o.xf)(c.email)||(a.email=(0,l.t)("universal_upgrade.please_provide_a_valid_email_address")):a.email=s,c.name||(a.name=s),c.companyName||(a.companyName=s),c.topic||(a.topic=s),c.plan||(a.plan=s),g(e=>({...e,formErrors:a,result:void 0})),0===Object.keys(a).length){let a={email:c.email,name:c.name,company_name:c.companyName,topic:c.topic,plan:c.plan,phone:c.phone,message:c.freeText,source:e.source,form_name:"topic_v1"};m.Ay.post("/api/form_post/org-lead-gen",a).then(()=>{g(e=>({...e,result:"success"})),t((0,h.to)({type:j,data:{hideModal:()=>t(h.Ce())}}))}).catch(()=>g(e=>({...e,result:"error"})))}}),b=e=>c.formErrors[e]?"upgrade_contact_sales_modal--error--YXYtY basic_form--labeledInputGroup--ruFib":void 0,A=e=>{let t=c.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--SI1Xc text--fontPos11--rO47d text--_fontBase--VaHfk",children:t}):null},I=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Lf,{htmlName:t,label:e,value:c[t]||"",onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},disabled:a,className:b(t)}),A(t)]}),w=(e,t,a)=>{let r=b(t)||v.Os;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--B96hS address_form--selectRowFull--3AQH0",children:[(0,s.jsx)(x.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(p.B,{className:v.nO,svg:S.A})]})}),A(t)]})};return(0,s.jsx)(d.fu,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(f.ey,{className:"upgrade_contact_sales_modal--contactSalesModal--MghVQ",hide:T,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--qnj40",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--kKN1X text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,l.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(u.Jn,{className:E,onClick:T,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--nj7s9",children:["error"===c.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.I,{message:(0,l.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(x.Kz,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[I((0,l.t)("universal_upgrade.email_address"),"email"),I((0,l.t)("universal_upgrade.full_name"),"name"),I((0,l.t)("universal_upgrade.company_name"),"companyName"),w((0,l.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,l.t)("contact_sales.which_topic_best_fits_your_needs")}),[{name:(0,l.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,l.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,l.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,l.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}].map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]})),w((0,l.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,l.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),[{name:(0,l.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,l.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,l.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,l.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,l.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,l.t)("contact_sales.plan.not_sure"),value:"not_sure"}].map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]})),I((0,l.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(x.Kz,{multiple:1}),(0,s.jsx)("p",{children:(0,l.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(x.Kz,{multiple:1}),(0,s.jsx)(y.v,{className:"upgrade_contact_sales_modal--freeTextInput--0GSAI text--fontPos13--5OfL8 text--_fontBase--VaHfk",value:c.freeText,onChange:e=>g(t=>({...t,freeText:e.target.value})),placeholder:c.overridePlaceholderText??(0,l.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--xrO7u",children:[(0,s.jsx)(x.tM,{onClick:T,children:(0,l.tx)("general.cancel")}),(0,s.jsx)(x.vd,{onClick:N,children:(0,l.tx)("universal_upgrade.submit")})]})]})})}},98924(e,t,a){a.d(t,{OrgSelfServeBillingRemodelPage:()=>eL});var s=a(239976),r=a(105652),i=a(645186),n=a(523924),l=a(706354),d=a(393106),o=a(850159),c=a(843489),m=a(181645),u=a(214030),_=a(865804),x=a(655673),p=a(59762),h=a(436174),g=a(493094),y=a(462198),f=a(116682),v=a(684325),E=a(781924),S=a(824234),T=a(289886),j=a(863825),N=a(517436),b=a(660983),A=a(630820),I=a(133580),w=a(218576),C=a(12524),k=a(424044),R=a(340775),P=a(658403),D=a(102644),O=a(420018),M=a(224542),U=a.n(M),B=a(921424),L=a(90550),V=a(18526);let z="org_self_serve_figjam--summaryDivider--tXje-";var G=a(809059);function F(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function $(e){let t=new V.vr(e.currency);return(0,s.jsx)("div",{className:"org_self_serve_figjam--confirmationPage--fJCKG",children:(0,s.jsxs)("div",{className:U()("org_self_serve_figjam--stepContent--BF4vK","org_self_serve_figjam--stepContentTeamCreation--VItZn"),children:[(0,s.jsxs)("div",{className:"org_self_serve_figjam--confirmationHeading--BE4xm",children:[(0,s.jsx)(S.B,{svg:G.A,className:"org_self_serve_figjam--greenCheck--CxeNx",useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:"org_self_serve_figjam--pageTitle--7oR7h",children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:"org_self_serve_figjam--confirmationBox--uwR1i org_self_serve_figjam--stepRect--C3LZ- org_self_serve_figjam--boxBorder--QfBpe",children:[(0,s.jsx)("div",{className:"org_self_serve_figjam--confirmationPageText--eW0nA text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(F,{height:24}),(0,s.jsx)("div",{className:z}),(0,s.jsx)(F,{height:24}),(0,s.jsxs)("div",{className:"org_self_serve_figjam--flexBox--YMye9",children:[(0,s.jsxs)("div",{className:"org_self_serve_figjam--confirmationCharge--JfhWg org_self_serve_figjam--confirmationPageText--eW0nA text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:"org_self_serve_figjam--confirmationAmountDue--xyJ97",children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(F,{height:24}),(0,s.jsx)("div",{className:z}),(0,s.jsx)(F,{height:32}),(0,s.jsxs)("div",{className:"org_self_serve_figjam--confirmationRow--7IviV",children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.kt,{}),(0,s.jsx)("div",{className:"org_self_serve_figjam--confirmationLoadingText---ZviI org_self_serve_figjam--msaLabelText--W7meK",children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(B.$$,{disabled:!e.orgMigrated,className:"org_self_serve_figjam--confirmationHomeButton--J0Kva text--fontNeg13--NfHlH text--_fontBase--VaHfk text--_negText--7Cnf0",onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}var q=a(712231),H=a(735292),Y=a(597201),W=a(366434),K=a(710383);let J=(0,_.tf)(function(e){return(0,s.jsx)("div",{className:"org_self_serve_figjam--cancelMenuItem--sFWm5",onClick:e.onClick,children:(0,o.tx)("org_self_serve.headers.cancel")})});function X(e){if(e.currentStep===Y.BK.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:Y.BK.ChoosePlan,name:(0,o.t)("org_self_serve.headers.choose_plan")},r={step:Y.BK.CreateTeam,name:(0,o.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case K.SC.CREATE:t.push({step:Y.BK.PseudoCreateTeam,name:(0,o.t)("org_self_serve.headers.create_team")}),t.push({step:Y.BK.AddCollaborators,name:(0,o.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case K.SC.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=Y.BK.CreateTeam;break;case K.SC.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:Y.BK.TeamSelect,name:(0,o.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:Y.BK.SeatSelect,name:(0,o.t)("checkout.choose_seats")}),a=a??Y.BK.TeamSelect),e.isCampfireCart?a=a??Y.BK.Payment:(t.push({step:Y.BK.Details,name:(0,o.t)("org_self_serve.headers.organization_details")}),a=a??Y.BK.Details),t.push({step:Y.BK.Payment,name:(0,o.t)("org_self_serve.headers.payment")}),t.push({step:Y.BK.Review,name:(0,o.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=Y.BK.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:"org_self_serve_figjam--menuContainer--4HJ6l",children:[(0,s.jsx)(J,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:"org_self_serve_figjam--flex--m8vtt","data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(q.On,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{m.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:H.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case Y.BK.ChoosePlan:return W.Vv.PLAN_COMPARISON;case Y.BK.AddCollaborators:return W.Vv.ADD_COLLABORATORS;case Y.BK.PseudoCreateTeam:return W.Vv.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var Q=a(104922),Z=a(443776),ee=a(682546),et=a(160252),ea=a(694471),es=a(985373),er=a(612883),ei=a(317507),en=a(572543),el=a(38900),ed=a(473397),eo=a(580618),ec=a(415591),em=a(795210),eu=a(1437),e_=a(710674),ex=a(494423),ep=a(496172),eh=a(487817),eg=a(399328),ey=a(514713),ef=a(173680),ev=a(856201),eE=a(53791),eS=a(113641),eT=a(739673),ej=a(388421),eN=a(761853),eb=a(156142),eA=a(804902),eI=a(412427),ew=a(441740);function eC({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r,isCartFullSend:i}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:"org_self_serve_figjam--teamsContainer--wFESd",children:[r&&(0,s.jsx)(ek,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(ek,{team:e,isSelected:t.has(e.id),onToggle:a,isCartFullSend:i},e.id))]})})}function ek({team:e,isSelected:t,onToggle:a,isCartFullSend:r}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(eb.F,{className:ew.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:"org_self_serve_figjam--teamCheckboxContainer--2ba9z",style:b.sx.if(t,b.sx.colorBorderSelected.colorBgSelectedTertiary,b.sx.if(r,b.sx.colorBg.colorBorder,b.sx.colorBg.add({borderColor:"var(--color-bg)"}))).$,children:[(0,s.jsx)(eI.nl,{team:e}),(0,s.jsxs)("span",{className:T.s.maxWFull.$,children:[(0,s.jsx)("span",{className:T.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:T.s.block.font11.colorTextSecondary.ellipsis.$,children:(0,o.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:"org_self_serve_figjam--selectTeamsIcon--bAjxo",children:(0,s.jsx)(eA.g,{})})]})]},e.id)}function eR({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)(Q.x,{title:(0,o.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:T.s.font13.$,children:[(0,s.jsx)(B.Lf,{htmlName:"legal_org_name",label:(0,o.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(B.Lf,{htmlName:"org_name",label:(0,o.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,o.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}var eP=a(897968),eD=a(928809),eO=a(370253);function eM({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:i,onChangeSeat:n,onChangeAdditionalSeats:l,currency:d}){let o=(0,eP.G)({currency:d,tier:H.Ju.ORG,renewalTerm:H.IX.YEAR,showCents:!1}),[c]=(0,g.Ad)(o);if(null===c.data)throw Error("No seat types data");let m=c.data,{changeUserSeatType:u,selectSeatsState:_,setAdditionalSeats:x}=(({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let n=(0,eD.wh)(e,t,a),[l,d]=(0,r.useState)(n),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,eD.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:l}})({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:i,onChangeSeat:n,onChangeAdditionalSeats:l});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(eO.T,{users:e,seatTypes:m,changeUserSeatType:u,selectSeatsState:_,setAdditionalSeats:x,tier:H.Ju.ORG})})}var eU=a(15171);class eB extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>{if(this.props.step===Y.BK.Initial||this.props.step===Y.BK.ChoosePlan)if(this.props.newTeamProps?.teamFlowType===K.SC.CREATE_AND_UPGRADE)return Y.BK.CreateTeam;else if(this.canSeeTeamAndSeatSelectionSteps())return Y.BK.TeamSelect;else return Y.BK.Payment;return this.props.step},this.setStep=e=>{this.props.dispatch(es.sf({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,entryPoint:this.props.entryPoint})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{m.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:ec.wn.ORG_UPGRADE,paymentMethodType:eE.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case Y.BK.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(Y.BK.TeamSelect);break;case Y.BK.AddCollaborators:this.setStep(Y.BK.Payment);break;case Y.BK.PseudoCreateTeam:this.setStep(Y.BK.TeamSelect);break;case Y.BK.TeamSelect:let t=(0,R.h)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(Y.BK.SeatSelect);break;case Y.BK.SeatSelect:this.setStep(Y.BK.Payment);break;case Y.BK.Payment:this.onSubmitPaymentAndAddress();break;case Y.BK.Review:this.onSubmitPurchaseOrder();break;case Y.BK.Confirmation:break;default:(0,n.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case Y.BK.CreateTeam:case Y.BK.PseudoCreateTeam:case Y.BK.AddCollaborators:return(0,o.t)("org_self_serve.create_team_step.next_select_team");case Y.BK.TeamSelect:return(0,o.t)("checkout.org_self_serve.next_select_seats");case Y.BK.SeatSelect:return(0,o.t)("org_self_serve.payment_step.next_payment");case Y.BK.Payment:return(0,o.t)("org_self_serve.review_step.next_review");case Y.BK.Review:case Y.BK.Confirmation:return"";default:(0,n.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case Y.BK.CreateTeam:case Y.BK.PseudoCreateTeam:return!this.state.newTeamName;case Y.BK.TeamSelect:return this.state.loading;case Y.BK.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case Y.BK.Review:case Y.BK.Confirmation:case Y.BK.AddCollaborators:case Y.BK.SeatSelect:return!1;default:(0,n.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);m.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,el.to)({type:P.lk,data:{source:D.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,e_.Al)(this.props.user.id),h.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===Y.BK.TeamSelect?null:(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)(ee.z,{billingInterval:W.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===Y.BK.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:"org_self_serve_figjam--svgText--rpnqz org_self_serve_figjam--flex--m8vtt",children:[(0,s.jsx)(S.B,{svg:eU.A,className:"org_self_serve_figjam--helpIcon--EIlPd"}),(0,s.jsx)("p",{children:(0,o.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:"org_self_serve_figjam--textLink--XawSw org_self_serve_figjam--billingSubText--gxmEb",onClick:this.contactSales,children:(0,o.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(er.MN({currency:e})),this.setState({currency:e})},tier:H.Ju.ORG,title:(0,o.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,k.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,k.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,k.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,W.EB)((0,V.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,W.EB)((0,V.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eT.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(es.sf({view:"recentsAndSharing"})),this.props.dispatch(j.s.error(t||(0,o.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,k.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:H.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=(0,A.W)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,p.zN)(e.user.email)!==(0,p.zN)(this.props.user.email)&&h.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||em.N_.dict(e=>0);return(0,I.Vh)(e,(0,C.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||em.N_.dict(e=>0);return(0,I.kV)(e,(0,C.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||em.N_.dict(e=>0);return(0,I.N9)(e,(0,C.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,C.GL)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,o.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,ej.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,o.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,ej.V)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,ef.Ey)(t,r).then(t=>{if(!t.error&&t.token)return(0,ef.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?f.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,W.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):f.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(Y.BK.Review))});{let e=t.error?.message||(0,o.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(ei.b({completed_org_cart_flow:!0}));let e=(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,C.vm)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,C.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),f.Ay.post("/api/orgs",s).catch(s=>(this.props.dispatch(j.s.error((0,d.J)(s,s.data?.message||(0,o.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,y.$D)(l.FigmaTeam.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(Y.BK.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,ey.rq)({emails:this.state.inviteEmails,resourceType:eh.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:ev.e6.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,e_.Al)(this.props.user.id),(0,m.sx)("Self Serve Org Purchased (GTM)"),(0,en.u)("Self Serve Org Purchased",this.props.user,{org_name:s.org_name,upsellSource:(0,ex.dh)(this.props.entryPoint)})})}render(){let e,t=this.effectiveStep(),a=(0,C.Ds)(Object.values(this.state.eligibleTeamsByTeamId)),r=e=>{this.props.dispatch(es.sf({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||K.SC.CREATE_AND_UPGRADE}))};if(t===Y.BK.Review){let t=(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(Z.j,{billingAddress:this.state.payment.address,billingInterval:W.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(Y.BK.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,k.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,k.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,k.gS)((0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,p.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:H.Ju.ORG,title:(0,o.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===Y.BK.Confirmation?(0,s.jsx)($,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(O.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,p.qe)(this.props.user.email)&&(0,s.jsx)(O.VE,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:b.sx.if(t===Y.BK.CreateTeam,b.sx.flex.justifyCenter,b.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===Y.BK.CreateTeam&&(0,s.jsx)("div",{className:"org_self_serve_figjam--createTeamContainer--IhwVG",children:(0,s.jsx)(et.y,{type:et.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===Y.BK.TeamSelect&&(this.state.loading?(0,s.jsx)(ea.f,{}):(0,s.jsx)(eC,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===Y.BK.SeatSelect&&(this.state.loading?(0,s.jsx)(ea.f,{}):(0,s.jsx)(eM,{users:(0,w.s)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===Y.BK.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(eR,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:T.s.pt24.$,children:(0,s.jsxs)(Q.x,{title:(0,o.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:T.s.mb20.$,children:(0,s.jsx)(E._,{color:E.S.ERROR,text:this.state.paymentError})}),(0,s.jsx)(eN.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==Y.BK.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(_.fu,{name:eS.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:(0,ex.dh)(this.props.entryPoint),entryPoint:this.props.entryPoint,eligibleTeamIds:(0,k.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,k.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,x.E)(l.FigmaTeam.UPGRADES),children:[t!==Y.BK.Confirmation&&(0,s.jsx)("div",{className:T.s.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)(X,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:r,isCampfireCart:!0})}),(0,s.jsxs)("div",{className:T.s.selectNone.$,style:b.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(eV,{step:t}),e]})]})}}function eL(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),r=(0,i.d4)(e=>(0,eg.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===eh._D.ADMIN)),n=(0,ed.Mh)(),d=(0,i.d4)(e=>e.payment).currency||(0,V.LN)();(0,c.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,eo.jv)({billableProductKeys:em.N_,baseQuery:{currency:d,tier:H.Ju.ORG,renewalTerm:H.IX.YEAR,unit:H.IX.YEAR}}),[m]=(0,g.Ad)(o);if("loaded"!==m.status)return(0,s.jsx)(eu.K,{});let u=m.data;return(0,s.jsx)(v.tH,{team:l.FigmaTeam.UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:v.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ep.y4,children:(0,s.jsx)(eB,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:n,productPriceBySeatType:u,currency:d})})}function eV({step:e}){let t=function(e){switch(e){case Y.BK.TeamSelect:return(0,o.t)("checkout.org_self_serve.select_teams_title");case Y.BK.SeatSelect:return(0,o.t)("checkout.org_self_serve.select_seats_header");case Y.BK.Payment:return(0,o.t)("checkout.enter_your_payment_details");case Y.BK.Review:return(0,o.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(N.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:u.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,o.tx)("checkout.learn_more_about_seats")});switch(e){case Y.BK.TeamSelect:return(0,o.t)("checkout.org_self_serve.select_teams_subtitle");case Y.BK.SeatSelect:return(0,o.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case Y.BK.Review:return(0,o.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:T.s.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:T.s.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:T.s.colorTextSecondary.font13.mt8.$,children:a})]}):null}eB.displayName="OrgSelfServePage"},420018(e,t,a){a.d(t,{wW:()=>F,VE:()=>G});var s=a(239976),r=a(105652),i=a(645186),n=a(850159),l=a(195784),d=a(865804),o=a(330650),c=a(120657),m=a(523340),u=a(705828),_=a(921424),x=a(86057),p=a(824234),h=a(289886),g=a(660983),y=a(397383),f=a(512670),v=a(687497),E=a(471789),S=a(803978),T=a(38900),j=a(936652),N=a(63504),b=a(795210),A=a(12358),I=a(18526),w=a(899589),C=a(328151),k=a(694151),R=a(560177),P=a(392255),D=a(754305);let O=(0,a(713802).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,R.$L)(e,R.us);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--BLx6y",children:[(0,s.jsx)("div",{style:g.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),M="org_self_serve_modals--modalContainer--x4RbC",U="org_self_serve_modals--modalWrapperSmall--8D0vj org_self_serve_modals--modalWrapper--XwFkR",B="org_self_serve_modals--modalHeader--hV2R2",L="org_self_serve_modals--modalText--lbo63";var V=a(20136);function z(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function G(e){return(0,s.jsx)(P.OJ,{containerClassName:M,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:U,children:[(0,s.jsx)("div",{className:B,children:(0,n.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:L,children:(0,n.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,n.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function F(e){return(0,s.jsx)(P.OJ,{containerClassName:M,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:U,children:[(0,s.jsx)("div",{className:B,children:(0,n.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:L,children:(0,n.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,n.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(z,{height:4}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,n.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}function $({userData:e,checkboxHandler:t}){let[a,l]=(0,r.useState)(0),d=(0,i.wA)();return(0,s.jsx)(s.Fragment,{children:e.map((r,i)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(q,{rowType:"data",children:[(0,s.jsx)(k.az,{entity:r.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(W,{userInfo:r}),(0,s.jsx)(f.S,{checked:r.designEditor,onChange:e=>{t({userId:r.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(_.tB,{checked:r.devMode,className:"org_self_serve_modals--devModeCheckbox--hBMBy",onChange:e=>{(({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){l(e=>e+1);let t=s?(0,n.t)("checkout.switch_seat_from_design_to_devmode"):(0,n.t)("checkout.enabled_devmode");d(S.eB({target:{kind:w.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:w.Zj.RIGHT,hideAfterDelay:1e3}))}})({designChecked:r.designEditor,userId:r.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(_.tB,{checked:r.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--lvGbH",onChange:e=>{t({userId:r.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),i!==e.length-1&&(0,s.jsx)(H,{})]},r.user.id))})}function q({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(y.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(y.Y,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function H(){return(0,s.jsx)("div",{className:h.s.wFull.colorBgTertiary.h1.$})}function Y({teamId:e}){return(0,s.jsx)("div",{className:h.s.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,R.$L)(e,R.us)}).$})}function W({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.SPECIAL,"data-tooltip":O,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(v.E,{color:"default",children:(0,n.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(y.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(Y,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:h.s.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(v.E,{color:"default",children:e.teams[0]?.name})})]})}(0,j.Ju)(function(e){let t=e.isProTeam?b.Oq.exclude([N.ud.DEV_MODE]):b.Oq,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[l,d]=(0,r.useState)(null),m=new I.vr(e.currency),u=a[N.ud.FIGJAM],_={[N.ud.DESIGN]:{headerString:(0,n.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.ud.DESIGN],shouldShowDevModeIncludedText:!0},[N.ud.FIGJAM]:{headerString:(0,n.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:u,shouldShowDevModeIncludedText:!1},[N.ud.DEV_MODE]:{headerString:(0,n.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.ud.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(P.Dd,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(d(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?d("total"):(e.dispatch(T.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,n.t)("all_carts.save"),cancelText:(0,n.t)("all_carts.cancel"),title:(0,n.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--xIFzD",children:l&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--IpSSs",children:[(0,s.jsx)(p.B,{className:"org_self_serve_modals--errorSvg--wasX5",svg:V.A}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--yi7CJ org_self_serve_modals--headerModalText--JGrjM",children:[l===N.ud.DESIGN&&(0,n.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.DESIGN].minSeats}),l===N.ud.FIGJAM&&(0,n.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.FIGJAM].minSeats}),l===N.ud.DEV_MODE&&(0,n.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.ud.DEV_MODE]?.minSeats||0}),"total"===l&&!!e.minTotalSeats&&(0,n.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats,seatsText:(0,n.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,n.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats})})]})]})}),t.sort(A.AG).map(t=>{let r=_[t],n=e.seatDataByLicenseType[t],l=a[t];return void 0===r||void 0===n||void 0===l?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--vHLs9 org_self_serve_modals--headerModalText--JGrjM",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{height:4}),(0,s.jsx)(o.G,{})]}),(0,s.jsx)(z,{height:12}),(0,s.jsx)(c.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,A.Zx)(t),incrementSeats:()=>{let e;void 0!==(e=a[t])&&e<99&&i({...a,[t]:e+1})},decrementSeats:()=>{let s,r;return s=e.seatDataByLicenseType[t],r=a[t],void(null==s||null==r||r>s.minSeats&&i({...a,[t]:r-1}))},numSeats:l,minSeatsCount:n.minSeats,headerText:m.formatMoney(r.totalSeatCount*n.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,E.mx)(e.showAnnualPrice,r.totalSeatCount,!0,n.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>((e,t)=>{if(""===e.target.value)return void t(0);let a=parseInt(e.target.value);isNaN(a)||t(a)})(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(z,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--sSB3Q"})]})},"AdditionalEditorsModal"),(0,j.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:o,dispatch:p,seatInfo:h,monthlyPriceByProduct:g}){let[f,E]=(0,r.useState)(e),[S,j]=(0,r.useState)({design:h.design.additionalSeatCount,figjam:h.figjam.additionalSeatCount,dev_mode:h.dev_mode.additionalSeatCount}),b=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(f))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=S.design,a+=S.dev_mode,t+=S.figjam,o&&e+t+a<o)?3:e<h.design.minCount||e>99?1:2*(!!(t<h.figjam.minCount)||!!(t>99))},[S,f,o,h]),A=e=>{S[e]>=99||j(t=>({...t,[e]:t[e]+1}))},w=e=>{S[e]<=0||j(t=>({...t,[e]:t[e]-1}))},C=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||j(e=>({...e,[t]:a}))},k=new I.vr(i),R=()=>{p(T.Ce())};return(0,s.jsx)(d.fu,{name:"Select Editors Modal",children:(0,s.jsxs)(D.ey,{size:864,maxHeight:672,hide:()=>p(T.Ce()),className:"org_self_serve_modals--selectEditorsModal--MP4Ud",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--tIDgs org_self_serve_modals--headerModalText--JGrjM",children:[(0,n.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(u.s_,{customStyle:{position:"initial"},dispatch:p,onClose:R})]}),(0,s.jsx)(H,{}),(0,s.jsxs)(q,{rowType:"header",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(y.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.E,{color:"handoff",fontWeight:"medium",children:(0,n.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("general.dev_mode")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("general.figjam")})]}),(0,s.jsx)(H,{}),(0,s.jsx)(x.P,{maxHeight:426,children:(0,s.jsx)($,{userData:Object.values(f),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...f[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),E(t=>({...t,[e]:s})),(0,l.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(H,{}),(0,s.jsxs)(q,{rowType:"footer",children:[(0,s.jsxs)(y.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,n.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,n.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(c.s,{billableProductKey:N.ud.DESIGN,incrementSeats:()=>A(N.ud.DESIGN),decrementSeats:()=>w(N.ud.DESIGN),numSeats:S.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>C(e,N.ud.DESIGN)}),(0,s.jsx)(c.s,{billableProductKey:N.ud.DEV_MODE,incrementSeats:()=>A(N.ud.DEV_MODE),decrementSeats:()=>w(N.ud.DEV_MODE),numSeats:S.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>C(e,N.ud.DEV_MODE)}),(0,s.jsx)(c.s,{billableProductKey:N.ud.FIGJAM,incrementSeats:()=>A(N.ud.FIGJAM),decrementSeats:()=>w(N.ud.FIGJAM),numSeats:S.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>C(e,N.ud.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--1rbWd org_self_serve_modals--selectEditorModalFooter--3L3K-",children:[0!==b?(()=>{switch(b){case 0:default:return;case 1:return(0,s.jsx)(v.E,{color:"danger",children:(0,n.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:h.design.minCount})});case 2:return(0,s.jsx)(v.E,{color:"danger",children:(0,n.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:h.figjam.minCount})});case 3:return(0,s.jsx)(v.E,{color:"danger",children:(0,n.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:o})})}})():(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,n.tx)("all_carts.new_total",{total:k.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;return s*a[N.ud.DESIGN]*12+r*a[N.ud.FIGJAM]*12+i*a[N.ud.DEV_MODE]*12}(f,S,g),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--c-4g1",children:[(0,s.jsx)(m.nR,{onClick:R,children:(0,n.t)("general.cancel")}),(0,s.jsx)(_.$$,{onClick:()=>{0===b&&(a(S),t(f),p(T.Ce()))},disabled:0!==b,children:(0,n.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal")},274573(e,t,a){a.d(t,{PromoReviewPage:()=>y});var s=a(239976),r=a(105652),i=a(645186),n=a(850159),l=a(865804),d=a(227031),o=a(374950),c=a(530705),m=a(585255),u=a(213009),_=a(985373),x=a(612883),p=a(475712),h=a(18526),g=a(190797);function y(e){return(0,s.jsx)(d.u9,{label:"PromoReviewPage",children:(0,s.jsx)(f,{...e})})}function f(e){let{selectedView:t,promo:a}=e,d=(0,i.wA)(),y=(0,g.Ud)({teamId:t.teamId}),f=(0,r.useCallback)(()=>{(0,o._H)(),d(x.Ay({promo:null})),d(_.sf(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},[d,e.selectedView.previousView,t.teamId]);(0,r.useEffect)(()=>{a||f()},[a,f]);let v=()=>{d(p.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:f,onError:f}))};return a?(0,s.jsx)(l.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--cB2WV",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--y-mM1",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--LFCtU text--fontPos11--rO47d text--_fontBase--VaHfk",onClick:f,children:(0,n.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--pXR7K text--fontPos20--WslT3 text--_fontBase--VaHfk",children:(0,n.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--WZiCG text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,n.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(m.x,{isLoading:y,children:()=>(0,s.jsx)(c.o,{children:(0,s.jsx)(u.d,{selectedView:t,onClickConfirm:v,currency:(0,h.LN)(),canSeeBillingAddressExp:!1})})})})]})}):null}},836861(e,t,a){a.d(t,{m:()=>N});var s=a(239976),r=a(105652),i=a(645186),n=a(745463),l=a(706354),d=a(395227),o=a(71239),c=a(297151),m=a(732632),u=a(106619),_=a(850159),x=a(181645),p=a(655673),h=a(120657),g=a(289886),y=a(113116),f=a(397383),v=a(38900),E=a(936652),S=a(12358),T=a(928809);let j=(0,E.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:l,onClose:u}=e,p=d.hS({open:l,onClose:u}),[y,v]=(0,r.useState)(a),E=e=>t=>{v((0,T.$$)(y,t,e))},j=E(1),N=E(-1),b=r.useCallback(e=>t=>v((0,T.$$)(y,e,t-(y[e]||0))),[y]);return(0,s.jsx)(o.bL,{manager:p,width:264,"data-testid":"additional-seats--modal",children:(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.Y9,{children:(0,s.jsx)(c.hE,{children:(0,_.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(c.nB,{children:[(0,s.jsx)("div",{className:g.s.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,_.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(f.Y,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(y).sort(S.AG).map(e=>(0,n.uy)(t[e])||(0,n.uy)(y[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(h.s,{billableProductKey:e,numSeats:y[e],minSeatsCount:0,headerText:(0,_.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,_.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>j(e),decrementSeats:()=>N(e),updateAdditionalSeatsText:(0,h.K)(b(e))})},e))})]}),(0,s.jsx)(c.wi,{children:(0,s.jsxs)(c.jk,{children:[(0,s.jsx)(m.$n,{variant:"secondary",onClick:u,"data-testid":"additional-seats--cancel",children:(0,_.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(m.$n,{variant:"primary",onClick:()=>{x.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(y),tier:e.tier}),i(y),u()},"data-testid":"additional-seats--confirm",children:(0,_.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function N({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let n=(0,i.wA)(),d=(0,p.L)(l.FigmaTeam.UPGRADES);return(0,s.jsx)(y.$z,{variant:"ghost","aria-label":(0,_.t)("checkout.additional_seats.add_seats_to_assign_later"),"data-testid":"additional-seats--button",trackingOptions:d,onClick:()=>{n((0,v.to)({type:j,showModalsBeneath:!0,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(u.P,{}),children:(0,_.tx)("checkout.additional_seats.add_seats_to_assign_later")})}},104922(e,t,a){a.d(t,{x:()=>n});var s=a(239976),r=a(289886),i=a(660983);function n({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.s.mb16.fontMedium.font15.$,children:e}),t]})}},443776(e,t,a){a.d(t,{j:()=>A});var s=a(239976),r=a(660983),i=a(850159),n=a(214030),l=a(921424),d=a(289886),o=a(735292),c=a(366434),m=a(104922);function u(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return(0,s.jsxs)(m.x,{title:(0,i.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(_,{header:e.tier===o.Ju.ORG?(0,i.t)("checkout.cart_plan_details.organization_name"):(0,i.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(_,{header:(0,i.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(_,{header:(0,i.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(_,{header:(0,i.t)("checkout.cart_plan_details.billing_address"),value:x(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(_,{header:(0,i.t)("checkout.cart_plan_details.shipping_address"),value:x(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(l.Ph,{onClick:e.navigateToEditDetails,className:d.s.font13.py12.$,trackingProperties:{trackingDescriptor:n.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,i.tx)("checkout.cart_plan_details.edit_details")})]})}function _({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:d.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:d.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:d.s.font13.lh24.colorText.breakWord.$,children:t})]})}function x(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var p=a(105652),h=a(523924),g=a(60177),y=a(555355),f=a(113116),v=a(497544),E=a(471789),S=a(917181);let T=(0,s.jsx)(l.Us,{target:"_blank",trusted:!0,href:"/pricing",children:(0,i.tx)("checkout.monthly_price")});function j({title:e,countByBillableProductKey:t,billingInterval:a,currency:l,taxPercent:u,isRequestPending:_,tier:x,onSubmit:h,onSubmitTrackingProperties:T}){let[j,b]=p.useState(!1),A=_||!j,I=(0,s.jsx)(g.S,{label:(0,s.jsx)(y.J,{children:(0,s.jsx)("span",{className:d.s.font13.$,children:x===o.Ju.ORG?(0,s.jsx)(E.WA,{}):(0,s.jsx)(E.Um,{isAnnual:a===c.NW.YEAR})})}),checked:j,onChange:b}),w=(0,s.jsx)("div",{className:d.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(v.k,{})});return(0,s.jsxs)(m.x,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:d.s.mt16.$,children:(0,s.jsx)(S.O,{countByBillableProductKey:t,billingInterval:a,currency:l,taxPercent:u??0,isCartReviewSummary:!0,tier:x})}),(0,s.jsx)(N,{tier:x,isAnnual:a===c.NW.YEAR}),(0,s.jsx)("div",{className:d.s.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:I}),(0,s.jsx)(f.$z,{onClick:h,disabled:A,"data-testid":"cart-review-submit-button",trackingProperties:{trackingDescriptor:n.c.COMPLETE_PURCHASE,...T},size:"lg",width:"fill",children:_?w:(0,i.tx)("checkout.complete_purchase")})]})}function N({tier:e,isAnnual:t}){let a=e===o.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:d.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:d.s.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:d.s.textBodyMediumStrong.$,children:(0,i.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.Ju.ORG:return(0,i.tx)("checkout.cart_review_upgrade_info_org");case o.Ju.PRO:return t?(0,i.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:T}):(0,i.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,h.wc)(e)}}(e,t)}),(0,s.jsx)(l.Ph,{className:d.s.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,i.tx)("checkout.learn_more")})]})})}var b=a(694471);function A(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(u,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(b.f,{}):(0,s.jsx)(j,{...e})]})}},928809(e,t,a){a.d(t,{$$:()=>p,Ed:()=>h,MZ:()=>c,WQ:()=>d,f8:()=>l,md:()=>o,n5:()=>x,wh:()=>m});var s=a(701328),r=a.n(s),i=a(63504),n=a(795210);let l=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.dA)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function u(e){return{type:"error",message:e}}function _(e){return{type:"success",value:e}}function x(e,t){var a,s,r,i,n;switch(t.type){case"changeSeatType":return a=e,s=t.userId,r=t.seatType,s in a.selectedUserSeatTypes?_({...a,selectedUserSeatTypes:{...a.selectedUserSeatTypes,[s]:r}}):u(`Tried to change seat for not-present user ${s}`);case"setAdditionalSeats":return i=e,Object.values(n=t.additionalSeatCounts).some(e=>e<0)?u("Blocked attempt to set negative additional seats"):_({...i,additionalSeatCounts:n})}}function p(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function h(e){let t=new Set(n.N_.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},682546(e,t,a){a.d(t,{z:()=>S});var s=a(239976),r=a(105652);if(1464==a.j)var i=a(690607);if(1464==a.j)var n=a(609024);if(1464==a.j)var l=a(555355);var d=a(850159);if(1464==a.j)var o=a(214030);var c=a(781924),m=a(289886),u=a(113116),_=a(497544),x=a(660983),p=a(120706),h=a(2259),g=a(636773),y=a(18526),f=a(366434),v=a(104922),E=a(917181);function S({title:e,countByBillableProductKey:t,tier:a,billingInterval:c,currency:S,buttonText:j,isButtonDisabled:N,isLoading:b,onClickNext:A,onSwitchCurrency:I,onSwitchBillingInterval:w,footer:C,canEnforcePaidSeatMinimum:k,trackingProperties:R}){let P=!!t,D=(0,y._Z)(),O=(0,g.Um)(),[M,U]=function(e,t,a,s){let[i,n]=r.useState(!1),l=r.useCallback((e,t)=>!!(s&&e&&!(0,p.A)(e,t)),[s]);r.useEffect(()=>{i&&!l(t,a)&&n(!1)},[t,a,s,i,l]);let d=r.useCallback(s=>{if(!i){if(l(t,a))return void n(!0);e(s)}},[t,a,i,l,e]);return[i,d]}(A,t,a,k),B=(0,s.jsx)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(_.k,{})});return(0,s.jsxs)(v.x,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.s.mt16.$,children:P?(0,s.jsxs)(s.Fragment,{children:[D&&(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,d.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(h.D,{currency:S,dropdownShown:O,supportedCurrencies:(0,y.B9)(),changeCurrency:e=>{I(e)},shortFormDisplay:!0,paddingOverride:0})]}),w&&P&&(0,s.jsx)("div",{className:m.s.my16.$,style:x.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(i.b,{legend:(0,s.jsx)(n.q,{children:(0,d.tx)("checkout.sidebar.switch_your_billing_interval")}),value:c,onChange:e=>w(e),children:[(0,s.jsx)(i.c,{value:f.NW.YEAR,label:(0,s.jsxs)(l.J,{className:m.s.flex.itemsCenter.gap16.$,children:[(0,d.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:x.sx.add({fontSize:"10px"}).$,children:(0,d.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(i.c,{value:f.NW.MONTH,label:(0,s.jsx)(l.J,{children:(0,d.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsx)("div",{className:m.s.pt16.$,children:(0,s.jsx)(E.O,{countByBillableProductKey:t,billingInterval:c,currency:S,isCartReviewSummary:!1,tier:a})})]}):(0,s.jsx)("p",{className:m.s.colorTextSecondary.$,children:(0,d.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:x.sx.add({marginTop:"80px"}).$,children:[M&&(0,s.jsx)(T,{}),(0,s.jsx)(u.$z,{onClick:U,disabled:N||b,"data-testid":"cart-sidebar-button",trackingProperties:{trackingDescriptor:o.c.CART_SIDEBAR,...R},size:"lg",width:"fill",children:b?B:j}),C&&(0,s.jsx)("div",{className:m.s.mt16.$,"data-testid":"cart-sidebar-footer",children:C})]})]})}function T(){return(0,s.jsx)("div",{className:m.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c._,{color:c.S.WARNING,text:(0,s.jsx)("p",{style:x.sx.lh14.add({fontSize:"9px"}).$,children:(0,d.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},213009(e,t,a){a.d(t,{d:()=>C});var s=a(239976),r=a(105652),i=a(645186),n=a(60177),l=a(555355),d=a(850159),o=a(436174),c=a(921424),m=a(90550),u=a(471789),_=a(732632),x=a(865804),p=a(289886),h=a(985373),g=a(38900),y=a(222677),f=a(366434);function v(e){return"org"===e.variant?(0,s.jsx)(S,{...e}):(0,s.jsx)(T,{...e})}let E=(0,x.tf)(_.$n);function S(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,f.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{subtitle:(0,d.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(N,{header:(0,d.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(N,{header:(0,d.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(N,{header:(0,d.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(N,{header:(0,d.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(N,{header:(0,d.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(c.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,d.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(N,{header:(0,d.tx)("org_self_serve.review_step.billing_address"),value:b(e.billingAddress)}),a&&(0,s.jsx)(N,{header:(0,d.tx)("org_self_serve.review_step.shipping_address"),value:b(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(c.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,d.tx)("org_self_serve.review_step.edit_payment")})]})}function T(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,n=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,f.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{subtitle:(0,d.tx)("pro_cart.review.details")}),(0,s.jsx)(N,{header:(0,d.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(N,{header:(0,d.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(N,{header:(0,d.tx)("pro_cart.review.billing_address"),value:b(e.billingAddress)}),n&&(0,s.jsx)(N,{header:(0,d.tx)("pro_cart.review.shipping_address"),value:b(e.shippingAddress)}),(0,s.jsx)(E,{variant:"link",onClick:e.canSeeBillingAddressExp?()=>{t(h.sf({...a,paymentStep:f.Vv.PAYMENT_AND_ADDRESS}))}:()=>{t((0,g.to)({type:y.L,data:{modalTitle:(0,d.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",children:(0,d.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function j({subtitle:e}){return(0,s.jsx)("h2",{className:p.s.font15.fontMedium.lh24.colorText.$,children:e})}function N({header:e,value:t}){return(0,s.jsxs)("dl",{className:p.s.flex.flexColumn.mt16.$,children:[(0,s.jsx)("dt",{className:p.s.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("dd",{className:p.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function b(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var A=a(458637),I=a(18526),w=a(24520);function C(e){let[t,a]=r.useState(!1),_=new I.vr(e.currency),[x,p]=r.useState(!1),h=(0,i.d4)(e=>e.payment),g=(0,i.d4)(e=>e.payment,(e,t)=>x||e===t),y=(0,i.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",E=h.displayName||y,S=h.legalName||y,T=h.billingPeriod===f.tY.STUDENT,j=!!(0,A.p)(e.selectedView,h);if(!T&&!j)throw Error("This component should only be used for plans that are upgrading for free");let N=h.submitPending||!j&&!t,b=new URLSearchParams(o.Ay.location.search),C=b.get("onCompleteRedirectFileKey"),k=b.get("onCompleteRedirectNodeId"),{trackingDescriptor:R,buttonText:P,finePrint:D}=(0,u.V8)({isPromo:j,isEducationTeam:T,claimsEndAtDate:h.promo?.claims_end_at}),O=async t=>{t.preventDefault(),await p(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:w.HX,children:[(0,s.jsx)("div",{className:w.PT,children:(0,s.jsx)(v,{displayName:E??"",legalName:S??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:w.Bo,children:[(0,s.jsx)("div",{className:w.TV,"data-testid":"review-step-upgrade-title",children:(0,d.tx)(T?"edu.checkout_team_name":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:y})}),(0,s.jsx)("div",{className:w.pV}),(0,s.jsx)(c.Kz,{multiple:2}),g.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Wy,{mainText:(0,d.tx)("pro_cart.info.subtotal"),priceText:_.formatMoney(j?0:g.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(c.Kz,{multiple:1.5}),(0,s.jsx)(u.Wy,{mainText:(0,d.tx)("pro_cart.review.tax"),priceText:_.formatMoney(g.taxes?.tax_total||0,{showCents:!0}),subText:(0,d.tx)("pro_cart.review.tax_percent",{taxPercent:g.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(c.Kz,{multiple:1.5})]}),(0,s.jsx)(u.Wy,{"data-testid":"confirm-total-summary",mainText:T?(0,d.tx)("pro_cart.review.total"):(0,d.tx)("pro_cart.review.total_due_today"),priceText:_.formatMoney(0,{showCents:!0,showFullFormat:(0,I._Z)()}),subText:j?(0,d.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:g.promo.promo_value}):void 0}),(0,s.jsx)(c.Kz,{multiple:2}),(0,s.jsxs)("div",{children:[D,!j&&(0,s.jsx)("div",{className:w.Gn,children:(0,s.jsx)(n.S,{checked:t,onChange:a,label:(0,s.jsx)(l.J,{children:(0,s.jsx)("span",{children:(0,s.jsx)(u.Um,{isAnnual:h.billingPeriod===f.tY.ANNUAL})})})})})]}),(0,s.jsx)(c.Kz,{multiple:2.5}),(0,s.jsx)(c.Kz,{multiple:2.5}),(0,s.jsx)(c.vd,{className:w.fK,onClick:O,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(k&&C),trackingDescriptor:R},disabled:N,dataTestId:"confirm-purchase-button",children:h.submitPending?(0,s.jsx)(m.kt,{className:w.S}):P})]})]})}},160252(e,t,a){a.d(t,{I:()=>u,y:()=>_});var s,r=a(239976),i=a(850159);if(1464==a.j)var n=a(214030);var l=a(921424),d=a(692851),o=a(824234),c=a(24520);if(1464==a.j)var m=a(357289);var u=1464==a.j?((s=u||{}).STARTER="starter",s.PRO="pro",s.ORG="org",s):null;function _({type:e,teamName:t,setTeamName:a,onNext:s,upgradeExistingTeam:u,promo:_}){let x={starter:{title:(0,i.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,i.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,i.tx)("all_carts.create_team.create_team"),trackingDescriptor:n.c.SEND_INVITES},pro:{title:(0,i.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,i.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:_?(0,i.tx)("pro_cart.sidebar.next_review"):(0,i.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:_?n.c.REVIEW:n.c.SET_EDITORS},org:{title:(0,i.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,i.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,i.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,i.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:n.c.SELECT_TEAM}}[e];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:c.Fb,children:x.title}),(0,r.jsx)(l.Kz,{multiple:.5}),(0,r.jsx)("div",{className:c.b0,children:x.subtitle}),(0,r.jsxs)("div",{className:c.F0,children:[(0,r.jsx)(o.B,{svg:m.A,className:c.Pr}),(0,r.jsx)(d.i,{className:c.Zy,onChange:e=>a(e.target.value),value:t,placeholder:x.placeholder})]}),(0,r.jsx)(l.vd,{className:c.eA,onClick:s,trackingProperties:{trackingDescriptor:x.trackingDescriptor},disabled:!t.trim(),children:x.next}),!!u&&(0,r.jsx)(l.Us,{className:c.x,onClick:u,trusted:!0,trackingProperties:{trackingDescriptor:n.c.UPGRADE_EXISTING_TEAM},children:(0,i.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},694471(e,t,a){a.d(t,{f:()=>d});var s=a(239976),r=a(289886),i=a(497544),n=a(660983),l=a(104922);function d(){return(0,s.jsx)(l.x,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:r.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:n.sx.add({height:"208px"}).$,children:(0,s.jsx)(i.k,{})})})}},917181(e,t,a){a.d(t,{O:()=>j});var s=a(239976);if(1464==a.j)var r=a(745463);var i=a(706354),n=a(850159),l=a(865804),d=a(493094),o=a(462198),c=a(289886),m=a(660983),u=a(687497),_=a(133580);if(1464==a.j)var x=a(12524);var p=a(424044),h=a(965974),g=a(580618),y=a(63504),f=a(795210),v=a(12358),E=a(18526),S=a(366434);if(1464==a.j)var T=a(113641);function j({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:o}){let h=(0,g.jv)({billableProductKeys:f.N_,baseQuery:{currency:a,tier:o,renewalTerm:t,unit:t}}),y=(0,g.jv)({billableProductKeys:f.N_,baseQuery:{currency:a,tier:o,renewalTerm:t,unit:S.NW.MONTH}}),[E,j]=(0,d.Ad)(h,y);if(!E.data||!j.data)throw Error("Price data is null");let A=(0,x.s$)(E.data),I=(0,x.s$)(j.data),w=i||0,C=e=>(0,_.up)(e,a,{showCents:r}),k=(0,_.Vh)(e,A),R=(0,_.kV)(e,A,w),P=(0,_.N9)(e,A,w),D=C(k),O=C(R),M=C(P),U=(0,s.jsx)(u.E,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,n.tx)("checkout.review_in_tax_disclaimer")}),B=t===S.NW.YEAR;return(0,s.jsx)(l.fu,{name:T.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:o,billingInterval:t,countBySeatType:(0,p.gS)(e),currency:a,taxPercent:w,subtotal:k,taxTotal:R,total:P},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:m.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(v.AG).map(t=>(0,s.jsx)(N,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:B,isCartReviewSummary:r,paymentPrices:A,lineItemPrices:I},t))}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.if(r,c.s.font13.lh24).$,children:(0,n.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.s.if(r,c.s.font13.lh24).$,children:b({price:D,isCartReviewSummary:r,isAnnual:B})})]}),!r&&(0,s.jsx)(u.E,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,n.tx)("checkout.tax_disclaimer_revised",{checkoutStep:U})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.s.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.s.font13.lh24.$,children:(0,n.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.s.colorTextSecondary.font13.lh24.$,children:(0,n.tx)("pro_cart.review.tax_percent",{taxPercent:w})})]}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:b({price:O,isAnnual:B,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.font13.lh24.$,children:(0,n.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:b({price:M,isAnnual:B,isCartReviewSummary:r})})]})]})]})})}function N({billableProductKey:e,count:t,currency:a,isAnnual:l,isCartReviewSummary:d,paymentPrices:m,lineItemPrices:u}){if(!(0,y.dA)(e))return(0,o.$D)(i.FigmaTeam.UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let _=m[e];if((0,r.uy)(_))return(0,o.$D)(i.FigmaTeam.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let x=u[e];if((0,r.uy)(x))return(0,o.$D)(i.FigmaTeam.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let p=new E.vr(a),g=p.formatMoney(_*t,{showCents:d}),f=c.s.font13.lh24,v=(0,n.t)("checkout.price_per_month",{price:p.formatMoney(x)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(d,c.s.itemsCenter,c.s.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.s.if(d,f).$,children:(0,n.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,h.tI)(e)})}),(0,s.jsx)("p",{className:c.s.colorTextSecondary.if(d,f).$,children:(0,n.tx)(l?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:v,quantity:t})})]}),(0,s.jsx)("p",{className:c.s.if(d,f).$,children:b({price:g,isCartReviewSummary:d,isAnnual:l})})]})}function b({price:e,isAnnual:t,isCartReviewSummary:a}){var s;return a?e:(s=e,t?(0,n.t)("checkout.price_per_year",{price:s}):(0,n.t)("checkout.price_per_month",{price:s}))}},370253(e,t,a){a.d(t,{T:()=>V});var s=a(239976),r=a(105652),i=a(594293),n=a(706354),l=a(555235),d=a(417098),o=a(871471),c=a(850159),m=a(181645),u=a(865804),_=a(655673),x=a(86057),p=a(289886),h=a(160427),g=a(12524),y=a(424044),f=a(473397),v=a(735292),E=a(113641),S=a(836861),T=a(645186),j=a(745463),N=a(859978),b=a(732632),A=a(156829),I=a(819399);a(574988);var w=a(847965),C=a(38900),k=a(508295),R=a(694151),P=a(598838);let D="select_seats_table--sidePadding--tFVJb",O="select_seats_table--userColumn--nowBz",M="select_seats_table--seatColumn--zJqS0",U="select_seats_table--teamColumn--gqz-y",B="select_seats_table--descriptionColumn--o2HN4";function L({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:n}){let l=(0,T.wA)(),d=(0,k.TA)(),o=e.id===d,m=(0,f.Dj)(),u=i===v.Ju.PRO&&m(),_=()=>{l((0,C.to)({type:P.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:n}}))};if((0,j.uy)(t[a]))return null;let x=(0,s.jsxs)(N.E,{...{className:"xh8yej3 x12ulsxz x1xijbu4 x133fa97 x19y5rnk xmkeg23 x1y0btm7 x7z60cl xkezfkh"},"aria-label":(0,c.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:_,children:[(0,s.jsx)("span",{...{className:"x1db2dqx"},children:(0,s.jsx)(w.BC,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(A.O,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:D}),(0,s.jsx)("td",{className:O,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(R.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:M,children:u?x:(0,s.jsx)(b.$n,{variant:"ghost","aria-label":(0,c.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:_,iconPrefix:(0,s.jsx)(w.BC,{type:a,size:"24"}),width:"fill",children:(0,s.jsxs)("span",{className:p.s.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(I.k,{})]})})}),i===v.Ju.ORG&&(0,s.jsx)("td",{className:U,children:e.teams}),(0,s.jsx)("td",{className:B,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:D})]})}function V({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:T,setAdditionalSeats:j,tier:N}){let b=(0,r.useRef)(null),A=(0,_.L)(n.FigmaTeam.UPGRADES),I=(0,h.f)({tableContainerRef:b}),[w,C]=r.useState(a),[k,R]=r.useState(!1),P=r.useMemo(()=>{let t=[...e];return(0,i.v7)(t,e=>e.handle,{isDescending:k}),t},[e,k]),V=(0,g.UL)((0,g.iB)(a.selectedUserSeatTypes)),z=(0,g.UL)(a.additionalSeatCounts),G=(0,f.Dj)(),F=N===v.Ju.PRO&&G();return(0,s.jsx)(u.fu,{name:E.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,y.Tj)(w.selectedUserSeatTypes),countBySeatType:(0,y.gS)((0,g.O$)(w.selectedUserSeatTypes,w.additionalSeatCounts)),selectedTeamIds:(0,y.gu)(w.selectedTeamIds),userIds:(0,y.gu)(e.map(e=>e.id))},trackingOptions:A,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--8j06G",ref:b,"data-testid":"select-seats-table",children:[(0,s.jsx)(x.P,{maxHeight:I,className:"select_seats_table--scrollContainer--rUP9F",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--iZveK",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:D}),(0,s.jsxs)("th",{className:O,children:[(0,c.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:p.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(l.K,{onClick:()=>R(e=>!e),"aria-label":(0,c.t)("checkout.select_seats_table.sort"),children:k?(0,s.jsx)(d.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(o.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:M,children:F?(0,c.tx)("checkout.select_seats_table.seat_column_exp"):(0,c.tx)("checkout.select_seats_table.seat_column")}),N===v.Ju.ORG&&(0,s.jsx)("th",{className:U,children:(0,c.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:B,children:(0,c.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:D})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsx)(L,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{m.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:N,teamId:N===v.Ju.PRO?w.selectedTeamIds[0]:void 0}),T(e.id,t)},tier:N,teamId:N===v.Ju.PRO?w.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:p.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(S.m,{tier:N,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:j}),(0,s.jsx)("p",{children:(0,c.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,c.tx)("checkout.select_seats_table.assigned_seats",{count:V}),unassignedSeatsText:(0,c.tx)("checkout.select_seats_table.unassigned_seats",{count:z})})})]})]})})})}},598838(e,t,a){a.d(t,{Y:()=>g});var s=a(239976),r=a(706354),i=a(395227),n=a(71239),l=a(297151),d=a(850159);a(574988);var o=a(865804),c=a(655673),m=a(289886),u=a(397383),_=a(993568),x=a(328781),p=a(936652),h=a(63504);let g=(0,p.Ju)(function(e){let t=(0,c.L)(r.FigmaTeam.UPGRADES),{user:a,seatTypes:p,selectedSeatType:g,setSelectedSeatType:y,open:f,onClose:v,tier:E,teamId:S,hideViewOption:T}=e,j=i.hS({open:f,onClose:v});return(0,s.jsx)(o.fu,{name:"Select User Seat Type Modal",properties:{teamId:S},trackingOptions:t,children:(0,s.jsx)(n.bL,{manager:j,width:480,"data-testid":"select-user-seat-type--modal",children:(0,s.jsx)(l.vo,{children:(0,s.jsx)(l.nB,{children:(0,s.jsx)("div",{...{className:"x87ps6o"},children:(0,s.jsxs)(u.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:m.s.mb24.$,children:(0,s.jsx)(x.j,{user:a,text:(0,d.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(_.m,{availableSeatCounts:null,canSetCurrentSeatType:!0,currentSeatType:g,displayPricing:!0,hideCurrentLabel:T,hideViewOption:T,learnMoreLinkHref:"/pricing",pricing:Object.fromEntries(Object.entries(p).filter(([e,t])=>e!==h.Gu.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),setNextSeatType:e=>{y(e),v()},showRecommendedBadge:T,tier:E})]})})})})})})},"SelectUserSeatTypeModal")},783142(e,t,a){a.d(t,{kR:()=>T,vU:()=>j});var s=a(239976),r=a(645186),i=a(523924),n=a(850159),l=a(181645);if(1464==a.j)var d=a(214030);var o=a(865804),c=a(838719),m=a(712231);if(1464==a.j)var u=a(898312);var _=a(985373),x=a(710674),p=a(508295),h=a(190797),g=a(735292),y=a(366434),f=a(710383),v=a(24520);function E(e){return(0,s.jsx)(o.$z,{type:"button",className:v.Nd,trackingProperties:{trackingDescriptor:d.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,n.tx)("pro_cart.breadcrumbs.cancel")})}function S(e,t,a,s){let r=t===y.tY.STUDENT,l=[];switch(e){case f.SC.CREATE_AND_UPGRADE:l.push(0),l.push(1),r?l.push(4):a||(l.push(4),l.push(5)),l.push(6);break;case f.SC.UPGRADE_EXISTING_TEAM:s===f.Sc.TEAM?(l.push(3),r||l.push(5)):r?(l.push(0),l.push(3)):a?l.push(0):(l.push(0),l.push(4),l.push(5)),l.push(6);break;case f.SC.CREATE:l.push(1),l.push(2),l.push(0),s===f.Sc.TEAM&&(r?l.push(4):a||(l.push(4),l.push(5)),l.push(6));break;default:(0,i.xb)(e)}return l.map(e=>(function(e){switch(e){case 0:return{step:y.Vv.PLAN_COMPARISON,text:(0,n.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:y.Vv.CREATE_TEAM,text:(0,n.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:y.Vv.ADD_COLLABORATORS,text:(0,n.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:y.Vv.CHOOSE_PLAN,text:(0,n.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:y.Vv.CHOOSE_PLAN,text:(0,n.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:y.Vv.PAYMENT_AND_ADDRESS,text:(0,n.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:y.Vv.CONFIRM_PAY,text:(0,n.t)("pro_cart.breadcrumbs.review")}}})(e))}function T(e,t,a,s,r,i){let n=S(t,a,s,r).map(e=>e.step),l=n.indexOf(e);return i=i||n[0],-1===l?i:n[l+1]}function j(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:n}=t,d=(0,r.wA)(),o=(0,r.d4)(e=>e.payment.billingPeriod),T=(0,p.iZ)()?.id,j=S(n,o,(0,r.d4)(e=>e.payment.promo),e.selectedView.planType||f.Sc.UNDETERMINED),N=j.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:v.N6,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(E,{onClick:()=>{((0,c.clearPaymentFlowData)(),e.isCampfireCart?(0,h.OI)(d):(0,h.Mt)(d),(0,f.h5)(n)&&null===a&&(0,x.Al)(T),T)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?d(u._l({workspace:{userId:T,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):d(_.sf(t.previousView||{view:"recentsAndSharing"})):d(_.sf(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),j.map((r,c)=>(0,s.jsx)(m.On,{selected:i===r.step,number:c+1,text:r.text,canClick:c<N,lightText:!0,onClick:()=>{l.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:g.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),d(_.sf({...t,paymentStep:r.step,billingPeriod:o===y.tY.UNSPECIFIED?void 0:o,planType:(0,f.ck)(n,r.step)?f.Sc.UNDETERMINED:t.planType,teamFlowType:(0,f.jX)(n)&&r.step===y.Vv.PLAN_COMPARISON?f.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},248472(e,t,a){a.d(t,{TeamUpgradePageBillingRemodel:()=>eJ});var s=a(239976),r=a(105652),i=a(645186),n=a(523924),l=a(706354),d=a(850159),o=a(843489),c=a(335127),m=a(181645),u=a(214030),_=a(865804),x=a(655673),p=a(59762),h=a(436174),g=a(838719),y=a(493094),f=a(227031),v=a(374950),E=a(828205),S=a(684325),T=a(781924),j=a(289886),N=a(863825),b=a(517436),A=a(660983),I=a(133580),w=a(12524),C=a(424044),k=a(658403),R=a(924395),P=a(443776),D=a(682546),O=a(160252),M=a(694471),U=a(783142),B=a(921424),L=a(24520);function V({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:L.Fb,children:(0,d.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(B.Kz,{multiple:.5}),(0,s.jsx)("h2",{className:L.b0,children:(0,d.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(B.Kz,{multiple:4}),(0,s.jsxs)("div",{style:A.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,r)=>(0,s.jsx)(B.il,{value:e,onChange:e=>{var s;return s=e.target.value,void(!(r>=t.length)&&a(t.map((e,t)=>t===r?s:e)))},placeholder:(0,d.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${r}`)),(0,s.jsx)(B.Us,{onClick:()=>{a([...t,""])},trusted:!0,style:A.sx.alignLeft.font14.fontMedium.$,children:(0,d.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:A.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(B.vd,{disabled:!!e,style:A.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,d.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(B.Ph,{trusted:!0,onClick:i,style:A.sx.colorTextSecondary.alignCenter.$,children:(0,d.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var z=a(916290),G=a(592758),F=a(38052),$=a(711488),q=a(487817),H=a(397219);function Y({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:n,upgradeExistingTeam:l}){let d=(0,G.U)(i);return(0,s.jsxs)("div",{style:A.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(F.f,{chooseEduPlan:t,chooseEnterprisePlan:z.lQ,chooseOrgPlan:r,chooseProPlan:a,chooseStarterPlan:e,currency:i,prices:d,teamPlan:q.Ag.STARTER,updateCurrency:n,withUpgradeExistingTeamOption:l}),(0,s.jsx)(H.hK,{height:8}),(0,s.jsx)($.L,{})]})}var W=a(898312),K=a(614743),J=a(985373),X=a(612883),Q=a(475712),Z=a(317507),ee=a(38900),et=a(473397),ea=a(580618),es=a(415591),er=a(63504),ei=a(795210),en=a(710674),el=a(406995),ed=a(494423),eo=a(379323),ec=a(496172),em=a(110638),eu=a(508295),e_=a(886213),ex=a(18526),ep=a(523454),eh=a(190797),eg=a(798413),ey=a(331850),ef=a(389218),ev=a(16936),eE=a(735292),eS=a(366434),eT=a(710383),ej=a(113641),eN=a(94160),eb=a(224467),eA=a(555355),eI=a(60177),ew=a(195784),eC=a(824234),ek=a(104922),eR=a(53791),eP=a(689617),eD=a(933544),eO=a(354230);let eM=(0,_.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eU(e){let t=e.paymentMethods.filter(e=>e.type===eR.lB.CARD||e.type===eR.lB.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){var t,a;if(e.type===eR.lB.CARD){let a;return a=(t=e.object).display_brand in ez?ez[t.display_brand]:(0,d.t)("checkout.other"),`${a} \u2022\u2022\u2022\u2022 ${t.last4}`}if(e.type===eR.lB.SEPA){let t;return t=(a=e.object).country?a.country.toUpperCase():(0,d.t)("checkout.other"),`SEPA ${t} \u2022\u2022\u2022\u2022 ${a.last4}`}throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,w.DS)(e.address);return(0,s.jsxs)("option",{className:j.s.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:j.s.font13.$,children:t}),a&&(0,s.jsx)("span",{className:j.s.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eB(e){return(0,s.jsx)("div",{className:eD.ri,children:(0,s.jsxs)("div",{className:j.s.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(eM,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?ew._R.POPULATED_COMPLETE:ew._R.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eU,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(eC.B,{style:A.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:eO.A})]})})}function eL(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eA.J,{children:(0,s.jsx)("span",{className:j.s.font13.$,children:(0,d.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:j.s.mb6.if(!t,j.s.mb0).$,children:(0,s.jsx)(eI.S,{label:r,onChange:e=>{a(e)},checked:t})})}function eV(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:n,selectedPaymentMethod:l}=e,{error:o,errorCode:c}=(0,i.d4)(e=>e.payment),m=!!o&&null===c;return(0,s.jsxs)(ek.x,{title:(0,d.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:j.s.alignLeft.$,children:[(0,s.jsx)(eL,{enableSavedPaymentMethods:n,setEnableSavedPaymentMethods:r}),n&&(0,s.jsx)(eB,{selectedPaymentMethod:l,enableSavedPaymentMethods:n,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:j.s.alignLeft.$,children:(0,s.jsx)(eP.S,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:m?o:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let ez={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var eG=a(745463),eF=a(897968),e$=a(928809),eq=a(370253);function eH(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,er.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}function eY({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:i,initCampfireSeats:n,onUpdateCampfireSeats:l}){let d=(0,eF.G)({currency:t,tier:eE.Ju.PRO,renewalTerm:a,showCents:!1}),[o]=(0,y.Ad)(d);if(null===o.data)throw Error("Seat types data is null");let c=o.data,{changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:_}=((e,t,a,s)=>{let[i,n]=(0,r.useState)(()=>{let r=function(e,t,a){let s,{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},n=t.map(e=>e.user.id),l=(0,e$.md)(i,n);return t.forEach(e=>{let t=e.user.id;l[t]||(l[t]=e.recommended_seat_type?.key??er.Gu.VIEW)}),s=(0,e$.Ed)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(l).forEach(e=>{"view"!==e&&(0,eG.Vq)(s[e])&&s[e]>0&&s[e]--}),(0,e$.MZ)(a,l,s)}(a,t,e);return s(eH(r)),r}),l=(0,r.useCallback)(e=>{try{n(t=>{let a=function(e,t){let a=(0,e$.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(eH(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{l({type:"changeSeatType",userId:e,seatType:t})},[l]),setAdditionalSeats:e=>l({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}})(e,i,n,l),x=i.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(eq.T,{users:x,seatTypes:c,changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:_,tier:eE.Ju.PRO})}let eW=e_.M4.Query({fetch:async e=>(await eN.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eK(e){let t,a=(0,eu.iZ)(),n=a?.id,u=(0,g.getPaymentFlowData)(),f=(0,i.d4)(e=>e.payment),S=(0,i.d4)(e=>e.teams),b=e.selectedView.paymentStep,B=(0,i.d4)(e=>e.roles.byTeamId),L=(0,ey.D6)("TeamUpgradeCart"),z=L.data?.permission===q.Xn.ADMIN,[G,F]=(0,r.useState)(u?.team_name??""),[$,H]=(0,r.useState)(en.kt),ec=(0,ep.PS)((0,em.FC)()),e_=(0,et.e5)({userId:n,teams:Object.values(S),rolesByTeamId:B}),[eN,eA]=(0,r.useState)(!1),[eI,ew]=(0,r.useState)(u?.currency||f.currency||(0,ex.LN)()),eC=e=>{ew(e),tm(X.MN({currency:e}))},ek=f.billingPeriod,{editorStatusChanges:eR}=f,{ignoreCurrentPlan:eP}=e.selectedView,eD=e.selectedView.teamId,eO=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:eS.Vv.CONFIRM_PAY})),eM=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:eS.Vv.PAYMENT_AND_ADDRESS})),eU=(0,et.Mh)(),eB=void 0===f.cartSelections,eL=(0,c.ZC)(eB),ez=ei.N_.dict(e=>f.cartSelections?.countBySeatType?.[e]||0),eG=ek&&(0,ep.ne)(ek)||eS.NW.YEAR,eF=(0,ea.jv)({billableProductKeys:ei.N_,baseQuery:{currency:eI,tier:eE.Ju.PRO,renewalTerm:eG,unit:eG}}),[e$]=(0,y.Ad)(eF),eq=(0,ea.vu)(e$);if(null===eq.data)throw Error("Price data is null");let eH=eq.data,eK=(0,w.s$)(eH),eJ=(0,I.Vh)(ez,eK),[eQ,eZ]=(0,r.useState)([]),[e0,e1]=(0,r.useState)(null),{createPaymentElement:e4,unmountPaymentElement:e2,savePayment:e5,saveWithPaymentMethod:e3,billingAddress:e8,updateBillingAddress:e6,shippingAddress:e7,updateShippingAddress:e9,customerLegalName:te,setCustomerLegalName:tt,nameOnPaymentMethod:ta,setNameOnPaymentMethod:ts,vatGstId:tr,setVatGstId:ti,regionalVatGstId:tn,setRegionalVatGstId:tl,paymentMethodType:td,error:to}=(0,es.lo)({setupIntentParams:{redirect_url:eO,error_redirect_url:eM,subtotal_estimate:eJ,currency:eI,teamId:eD??void 0},setPaymentMethods:eZ,customerInfo:{teamId:eD},paymentFlowSource:es.wn.PRO_UPGRADE,currency:eI,billingPeriod:ek,defaultCountry:(0,ex.ub)(),initialBillingAddress:u?.billing_address,initialNameOnPaymentMethod:u?.name_on_payment_method,initialShippingAddress:u?.shipping_address,initialCustomerLegalName:u?.customer_legal_name,initialVatGstId:u?.vat_gst_id,initialRegionalVatGstId:u?.regional_vat_gst_id,teamName:u?.team_name||G,canSeeBillingAddressExp:eU,isCheckout:!0,isCampfireCart:!0}),tc=to?.code===es.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,tm=(0,i.wA)(),tu=(0,eh.Ud)({teamId:eD,canSeeBillingAddressExp:eU}),[t_]=(0,y.IT)(eW({teamId:eD}),{enabled:!!eD}),tx="loaded"!==t_.status,tp={user:{id:n,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eD,recommended_seat_type:{key:er.ud.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{(0,eS.HY)(b)||tm(J.sf({...e.selectedView,paymentStep:eS.Vv.CHOOSE_PLAN}))},[b,tm,e.selectedView]),(0,r.useEffect)(()=>{"loaded"===t_.status&&(0,C.R9)({eligibleTeamIds:[eD],eligibleTeamUsers:t_.data.eligible_team_users,tier:eE.Ju.PRO,step:b})},[t_]);let th=tc||f.submitPending,tg=r.useCallback(()=>{tm(J.sf({...e.selectedView,paymentStep:eS.Vv.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eP,billingPeriod:ek}))},[tm,e.selectedView,eP,ek]),ty=eD?S[eD]?.name:G,tf=f.displayName||ty;(0,en.pI)({loadingPaidEditors:tu,teamId:eD,teamName:eD?void 0:G,setTeamName:eD?void 0:F,collaborators:eD||e.selectedView.teamFlowType!==eT.SC.CREATE?void 0:$,setCollaborators:eD||e.selectedView.teamFlowType!==eT.SC.CREATE?void 0:H});let tv=(0,i.d4)(e=>e.currentUserOrgId),tE=eP?null:tv,tS=(0,i.d4)(e=>tE?e.orgById[tE]:null),tT=(0,eb.Q)({currentOrgId:tE,currentTeamId:null}),tj=tT.data?.currentUser?.baseOrgUser?.workspaceUsers,tN=tj?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tb}=(0,ev.LM)(tS,tN??null),tA=(0,i.d4)(e=>(0,eg.R$)(e.user,e.currentUserOrgId));(0,o.h)(()=>{tm(Z.b({entered_pro_cart_flow:!0}))}),(0,o.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tI,tw]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b===eS.Vv.PAYMENT_AND_ADDRESS&&tc&&tg()}),(0,r.useEffect)(()=>{b===eS.Vv.CONFIRM_PAY&&!tu&&eB&&(0,m.sx)("pro_cart_selections_undefined_on_review_step",{teamId:eD,userId:n})},[eB,tu,b,n,eD]),(0,r.useEffect)(()=>{b===eS.Vv.CONFIRM_PAY&&eL&&!eB&&(0,m.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eD,loadingPaidEditors:tu})},[eB,eL,tu,b,eD]);let tC=(0,i.d4)(e=>!!e.user&&(0,E.cn)(e.user));(0,r.useEffect)(()=>{tC&&e.selectedView.isEduTeam?tm(X.Lo({billingPeriod:eS.tY.STUDENT})):e.selectedView.isEduTeam&&tm(X.Lo({billingPeriod:eS.tY.UNSPECIFIED}))},[tm,e.selectedView.isEduTeam,tC]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===eT.SC.CREATE_AND_UPGRADE&&(tA||tb===ev.z4.TEAM_CREATION_CONTROL)&&(h.Ay.redirect("/"),tm(N.s.error((0,d.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tA,tb,tm]);let tk=f.currencyToSwitch;(0,r.useEffect)(()=>{tk&&ew(tk)},[ew,tk]),(0,r.useEffect)(()=>{eQ[0]&&(e1(eQ[0]),eA(!0))},[eQ,e1,eA]);let tR=ek===eS.tY.STUDENT,tP=$.filter(e=>e&&e.trim()).map(e=>e.trim()),tD=tP.filter(e=>!(0,p.xf)(e)),tO=!!a&&tP.filter(e=>e===a.email).length>0,tM=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,U.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ek,f.promo,e.selectedView.planType||eT.Sc.UNDETERMINED);b===eS.Vv.CREATE_TEAM&&(F(G.trim()),tm(J.sf({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eP,billingPeriod:ek}))),b===eS.Vv.ADD_COLLABORATORS&&(tD.length?tm(N.s.error((0,d.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tD[0]}))):tO?tm(N.s.error((0,d.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):tm(J.sf({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eP,billingPeriod:ek}))),b===eS.Vv.CHOOSE_PLAN?tR?tm(J.sf({...e.selectedView,paymentStep:i,billingPeriod:eS.tY.STUDENT,ignoreCurrentPlan:eP})):(tm(X.Je({editorStatusChanges:eR})),tm(J.sf({...e.selectedView,paymentStep:i,billingPeriod:f.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:eP}))):b===eS.Vv.PAYMENT_AND_ADDRESS&&(tm(X.I2({submitPending:!0})),eN&&e0?await e3(e0):await e5(),tm(X.I2({submitPending:!1})))},tU=e.selectedView.teamFlowType===eT.SC.CREATE?()=>{tm((0,eo.KQ)({teamName:G,orgAccess:q.bU.PUBLIC,inviteEmails:tP,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,en.Al)(a?.id)},ignoreCurrentPlan:eP}))}:void 0;[eT.SC.CREATE_AND_UPGRADE,eT.SC.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ec.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=eT.SC.UPGRADE_EXISTING_TEAM;tm(J.sf({...e.selectedView,teamFlowType:a,teamId:ec[0].id,paymentStep:(0,U.kR)(e.selectedView.paymentStep,a,t||null,f.promo,eT.Sc.TEAM,eS.Vv.CHOOSE_PLAN),planType:eT.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eP}))}:ec.length>1&&(t=e=>{e&&tm(X.Lo({billingPeriod:e})),tm((0,ee.to)({type:k.dR,data:{plan:R.I.PRO,entryPoint:(0,ed.cH)(el.C.TEAM_CREATION_UPGRADE_EXISTING)}}))}));let tB=a&&(0,en.lX)({teamId:eD,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===eT.SC.CREATE_AND_UPGRADE&&(tA||tb===ev.z4.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(_.fu,{name:ej.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:(0,ed.cH)(e.selectedView.entryPoint),step:b,currency:eI,renewalTerm:eG,prices:(0,C.Jh)(eH),paywallType:(0,ed.fU)(e.selectedView.entryPoint)},enabled:!(tu||tx),trackingOptions:(0,x.E)(l.FigmaTeam.UPGRADES),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:j.s.selectNone.$,children:[(0,s.jsx)(U.vU,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:A.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[b!==eS.Vv.CREATE_TEAM&&(0,s.jsx)(eX,{step:b,teamName:ty??""}),b===eS.Vv.PLAN_COMPARISON&&(0,s.jsx)(Y,{chooseStarterPlan:t?void 0:tU,chooseEduPlan:()=>{eD?tm(X.Vm({teamId:eD})):tm((0,ee.to)({type:K.q}))},chooseProPlan:t=>{tm(X.Lo({billingPeriod:t}));let a=(0,eT.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:eT.SC.CREATE_AND_UPGRADE;tm(J.sf({...e.selectedView,teamFlowType:a,paymentStep:(0,U.kR)(e.selectedView.paymentStep,a,t,f.promo,eT.Sc.TEAM),billingPeriod:t,planType:eT.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eP}))},chooseOrgPlan:()=>{tm(X.Bq({currency:eI,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:G,inviteEmails:tP,previousView:e.selectedView},entryPoint:(0,ed.cH)(el.C.PLAN_CREATION_NEW_PAID_ORG)}))},currency:eI,updateCurrency:eC,upgradeExistingTeam:t}),b===eS.Vv.CREATE_TEAM&&(0,s.jsx)(O.y,{type:e.selectedView.teamFlowType===eT.SC.CREATE?O.I.STARTER:O.I.PRO,teamName:G,setTeamName:F,onNext:tM,upgradeExistingTeam:t?()=>t?.(ek):void 0,promo:f.promo}),b===eS.Vv.ADD_COLLABORATORS&&(0,s.jsx)(V,{disableInviteButton:!tP.length,collaborators:$,setCollaborators:H,willSendInvites:tM,skipInviteStep:()=>{if(H(en.kt),n){let e=(0,en.lX)({teamId:null,userId:n});e&&(0,en.dT)(n,{...e,newCollaborators:en.kt})}tm(J.sf({...e.selectedView,paymentStep:eS.Vv.PLAN_COMPARISON,ignoreCurrentPlan:eP}))}}),b===eS.Vv.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tB&&(0,s.jsx)("div",{className:j.s.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(T._,{color:T.S.INFORMATION,text:(0,d.t)("pro_cart.review.extra_validation")})}),tu||eB?(0,s.jsx)(M.f,{}):(0,s.jsx)(P.j,{billingAddress:e8,billingInterval:eG,countByBillableProductKey:ez,currency:eI,displayName:tf??"",hasUpgradeSucceeded:tI,isRequestPending:f.submitPending,legalName:f.legalName,navigateToEditDetails:()=>{tm(J.sf({...e.selectedView,paymentStep:eS.Vv.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:eP,billingPeriod:ek}))},onSubmit:()=>{let t=()=>{tw(!0),(0,g.clearPaymentFlowData)(),(0,eh.OI)(tm),(0,eT.h5)(e.selectedView.teamFlowType)&&null===eD&&(0,en.Al)(n)};if(e.selectedView.teamId&&tR)tm(X.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&f.promo){let a=e.selectedView.teamId;tm(Q.S_({teamId:a,teamName:S[a].name,promoCode:f.promo?.code||"",onSuccess:()=>{t(),(0,v._H)(),tm(X.Ay({promo:null})),n?e.selectedView.previousView?J.sf(e.selectedView.previousView):W._l({workspace:{userId:n,orgId:null,teamId:a},view:{view:"allProjects"}}):tm(J.sf(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,v._H)(),tm(X.Ay({promo:null})),tm(J.sf({...e.selectedView,paymentStep:eS.Vv.PLAN_COMPARISON,ignoreCurrentPlan:eP}))}}))}else{tm(Z.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,w.ZY)({countBySeatType:ez,applicablePrices:eK,taxPercent:f.taxes?.tax_percent??0}),i=(0,w.GL)({subtotal:a,taxTotal:s,total:r});tm(X.I2({submitPending:!0})),tm((0,Q.gk)({teamId:e.selectedView.teamId,selectedCurrency:eI,teamName:G,teamFlowType:e.selectedView.teamFlowType,invites:tP,hasSelectedStudentTeam:tR,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:e_,displayedPriceKeys:(0,w.vm)(eH)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,C.Tj)(f.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.gS)(ez),isTeamAdmin:z,...(0,w.ZY)({countBySeatType:ez,applicablePrices:eK,taxPercent:f.taxes?.tax_percent??0})},shippingAddress:e7,taxPercent:f.taxes?.tax_percent,tier:eE.Ju.PRO,title:(0,d.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:A.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[b===eS.Vv.CHOOSE_PLAN&&(tu||tx&&!e_?(0,s.jsx)(M.f,{}):(0,s.jsx)(eY,{teamId:e.selectedView.teamId??"",currency:eI,renewalTerm:eG,eligibleTeamUsers:t_.data?.eligible_team_users??[tp],initCampfireSeats:f.cartSelections,onUpdateCampfireSeats:e=>tm(X.qU({cartSelections:e}))})),b===eS.Vv.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eV,{billingAddress:e8,canSeeBillingAddressExp:eU,createPaymentElement:e4,enableSavedPaymentMethods:eN,error:to,isCampfireCart:!0,legalCompanyName:te,nameOnPaymentMethod:ta,onRegionalVatGstIdChange:tl,onVatGstIdChange:ti,paymentFlow:es.wn.PRO_UPGRADE,paymentMethodType:td,paymentMethods:eQ,regionalVatGstId:tn,selectedPaymentMethod:e0,setEnableSavedPaymentMethods:eA,setSelectedPaymentMethod:e1,shippingAddress:e7,unmountPaymentElement:e2,updateBillingAddress:e6,updateLegalCompanyName:tt,updateNameOnPaymentMethod:ts,updateShippingAddress:e9,vatGstId:tr}),[eS.Vv.CHOOSE_PLAN,eS.Vv.PAYMENT_AND_ADDRESS].includes(b)&&(0,s.jsx)(D.z,{billingInterval:eG,buttonText:b===eS.Vv.PAYMENT_AND_ADDRESS?(0,d.t)("pro_cart.sidebar.next_review"):(0,d.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:b===eS.Vv.CHOOSE_PLAN,countByBillableProductKey:ez,currency:eI,isButtonDisabled:th,isLoading:f.submitPending,onClickNext:tM,onSwitchBillingInterval:e=>{m.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eD??void 0,renewalTerm:e}),tm(X.Lo({billingPeriod:(0,ep.JV)(e)}))},onSwitchCurrency:eC,tier:eE.Ju.PRO,title:(0,d.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,C.Tj)(f.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.gS)(ez),savedPaymentMethodId:eN?e0?.id:void 0}})]})]})]})})}function eJ(e){return(0,s.jsx)(f.u9,{label:"TeamUpgradePageBillingRemodel",children:(0,s.jsx)(S.tH,{team:l.FigmaTeam.UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:S.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ec.y4,children:(0,s.jsx)(eK,{...e})})})}function eX({step:e,teamName:t}){let a=(0,et.Dj)(),r=(0,s.jsx)(b.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:u.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,d.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:j.s.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:j.s.font15.lh24.fontMedium.$,children:function(e,t,a){if(!(0,eS.$Y)(e)||(0,eS.HY)(e))switch(t=t||(0,d.t)("checkout.select_seats_header.your_team"),e){case eS.Vv.PLAN_COMPARISON:return(0,d.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case eS.Vv.CHOOSE_PLAN:if(a)return(0,d.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,d.tx)("checkout.select_seats_header",{teamName:t});case eS.Vv.PAYMENT_AND_ADDRESS:return(0,d.tx)("checkout.enter_your_payment_details");case eS.Vv.CONFIRM_PAY:return(0,d.tx)("checkout.everything_look_good");default:(0,n.wc)(e)}}(e,t,a())}),e===eS.Vv.CHOOSE_PLAN&&(0,s.jsx)("p",{className:j.s.colorTextSecondary.font13.mt8.$,children:(0,d.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:r})}),e===eS.Vv.CONFIRM_PAY&&(0,s.jsx)("p",{className:j.s.colorTextSecondary.font13.mt8.$,children:(0,d.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")})]})}},542706(e,t,a){a.d(t,{E:()=>r,M:()=>i});var s=a(239976);function r({children:e}){return(0,s.jsx)("div",{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o",children:e})}function i({children:e}){return(0,s.jsx)("div",{className:"xrvj5dj x3uu4nb x1fwvi78",children:e})}a(574988)},581708(e,t,a){a.d(t,{TierUpgradeFlow:()=>eH});var s=a(239976),r=a(105652),i=a(645186),n=a(706354),l=a(741542),d=a(181645),o=a(865804),c=a(730002),m=a(59762),u=a(436174),_=a(140979),x=a(227031),p=a(462198),h=a(684325),g=a(129416),y=a(850159);a(574988);var f=a(113116),v=a(229249),E=a(898312),S=a(985373),T=a(773201),j=a(508295),N=a(366434),b=a(441740);function A({steps:e,currentStep:t,setStep:a,teamId:r,isSingleFullCheckoutExpEnabled:n}){let l=(0,i.wA)(),d=(0,j.iZ)()?.id,o=(0,T._6)(),c=e.filter(e=>e!==N.fI.CONFIRMATION);return(0,s.jsxs)("div",{...{className:"xixxii4 x78zum5 x1vqgdyp xh8yej3 x1t0vds8 xdqyycr x1yjdb4r xso031l x1q0q8m5 xertd99 xhtitgo"},children:[(0,s.jsx)(f.e6,{...{className:"x10l6tqk xomnu4r x1qpfodn xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},onClick:()=>{let e="teamUpgrade"===o.view?o.previousView:null;r&&e?.view!=="fullscreen"?l(E._l({workspace:{userId:d,teamId:r,orgId:null},view:{view:"recentsAndSharing"}})):l(S.sf(e||{view:"recentsAndSharing"})),"teamUpgrade"===o.view&&o.callbackOnClose?.()},children:(0,y.t)("checkout.cancel")}),t!==N.fI.UPGRADE_TYPE&&(0,s.jsx)("ol",{...{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3"},children:c.map((e,r)=>(0,s.jsx)("li",{children:(0,s.jsxs)(f.e6,{onClick:()=>a(e),"aria-current":e===t?"step":void 0,...{0:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},1:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xnbbluu"}}[e!==t|0],children:[(0,s.jsx)("span",{className:b.Q,children:(0,y.t)("checkout.voice_over.steps",{stepNumber:r+1,totalSteps:c.length})}),n?v.Nq[e].name:v.r5[e].name,r<c.length-1&&(0,s.jsx)(g.a,{className:"xe5c7bq"})]})},r))})]})}var I=a(515613),w=a(92366),C=a(786965),k=a(1265),R=a(838719),P=a(834116),D=a(587212),O=a(735415);function M({step:e,teamName:t,isSingleFullCheckoutExpEnabled:a}){let r=a?v.Nq[e]?.pageSubtitle:v.r5[e]?.pageSubtitle;return(0,s.jsxs)("div",{...{className:"xf1vcxl"},"data-testid":"cart-header",children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu"},tabIndex:0,children:a?v.Nq[e]?.getPageTitle(t):v.r5[e]?.getPageTitle(t)}),r&&(0,s.jsx)("p",{className:"x1swbamy xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:r})]})}function U({checkoutFlowType:e,setCheckoutFlowType:t,onClickNext:a}){return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xk54qb2 x1kx8hp3 x180w3km x87ps6o"},children:[(0,s.jsx)(M,{step:N.fI.UPGRADE_TYPE}),(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x18x6v2m"},children:[(0,s.jsxs)(C.b,{...{className:"x78zum5 x1pulhmw x1qjc9v5"},value:e??"",onChange:e=>t(e),children:[(0,s.jsx)(B,{id:D.x.SINGLE_EDITOR,title:(0,y.t)("checkout.upgrade_type_single_title"),description:(0,y.t)("checkout.upgrade_type_single_description"),imgUrl:(0,R.staticAssetWithUploadsPath)("9f83fd329b1e36ac34fe65e902eaf55b25d0f3c0")}),(0,s.jsx)(B,{id:D.x.MULTI_EDITOR,title:(0,y.t)("checkout.upgrade_type_team_title"),description:(0,y.t)("checkout.upgrade_type_team_description"),imgUrl:(0,R.staticAssetWithUploadsPath)("6453082a6c3b353ecf4e50938aa701fa258adbc8")})]}),(0,s.jsx)("div",{...{className:"xq1dxzn"},children:(0,s.jsx)(O.Ff,{onClick:a,disabled:!e,fullWidth:!0,children:(0,y.t)("checkout.upgrade_type_next")})})]})]})}function B({id:e,title:t,description:a,imgUrl:r}){return(0,s.jsxs)("label",{htmlFor:e,...{className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh xjsondq xfbns0s xbfr8j9 xmkeg23 x1y0btm7 x1mxnbhz x1yjdb4r xfl4w7x x7z60cl x16ukhit"},"data-testid":`upgrade-type-${e}`,children:[(0,s.jsx)(k.c,{value:e,id:e,className:"x10l6tqk x1i1rx1s xjm9jq1 x1717udv xkdpibf xb3r6kr xzpqnlu xuxw1ft xc342km"}),(0,s.jsx)(P.oW,{draggable:!1,src:r,alt:t,className:"x19kjcj4"}),(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh"},children:[(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:t}),(0,s.jsx)("span",{className:"x1n0bwc9 x2b8uid",children:a})]})]})}var L=a(946182),V=a(543750),z=a(91194),G=a(840856),F=a(241146),$=a(424044),q=a(658403),H=a(102644),Y=a(420018),W=a(694471),K=a(38900),J=a(675063),X=a(494423),Q=a(496172),Z=a(487817),ee=a(644350),et=a(640818),ea=a(735292),es=a(113641),er=a(523924),ei=a(690607),en=a(609024),el=a(555355),ed=a(208650),eo=a(824272),ec=a(50751),em=a(364136),eu=a(214030),e_=a(497544),ex=a(2259),ep=a(636773),eh=a(18526),eg=a(389218),ey=a(727645),ef=a(92576);function ev({state:e,dispatch:t,buttonText:a,canSwitchRenewalTerm:r,onClickNext:l,nextStep:d,onContactSalesClick:o,trackingProperties:c,shouldRenderCartData:m,isSingleFullCheckoutExpEnabled:u}){let{tier:_,countBySeatType:x,renewalTerm:p,currency:h,cartSelectionError:g,isSubmitting:f}=e,v=(0,eh._Z)(),E=(0,ep.Um)(),S=(0,T._6)(),j=(0,i.d4)(e=>"teamUpgrade"===S.view?(0,eg.Np)(e,{...S,paymentStep:d}):"orgSelfServe"===S.view?(0,eg.Np)(e,{...S,step:d}):void(0,er.wc)(S.view));return(0,s.jsxs)(ey.x,{title:_===ea.Ju.PRO?(0,y.t)("checkout.your_professional_plan"):(0,y.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",noHeaderMargin:!0,variant:u?"narrow":"default",children:[(0,s.jsx)("div",{children:m&&x?(0,s.jsxs)(s.Fragment,{children:[v&&(0,s.jsxs)("div",{...{className:"x78zum5 x1qughib x6s0dn4 xso031l x1q0q8m5 xertd99 x1vi7shn xp6roeo"},"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:(0,y.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(ex.D,{currency:h,dropdownShown:E,supportedCurrencies:(0,eh.B9)(),changeCurrency:e=>{t({type:G.H.SET_CURRENCY,payload:{currency:e}})},shortFormDisplay:!0,paddingOverride:0})]}),r&&(0,s.jsx)("fieldset",{...{0:{className:"x1vi7shn xp6roeo"},1:{className:"x1vi7shn xp6roeo xso031l x1q0q8m5 xertd99"}}[0|!!u],"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(ei.b,{legend:(0,s.jsx)(en.q,{children:(0,y.tx)("checkout.sidebar.switch_your_billing_interval")}),value:p,onChange:e=>{t({type:G.H.SET_RENEWAL_TERM,payload:{renewalTerm:e}})},children:[(0,s.jsx)(ei.c,{value:N.NW.YEAR,label:(0,s.jsxs)(el.J,{...{className:"x78zum5 x6s0dn4 xg2d0mh"},children:[(0,y.tx)("checkout.sidebar.annual")," ",(0,s.jsx)(ed.E,{variant:"successOutline",size:"md",children:(0,y.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(ei.c,{value:N.NW.MONTH,label:(0,s.jsx)(el.J,{children:(0,y.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ef.O,{isCartReviewSummary:!1,showPerSeatBreakdown:!u,state:e}),(0,s.jsx)("p",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1rdy4ex xp6roeo x3vvef7"},children:(0,y.tx)("checkout.rewrite.tax_disclaimer_revised")})]})]}):(0,s.jsx)("p",{...{className:"x1n0bwc9 x1hk0uxs"},children:(0,y.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{...{className:"x7hzu26"},children:[g&&(0,s.jsx)("div",{...{className:"x1ef8nbk"},children:(0,s.jsx)(eo.$y,{variant:"warn",children:(0,s.jsx)(ec.Q,{children:g.message})})}),a&&(0,s.jsx)(O.RD,{onClick:e=>{e.preventDefault(),l()},disabled:f,href:j,"data-testid":"cart-sidebar-button",trackingProperties:{trackingDescriptor:eu.c.CART_SIDEBAR,...c},trackingOptions:{teamName:n.FigmaTeam.UPGRADES,addToRUM:!0},children:f?(0,s.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp"},"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(e_.k,{})}):a}),_===ea.Ju.ORG&&(0,s.jsxs)("div",{...{className:"x7hzu26 x78zum5 xg2d0mh"},"data-testid":"cart-sidebar-footer",children:[(0,s.jsx)(em.a,{}),(0,s.jsx)("p",{children:(0,y.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("button",{type:"button",...{className:"x1quhyk7"},onClick:o,children:(0,y.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]})]})]})}var eE=a(474312),eS=a(540160);function eT({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r}){let{tier:i,legalName:n,displayName:l}=e;return(0,s.jsxs)("div",{children:[i===ea.Ju.ORG&&(0,s.jsx)("div",{...{className:"xpezlj7"},children:(0,s.jsx)(ey.x,{title:(0,y.t)("checkout.organization_details"),children:(0,s.jsx)(eE.M,{legalName:n,displayName:l,dispatch:t})})}),(0,s.jsx)(ey.x,{title:(0,y.t)("checkout.payment_details"),children:(0,s.jsx)(eS._,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})})]})}var ej=a(145939),eN=a(12524),eb=a(548202);function eA({navigateToEditDetails:e,state:t}){let a=(0,R.default)().user_data,{displayName:r,legalName:i,tier:n,billingAddress:l,hasDifferentShippingAddress:d,shippingAddressInput:o}=t;return(0,s.jsxs)(ey.x,{title:(0,y.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(eb.m,{header:n===ea.Ju.ORG?(0,y.t)("checkout.cart_plan_details.organization_name"):(0,y.t)("checkout.cart_plan_details.team_name"),value:r||i,dataTestId:"cart-plan-details-plan-name"}),i&&(0,s.jsx)(eb.m,{header:(0,y.t)("checkout.cart_plan_details.legal_name"),value:i,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(eb.m,{header:(0,y.t)("checkout.cart_plan_details.invoice_email"),value:a?.email??"",dataTestId:"cart-plan-details-invoice-email"}),l&&(0,s.jsx)(eb.m,{header:(0,y.t)("checkout.cart_plan_details.billing_address"),value:(0,eN.DS)(l),dataTestId:"cart-plan-details-billing-address"}),d&&!(0,N.$V)(o)&&(0,s.jsx)(eb.m,{header:(0,y.t)("checkout.cart_plan_details.shipping_address"),value:(0,eN.DS)(o),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1w4f5ud x1vamu9a"},children:(0,s.jsx)(f.rb,{onClick:e,trackingProperties:{trackingDescriptor:eu.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",children:(0,y.tx)("checkout.cart_plan_details.edit_details")})})]})}function eI(e){let t=e.state.is3ds;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{...{className:"x8x9d4c xack27t xdpxx8g x4vex6e"},children:(0,s.jsx)(eo.Yy,{variant:"brand",children:(0,s.jsx)(ec.Q,{children:(0,y.t)("pro_cart.review.extra_validation")})})}),(0,s.jsxs)("div",{...{className:"xrvj5dj xe1a36 xvossa"},"data-testid":"cart-review-step",children:[(0,s.jsx)(eA,{...e}),(0,s.jsx)(ej.$j,{...e})]})]})}var ew=a(422154),eC=a(245598),ek=a(542706);function eR({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m}){let{tier:u}=a,{teamName:x}=(0,_.Rs)((0,ee.CJW)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""});return(0,s.jsxs)(ek.E,{children:[(0,s.jsx)(M,{step:t,teamName:x}),t===N.fI.REVIEW?(0,s.jsx)(eI,{state:a,onSubmit:r,navigateToEditDetails:()=>i(N.fI.PAYMENT_AND_ADDRESS)}):(0,s.jsxs)(ek.M,{children:[t===N.fI.SELECT_TEAMS&&(0,s.jsx)(eC.d,{state:a,dispatch:l}),t===N.fI.SELECT_SEATS&&(0,s.jsx)(ew.D,{state:a,teamId:n,dispatch:l,shouldShowTeamColumn:u===ea.Ju.ORG}),t===N.fI.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eT,{state:a,dispatch:l,createPaymentElement:d,unmountPaymentElement:o}),(0,s.jsx)(ev,{buttonText:v.r5[t]?.buttonText??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:u===ea.Ju.PRO,onContactSalesClick:e,shouldRenderCartData:t!==N.fI.SELECT_TEAMS})]})]})}var eP=a(877304),eD=a(897968),eO=a(598838),eM=a(847965),eU=a(965974),eB=a(63504),eL=a(12358),eV=a(328151),ez=a(694151);function eG({teamId:e,dispatch:t,state:a,isSingleFullCheckoutExpEnabled:l}){let{currency:o,currentUpgradingUserId:c,eligibleUsersByUserId:m,renewalTerm:u,selectedUserSeatTypes:_,tier:x}=a,h=r.useRef(null),g=(0,eD.G)({currency:o,tier:x,renewalTerm:u,showCents:!1}),v=(0,i.wA)(),[E]=(0,eP.m)([g]);if(null===E)throw(0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid state: No seat types data"),{extra:{currency:o,tier:x,renewalTerm:u,showCents:!1,seatTypesQuery:g,seatTypesResponse:E}}),Error("No seat types data");let S=_[c],T=(0,eL.SS)(S,{overridePlanTier:x}),j=!l&&S===eB.ud.EXPERT,N=m[c];return N?(0,s.jsx)("div",{...{className:"x9h44rk xmkeg23 x1y0btm7 x7z60cl x4vex6e x1ger3g"},children:(0,s.jsxs)("table",{...{className:"xh8yej3 x140o2bo"},children:[(0,s.jsxs)("colgroup",{children:[(0,s.jsx)("col",{className:"xqyf9gi"}),(0,s.jsx)("col",{}),(0,s.jsx)("col",{className:"xygnafs"})]}),(0,s.jsx)("thead",{...{className:"x10l6tqk xzpqnlu"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:(0,y.tx)("checkout.select_seats_table.user_column")}),(0,s.jsx)("th",{scope:"col",children:(0,y.tx)("checkout.select_seats_table.seat_column")}),(0,s.jsx)("th",{scope:"col",children:(0,y.t)("checkout.edit_user_seat_name",{name:N.handle})})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{"data-testid":"avatar-container",...{className:"xctkrei"},children:(0,s.jsx)(ez.az,{entity:N,includeUserEmailAddress:!0,size:24,showIsMe:!0})}),(0,s.jsxs)("td",{...{className:"xxymvpz"},children:[(0,s.jsxs)("div",{"data-testid":"seat-type-icon-container",...{className:"x78zum5 xg2d0mh x6s0dn4"},children:[!l&&(0,s.jsx)(eM.BC,{removeBackgroundColor:!0,type:S,size:"16"}),(0,s.jsx)("p",{children:(0,eU.JT)(S)}),j&&(0,s.jsx)("div",{children:(0,s.jsx)(ed.E,{"data-testid":"badge",variant:"brandOutline",size:"md",children:(0,y.t)("checkout.recommended")})})]}),(0,s.jsx)("p",{"data-tooltip-type":eV.Ib.TEXT,"data-tooltip":h.current&&h.current.offsetWidth<h.current.scrollWidth?T:null,"data-tooltip-timeout-delay":500,...{className:"xv1l7n4 xuxw1ft xb3r6kr xlyipyv"},ref:h,children:T})]}),(0,s.jsx)("td",{...{0:{className:"x16dsc37 x1hr2gdg xuxw1ft x4p5aij"},1:{className:"x1hr2gdg xuxw1ft x4p5aij x1wo2wf3"}}[0|!!l],children:(0,s.jsx)(f.rb,{"data-testid":"button-link-tracked",onClick:()=>{v((0,K.to)({type:eO.Y,showModalsBeneath:!0,data:{user:N,seatTypes:E,selectedSeatType:S,setSelectedSeatType:a=>{var s;d.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:N.id,previousSeatType:S,newSeatType:a,tier:x,teamId:e}),s=N.id,t({type:G.H.UPDATE_USER_SEAT_TYPE,payload:{userId:s,seatType:a}})},tier:x,teamId:e,hideViewOption:l}}))},children:(0,y.tx)("members_table.batch_actions_menu.role_change.seat_rename")})})]})})]})}):((0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid user"),{extra:{user:N}}),null)}function eF({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r,teamId:i,isSingleFullCheckoutExpEnabled:l}){let{tier:d}=e;return i&&d===ea.Ju.PRO?(0,s.jsxs)("div",{children:[(0,s.jsx)(eG,{teamId:i,dispatch:t,state:e,isSingleFullCheckoutExpEnabled:l}),(0,s.jsx)(ey.x,{title:(0,y.t)("checkout.payment_details"),variant:"narrow",children:(0,s.jsx)(eS._,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})})]}):((0,p.$D)(n.FigmaTeam.UPGRADES,Error("Invalid state: missing teamId or invalid tier in SeatSelectionAndPaymentDetailsStep"),{extra:{teamId:i,tier:d}}),null)}function e$({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m,isSingleFullCheckoutExpEnabled:u}){let{tier:x}=a,{teamName:p}=(0,_.Rs)((0,ee.CJW)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""}),h=u?v.Nq[t]?.buttonText:v.r5[t]?.buttonText;return(0,s.jsxs)("div",{...{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o"},children:[(0,s.jsx)(M,{step:t,teamName:p,isSingleFullCheckoutExpEnabled:u}),t===N.fI.SELECT_SEATS_AND_PAYMENT&&(0,s.jsxs)("div",{...{0:{className:"xrvj5dj x3uu4nb x1fwvi78"},1:{className:"xrvj5dj x3uu4nb x1excjyp"}}[0|!!u],children:[(0,s.jsx)(eF,{state:a,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,isSingleFullCheckoutExpEnabled:u}),(0,s.jsx)(ev,{buttonText:h??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:x===ea.Ju.PRO,onContactSalesClick:e,shouldRenderCartData:!0,isSingleFullCheckoutExpEnabled:u})]}),t===N.fI.REVIEW&&(0,s.jsx)(eI,{state:a,onSubmit:r,navigateToEditDetails:()=>i(N.fI.SELECT_SEATS_AND_PAYMENT)})]})}function eq({teamId:e,entryPoint:t,newUser:a,...x}){let h=function(){let{getConfig:e}=(0,L.I7)("exp_single_editor_checkout");return!!e().getValue("enabled",!1)}(),g=function(){let{getConfig:e}=(0,L.I7)("gm-tierupgrades-2026q1-xp-singlefullcheckout");return r.useCallback(()=>!!e().getValue("enabled",!1),[e])}(),y=x.tier===ea.Ju.PRO&&g(),f=(0,V.C)((0,X.cH)(t),a),v=(0,T._6)(),E=(0,i.wA)(),{state:j,dispatch:b,createPaymentElement:C,unmountPaymentElement:k,validateUserSeatTypeSelections:R,validatePaymentInputs:P,collectPaymentDetails:O,performTierUpgrade:M}=(0,z.iW)({teamId:e,tier:x.tier,currency:x.currency,renewalTerm:x.renewalTerm,entryPoint:t,newUser:a,isSingleFullExp:y}),{tier:B,currency:Q,renewalTerm:er,selectedTeamIds:ei,selectedUserSeatTypes:en,additionalSeatsCount:el,countBySeatType:ed,applicablePriceData:eo,eligibleTeamsByTeamId:ec,isLoading:em,stripeError:eu,cartSelectionError:e_,isSubmitting:ex,eligibleUsersByUserId:ep}=j,[eh,eg]=(0,r.useState)(null);(0,r.useEffect)(()=>{y&&B===ea.Ju.PRO?eg(D.x.SINGLE_EDITOR):!em&&1===Object.keys(ep).length&&B===ea.Ju.PRO&&h&&eg(D.x.SINGLE_EDITOR)},[em,ep,eg,h,B,y]);let ey=(0,r.useMemo)(()=>em?[]:(0,F.g)({tier:B,eligibleTeams:Object.values(ec),checkoutFlowType:eh,isSingleEditorCheckoutExpEnabled:h,shouldShowStreamlinedNewUserCheckoutUX:f(),isSingleFullCheckoutExpEnabled:y}),[em,B,ec,eh,h,f,y]),[ef,ev]=(0,r.useState)(ey[0]),{teamName:eE,isOrgAdmin:eS,userEmail:eT}=(0,_.bc)((0,ee.CJW)({teamId:e})).transform(({team:e,currentUser:t})=>({teamName:e?.name??"",userEmail:t?.email??"",isOrgAdmin:t?.baseOrgUsers?.some(e=>e.permission===Z._D.ADMIN)})).unwrapOr({teamName:"",isOrgAdmin:!1,userEmail:""}),ej=(0,r.useCallback)(e=>{"teamUpgrade"===v.view?E((0,S.sf)({...v,paymentStep:e})):"orgSelfServe"===v.view&&E((0,S.sf)({...v,step:e}))},[E]),eN=(0,r.useCallback)(t=>{-1===ey.indexOf(t)?(0,p.$D)(n.FigmaTeam.UPGRADES,Error(`Invalid step: ${t}`),{extra:{steps:ey,step:t}}):(ev(t),ej(t),ef&&d.az.trackDefinedEvent("monetization_upgrades.checkout_change_step",{teamId:e?.toString(),currentStep:ef,tier:B,newStep:t,selectedTeamIds:(0,$.gu)(Array.from(ei)),selectedUserSeatTypes:(0,$.Tj)(en)??void 0,additionalSeatsCount:(0,$.gS)(el)??void 0,countBySeatType:(0,$.gS)(ed)??void 0}))},[ey,ej,e,ef,B,ei,en,el,ed]),eb=(0,r.useCallback)(e=>{let t=ey.indexOf(ef);ey.indexOf(e)>t||eN(e)},[ef,ey,eN]),eA=(0,r.useCallback)(()=>ey[Math.min(ey.indexOf(ef)+1,ey.length-1)],[ef,ey]),eI=(0,r.useCallback)(async()=>{if(ex)return!1;switch(b({type:G.H.SET_ERROR,payload:{error:null}}),ef){case N.fI.SELECT_TEAMS:b({type:G.H.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case N.fI.SELECT_SEATS:if(await R())return!1;break;case N.fI.PAYMENT_AND_ADDRESS:if(P()||await O())return!1;break;case N.fI.SELECT_SEATS_AND_PAYMENT:if(await R()||P()||await O())return!1}return eN(eA()),!0},[ef,eN,R,P,O,b,eA,ex]),ew=(0,r.useCallback)(async()=>{let e=await M();e||B!==ea.Ju.ORG||eN(N.fI.CONFIRMATION),!e&&B===ea.Ju.PRO&&f()&&eN(N.fI.CONFIRMATION)},[M,eN,B,f]),eC=(0,r.useCallback)(e=>{b({type:G.H.UPDATE_TO_DEFAULT_SEAT_SELECTIONS,payload:{shouldUseSingleEditor:e===D.x.SINGLE_EDITOR}}),eg(e)},[b,eg]),ek=()=>{E((0,K.to)({type:q.lk,data:{source:H.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},eP=()=>{u.Ay.redirect("/files/recent")};return(0,r.useEffect)(()=>{if(!em&&!ef){let a=ey[0];eN(a),(0,l.getFeatureFlags)().enable_starter_cart_rum_tracking&&(0,c.se)(n.FigmaTeam.UPGRADES),d.az.trackDefinedEvent("monetization_upgrades.checkout_entry",{teamId:e?.toString(),entryPoint:(0,X.cH)(t),upsellSource:(0,X.dh)(t),step:a,tier:B,currency:Q,renewalTerm:er,selectedTeamIds:(0,$.gu)(Array.from(ei)),selectedUserSeatTypes:(0,$.Tj)(en)??void 0,additionalSeatsCount:(0,$.gS)(el)??void 0,countBySeatType:(0,$.gS)(ed)??void 0})}},[em,ef,ey,eN,e,t,B,Q,er,ei,en,ed,el]),(0,r.useEffect)(()=>{ef===N.fI.PAYMENT_AND_ADDRESS&&eu?.code===J.Or.UNINITIALIZED_STRIPE_ELEMENTS_ERROR&&(eh===D.x.SINGLE_EDITOR?eN(N.fI.UPGRADE_TYPE):eN(N.fI.SELECT_SEATS))},[eu?.code,ef,eN,eh]),(0,r.useEffect)(()=>{e_?.code===G.C.CARD_ERROR&&ef===N.fI.REVIEW&&(eh===D.x.SINGLE_EDITOR?eN(N.fI.SELECT_SEATS_AND_PAYMENT):eN(N.fI.PAYMENT_AND_ADDRESS))},[e_?.code,eN,ef,eh,B]),(0,r.useEffect)(()=>{eE&&b({type:G.H.UPDATE_DISPLAY_NAME,payload:{displayName:eE}})},[eE,b]),(0,r.useEffect)(()=>{document.querySelector("h1")?.focus()},[ef]),(0,s.jsx)(o.fu,{name:es.e0.TIER_UPGRADE_FLOW,properties:{teamId:e?.toString(),entryPoint:(0,X.cH)(t),upsellSource:a?et.b.PURCHASE_PROFESSIONAL_ROUTE:(0,X.dh)(t),tier:B,step:ef,currency:Q,renewalTerm:er,prices:(0,$.Jh)(eo),paywallType:(0,X.fU)(t)},enabled:!em,trackingOptions:{teamName:n.FigmaTeam.UPGRADES,addToRUM:!0},children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(W.f,{}),children:em||!ef?(0,s.jsx)(W.f,{}):ef===N.fI.CONFIRMATION?B===ea.Ju.ORG?(0,s.jsx)(I.I,{orgMigrated:x.orgMigrated}):(0,s.jsx)(w.z,{teamId:e}):(0,s.jsxs)("form",{children:[B===ea.Ju.ORG&&eS&&(0,s.jsx)(Y.wW,{onContactSales:ek,onFileBrowserClick:eP}),B===ea.Ju.ORG&&(0,m.qe)(eT)&&(0,s.jsx)(Y.VE,{onFileBrowserClick:eP}),(0,s.jsx)(A,{steps:ey,currentStep:ef,setStep:eb,teamId:e,isSingleFullCheckoutExpEnabled:y}),ef===N.fI.UPGRADE_TYPE&&(0,s.jsx)(U,{checkoutFlowType:eh,setCheckoutFlowType:eC,onClickNext:eI}),ef!==N.fI.UPGRADE_TYPE&&(eh===D.x.SINGLE_EDITOR?(0,s.jsx)(e$,{contactSales:ek,createPaymentElement:C,dispatch:b,getNextStep:eA,isSingleFullCheckoutExpEnabled:y,onNext:eI,performTierUpgrade:ew,setStep:eN,state:j,step:ef,teamId:e,unmountPaymentElement:k}):(0,s.jsx)(eR,{contactSales:ek,createPaymentElement:C,dispatch:b,getNextStep:eA,onNext:eI,performTierUpgrade:ew,setStep:eN,state:j,step:ef,teamId:e,unmountPaymentElement:k}))]})})})}function eH(e){return(0,s.jsx)(x.u9,{label:"TierUpgradeFlow",children:(0,s.jsx)(h.tH,{team:n.FigmaTeam.UPGRADES,boundaryKey:"TierUpgradeFlow",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:Q.y4,children:(0,s.jsx)(eq,{...e})})})}},47047(e,t,a){a.d(t,{j:()=>l});var s=a(886213),r=a(331850),i=a(94160);let n=s.M4.Query({fetch:async({planKey:e,enabledFetch:t})=>e&&t?(await i.V.getSavedPaymentMethods({planType:e?.type,planId:e?.parentId})).data.meta:{payment_methods:[]},stalenessPolicy:"never"});function l({enabledFetch:e}){let t=(0,r.S2)().unwrapOr(null),[a]=(0,s.IT)(n({planKey:t?.key,enabledFetch:e}),{enabled:!!t});return a.transform(e=>e?.payment_methods??[])}},665737(e,t,a){a.d(t,{Wc:()=>i,XO:()=>n,cq:()=>d,jO:()=>l});var s,r,i=((s=i||{}).ADDRESS_VALIDATION_ERROR="address-validation-error",s.MISSING_ADDRESS_ERROR="missing-address-error",s.CURRENCY_VALIDATION_ERROR="currency-validation-error",s.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",s.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",s.PAYMENT_METHOD_VALIDATION_ERROR="payment-method-validation-error",s.SAVE_PAYMENT_METHOD_ERROR="save-payment-method-error",s.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",s),n=((r=n||{}).INIT_SAVED_PAYMENT_METHODS="init_saved_payment_methods",r.SET_ERRORS="set_errors",r.SET_STRIPE_PAYMENT_METHOD="set_stripe_payment_method",r.SET_SAVED_PAYMENT_METHOD="set_saved_payment_method",r.TOGGLE_DIFFERENT_SHIPPING_ADDRESS="toggle_different_shipping_address",r.TOGGLE_USE_SAVED_PAYMENT_METHOD="toggle_use_saved_payment_method",r.UPDATE_BILLING_ADDRESS="update_billing_address",r.UPDATE_NAME_ON_PAYMENT_METHOD="update_name_on_payment_method",r.UPDATE_REGIONAL_VAT_GST_ID="update_regional_vat_gst_id",r.UPDATE_SHIPPING_ADDRESS="update_shipping_address",r.UPDATE_VAT_GST_ID="update_vat_gst_id",r);function l(e){var t;return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof(t=e.type)&&Object.values(n).includes(t)}function d(e){return Array.isArray(e)&&e.every(o)}function o(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(i).includes(t)&&"message"in e&&"string"==typeof e.message}},253701(e,t,a){a.d(t,{H:()=>y,I:()=>g});var s=a(105652),r=a(706354),i=a(850159),n=a(181645),l=a(838719),d=a(462198),o=a(18526),c=a(331850),m=a(173680),u=a(53791),_=a(494104),x=a(559365),p=a(430946),h=a(675063);let g="stripe-payment-element",y=(0,x.Do)(e=>{let t=(0,c.S2)().unwrapOr(null),[a,x]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[v,E]=(0,s.useState)(null),[S,T]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[b,A]=(0,s.useState)(!1),[I,w]=(0,s.useState)(void 0),C=(0,s.useRef)(null),k=(0,l.default)().user_data,R=(0,p.X)(),P=(0,p.W)(k);async function D(){if(C.current)return C.current;try{let t=(await (0,m.eV)()).elements({mode:"setup",paymentMethodCreation:"manual",currency:e.currency,paymentMethodConfiguration:e.stripePaymentMethodConfiguration,...R});return C.current=t,t}catch(e){(0,n.sx)("setup_intent_creation_failed",U(),{forwardToDatadog:!0}),M({error:e,code:h.Or.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,i.t)("payments.errors.error_loading_payment_form")})}}async function O(e){if(v&&!j)return{succeeded:!0,clientSecret:v,customerId:y};try{let{data:{meta:{client_secret:t,customer_id:a}}}=await _.m.createSetupIntent(e);return(0,n.sx)("setup_intent_creation_attempted",U(),{forwardToDatadog:!0}),E(t),f(a),N(!1),{succeeded:!0,clientSecret:t,customerId:a}}catch(e){return{succeeded:!1,clientSecret:null,customerId:null}}}function M({error:e,code:t,message:a,extra:s={}}){x({code:t,message:a}),(0,u.At)(e)||(0,u.VT)(e)||(0,u.um)(e)||(0,d.$D)(r.FigmaTeam.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,d.V5)((0,m.pV)(e)),...s}:s;return t.setExtras(a),(0,u.q1)(e)&&(t.setTag("stripe_error_type",e.type),(0,u.At)(e)&&t.setLevel("warning")),t})}function U(){return{planParentId:t?.key.parentId,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!0}}function B(){return document.querySelectorAll("[name*=privateStripeFrame]").length}function L(e){let t;return((0,u.At)(e)||(0,u.VT)(e)||(0,u.um)(e))&&(t=e.message),t??(0,i.t)("payments.errors.confirm_setup_error")}return(0,s.useEffect)(()=>{let t=C.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await D();if(!t){let e={code:h.Or.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,i.t)("payments.errors.error_loading_payment_form")};return M({...e,error:"Failed to get stripe elements"}),e}let a=t.getElement("payment")??t.create("payment",P);return a.on("ready",t=>{(0,n.sx)("Payment Form Loaded",{...U(),paymentMethod:I??u.lB.CARD,availableCurrencies:(0,o.B9)()}),I||w(u.lB.CARD),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,n.sx)("Choose Payment Method Type",{...U(),paymentMethod:a}),w(a),e.change?.(t)}),a.mount(`#${g}`),null},unmountPaymentElement:async()=>{let e=await D();e?.getElement("payment")?.unmount()},createPaymentMethod:async e=>{if(!C.current){let e={code:h.Or.MISSING_STRIPE_ELEMENTS_ERROR,message:(0,i.t)("payments.errors.confirm_setup_error")};return M({...e,error:"Cannot create payment method without Stripe elements"}),e}x(null);let{error:t}=await C.current.submit();if(t){let e=L(t),a={code:h.Or.STRIPE_ELEMENTS_VALIDATION_ERROR,message:e};return x(a),a}(0,n.sx)("Add payment method",{...U(),paymentMethod:I},{forwardToDatadog:!0});let a=await (0,m.eV)(),{error:s,paymentMethod:r}=await a.createPaymentMethod({elements:C.current,params:{billing_details:e}});if(s){let e={code:h.Or.CREATE_PAYMENT_METHOD_ERROR,message:L(s)};return M({...e,error:s}),e}return r},confirmIntent:async({paymentMethod:e,createIntentParams:t})=>{if(!e){let e={code:h.Or.MISSING_PAYMENT_METHOD_ERROR,message:(0,i.t)("payments.errors.confirm_setup_error")};return M({...e,error:"Payment method is required to confirm intent"}),e}let[a,{succeeded:s,clientSecret:r,customerId:l}]=await Promise.all([(0,m.eV)(),O(t)]);if(!s){let e={code:h.Or.CREATE_INTENT_ERROR,message:(0,i.t)("payments.errors.confirm_setup_error")};return M({...e,error:"Failed to create Setup Intent to confirm"}),e}let d=B(),o=setInterval(()=>{d!==B()&&((0,n.sx)("Stripe Authentication Modal"),clearInterval(o),A(!0))},1e3),{error:c,setupIntent:u}=await a.confirmSetup({clientSecret:r,redirect:"if_required",confirmParams:{return_url:`https://${window.location.host}`,payment_method:e}});if(clearInterval(o),c){let e={code:h.Or.CONFIRM_INTENT_ERROR,message:L(c)};return M({...e,error:c}),e}if("succeeded"!==u.status){let e={code:h.Or.CONFIRM_INTENT_ERROR,message:(0,i.t)("payments.errors.confirm_setup_error")};return M({...e,error:`SetupIntent confirmed with status ${u.status}`}),e}{let e={...u,customer:l};return f(l),T(u),N(!0),e}},paymentMethodType:I,error:a,stripeIntent:S,stripeCustomerId:y,is3ds:b}})},675063(e,t,a){a.d(t,{Or:()=>n,hB:()=>l,wn:()=>i});var s,r,i=((s=i||{}).PRO_UPGRADE="pro_upgrade",s.PRO_CHANGE_PAYMENT="pro_change_payment",s.ORG_UPGRADE="org_upgrade",s.ORG_CHANGE_PAYMENT="org_change_payment",s.COMMUNITY_CHECKOUT="community_checkout",s),n=((r=n||{}).CREATE_PAYMENT_METHOD_ERROR="create-payment-method-error",r.CREATE_INTENT_ERROR="create-intent-error",r.CONFIRM_INTENT_ERROR="confirm-intent-error",r.MISSING_STRIPE_ELEMENTS_ERROR="missing-stripe-elements-error",r.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",r.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",r.STRIPE_ELEMENTS_VALIDATION_ERROR="stripe-elements-validation-error",r);function l(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(n).includes(t)&&"message"in e&&"string"==typeof e.message}},1437(e,t,a){a.d(t,{K:()=>o});var s=a(239976),r=a(850159),i=a(523340),n=a(27410),l=a(289886),d=a(399374);function o(){return(0,s.jsx)(n.u,{useOriginalSrcFills:!0,imageClassName:"request_error_interstitial--warningIcon--tNdC2",imageSrc:d.A,headerText:(0,r.t)("request_error_interstitial.there_was_an_error"),children:(0,s.jsx)(i.vd,{className:l.s.mt24.$,type:"submit",onClick:()=>{window.location.href=window.location.href},children:(0,r.tx)("request_error_interstitial.refresh_and_try_again")})})}},222677(e,t,a){a.d(t,{L:()=>S});var s=a(239976),r=a(105652),i=a(645186),n=a(393106),l=a(850159),d=a(224542),o=a.n(d),c=a(463592),m=a(921424),u=a(289886),_=a(863825),x=a(610724),p=a(612883),h=a(38900),g=a(936652),y=a(145334),f=a(392255),v=a(103313);let E=r.memo(function(e){let t=(0,i.wA)(),{displayName:a,legalName:d}=e,[g,E]=r.useState(a||""),[S,T]=r.useState(d||""),{isLoading:j,withLoading:N}=(0,x.R)(),b=()=>{t(h.Ce())},A=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,c.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:g}}},y.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:g})):await (0,c.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:g}}},y.$.updateTeamName({teamId:e.team.id,updatedDisplayName:g,updatedLegalName:S}))}catch(s){let a=e.canSeeBillingAddressExp?(0,l.t)("update_company_details_modal.update_display_name.error"):(0,l.t)("update_company_details_modal.update_team_name.error");throw t(_.s.error((0,n.J)(s)||a)),s}else t(p.yy({legalName:S,displayName:g}));b()})};return(0,s.jsx)(f.OJ,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:A,className:u.s.p16.$,children:[(0,s.jsxs)("div",{className:u.s.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:u.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:u.s.block.colorText.$,children:(0,l.tx)("pro_cart.review.edit_details.team_name_label")}),(0,l.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(m.ks,{value:g,id:"teamName",onChange:e=>{E(e.target.value)},dataTestId:"company-team-name",className:u.s.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:u.s.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:u.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:u.s.block.colorText.$,children:(0,l.tx)("pro_cart.review.edit_details.company_name_label")}),(0,l.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(m.ks,{value:S,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:u.s.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:o()(v.v0,v.hF),children:[(0,s.jsx)(m.tM,{onClick:b,disabled:j,children:(0,l.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(m.vd,{className:v.pL,disabled:j,type:"submit",children:(0,l.tx)("pro_cart.review.edit_details.save")})]})]})})}),S=(0,g.Ju)(E,"UpdateCompanyDetailsModal")},190797(e,t,a){a.d(t,{Mt:()=>I,OI:()=>A,Ud:()=>N});var s=a(105652),r=a(645186),i=a(850159),n=a(335127),l=a(181645),d=a(59762),o=a(838719),c=a(116682),m=a(863825),u=a(994361),_=a(985373),x=a(436759),p=a(612883),h=a(222368),g=a(795210),y=a(487817),f=a(366434),v=a(559365),E=a(710674),S=a(508295),T=a(943634),j=a(523454);let N=(0,v.Do)(({teamId:e,canSeeBillingAddressExp:t})=>{let a,x=(0,r.wA)(),g=(0,r.d4)(e=>e.loadingState),v=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),N=(0,r.d4)(e=>e.selectedView),A=(0,S.iZ)(),[w,C]=(0,s.useState)(!0),k=(0,n.ZC)(e),R=(0,u.s)(),P=h.Xw.loadingKeyForPayload({teamId:e}),D=(0,T.GH)(g,P),O=(0,o.getPaymentFlowData)();(0,s.useEffect)(()=>{x(h.Xw({teamId:e}))},[x,e]);let M=(a=(0,r.wA)(),(0,s.useCallback)(e=>{(0,l.sx)("Loaded Saved Cart State",{teamId:e.teamId,lastSavedAt:e.updatedAt}),a(p.eK(e))},[a]));return(0,s.useEffect)(()=>{async function a(t){try{let a=await c.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});x(p.i({taxes:a.data.meta.estimate}))}catch(e){x(m.s.error((0,i.t)("payments.errors.estimate_calculation_error"))),x(_.sf({...N,paymentStep:f.Vv.PAYMENT_AND_ADDRESS}))}C(!1)}if(void 0===k||k===e||w||(I(x),C(!0)),(!e||D)&&w){let r=(0,j.BR)(v,A),i=Object.entries(r).map(([e,t])=>{if((0,d.nD)(t.email||""))return e}).filter(e=>!!e);x(p.M2({figmaEmailTeamUsers:i}));let n=(0,E.lX)({teamId:e,userId:A?.id});if(n){n.editorStatusChanges=(0,E.nt)(n.editorStatusChanges,r);let d=(0,j.Ky)(r,n.editorStatusChanges,y._Y.DESIGN),o=(0,j.Ky)(r,n.editorStatusChanges,y._Y.WHITEBOARD),c=d+n.numEmptyDesignSeats,m=o+n.numEmptyWhiteboardSeats;if(M({numDesignEditors:c,numWhiteboardEditors:m,editorStatusChanges:n.editorStatusChanges,teamId:e,updatedAt:n.updatedAt,cartSelections:n.cartSelections}),O){var s;let e=(s=O.billing_period,f.tY[f.tY[s]]),r=t?{billing_address:O.billing_address,shipping_address:O.shipping_address||O.billing_address}:null;x(p.Lo({billingPeriod:e})),x(p.$h({vatGstId:O.vat_gst_id})),x(p.yy({legalName:O.customer_legal_name||O.company_name,displayName:O.display_name})),x(p.Ef({regionalVatGstId:O.regional_vat_gst_id})),a({address:O.address,editor_status_changes:n.editorStatusChanges,figma_email_team_users:i,selected_currency:O.currency,annual_quantity:(0,j.fD)(e,c),monthly_quantity:(0,j.Rq)(e,c),annual_whiteboard_quantity:(0,j.fD)(e,m),monthly_whiteboard_quantity:(0,j.Rq)(e,m),vat_gst_id:O.vat_gst_id,regional_vat_gst_id:O.regional_vat_gst_id,...r})}else"teamUpgrade"===N.view&&N.paymentStep===f.Vv.CONFIRM_PAY&&N.billingPeriod!==f.tY.STUDENT&&l.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:R,teamId:e??void 0}),C(!1)}else C(!1)}},[x,D,v,k,e,A,w,O,N,M,t,R]),(0,s.useEffect)(()=>()=>{e&&b(x,e)},[x,e]),w}),b=(0,v.Do)((e,t)=>{let a=h.Xw.loadingKeyForPayload({teamId:t});e(x.yH({key:a}))});function A(e){e(p.qU({cartSelections:{countBySeatType:g.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function I(e){e(p.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(p.js({numDesignEditors:0})),e(p.Az({numWhiteboardEditors:0}))}},120657(e,t,a){a.d(t,{K:()=>o,s:()=>d});var s=a(239976),r=a(865804),i=a(824234),n=a(289886),l=a(660983);function d(e){return(0,s.jsxs)("div",{className:n.s.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--S58e-",children:[(0,s.jsx)(r.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--ELonE",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(i.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>'})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--U5yb4",onFocus:e=>e.target.select()}),(0,s.jsx)(r.$z,{disabled:e.numSeats>=(e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ixQhQ",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(i.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>'})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--BI1Ev",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--jl0fh seat_counter--headerText--BI1Ev",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:l.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})}function o(e,t){return a=>{if(""===a.target.value)return void e(0);let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},548424(e,t,a){a.d(t,{I:()=>i});var s=a(239976),r=a(105652);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ajy0g",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--MpPGy"}),(0,s.jsx)("div",{className:"persisted_error--message--J6Pdj",children:this.props.message})]})}}},530705(e,t,a){a.d(t,{o:()=>n});var s=a(239976),r=a(105652),i=a(497544);function n(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.k,{}),children:e.children})}},610724(e,t,a){a.d(t,{R:()=>r});var s=a(105652);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}}}]);

//# debugId=9d96d368-c723-53a7-8b83-1d8bba60d8b8

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/e328b78c5f3bbea74feb55a0ef18c32bf19d8f79/c5e2cae0-7bf762684413b253.min.js.map