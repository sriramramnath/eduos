{"version":3,"sources":["webpack:///./src/ui/src/helpers/isAnnotationRenderedInDisplayMode.js","webpack:///./src/ui/src/helpers/applyRedactions.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss?91c4","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.js","webpack:///./src/ui/src/components/AnnotationStylePopup/index.js","webpack:///./src/ui/src/components/AnnotationPopup/AnnotationPopup.scss?196b","webpack:///./src/ui/src/components/CalibrationPopup/CalibrationPopup.scss?180a","webpack:///./src/ui/src/components/CalibrationPopup/CalibrationPopup.scss","webpack:///./src/ui/src/components/AnnotationPopup/AnnotationPopup.scss","webpack:///./src/ui/src/components/DatePicker/DatePicker.js","webpack:///./src/ui/src/components/DatePicker/index.js","webpack:///./src/ui/src/components/CalibrationPopup/CalibrationPopup.js","webpack:///./src/ui/src/components/CalibrationPopup/index.js","webpack:///./src/ui/src/components/AnnotationPopup/AnnotationPopup.js","webpack:///./src/ui/src/components/AnnotationPopup/AnnotationPopupContainer.js","webpack:///./src/ui/src/components/AnnotationPopup/index.js"],"names":["isAnnotationRenderedInDisplayMode","core","annotation","isAnnotationInVisiblePages","getDisplayModeObject","getVisiblePages","includes","PageNumber","isContinuousDisplayMode","noop","annotations","onRedactionCompleted","arguments","length","undefined","activeDocumentViewerKey","dispatch","isWebViewerServerDocument","webViewerServerApply","webViewerApply","applyRedactions","then","results","url","downloadPdf","filename","includeAnnotations","externalURL","console","warn","warning","message","i18next","t","title","confirmBtnText","onConfirm","err","fireError","Promise","resolve","actions","showWarningMessage","api","content","__esModule","default","module","i","options","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","propTypes","PropTypes","array","isRequired","style","object","properties","isRedaction","bool","isFreeText","isEllipse","hasBackToMenu","onBackToMenu","func","AnnotationStylePopup","props","isMeasure","colorMapKey","showLineStyleOptions","hideSnapModeCheckbox","onResize","_useSelector2","_slicedToArray","useSelector","state","selectors","isElementDisabled","DataElements","ANNOTATION_STYLE_POPUP","isToolDefaultStyleUpdateFromAnnotationPopupEnabled","getActiveDocumentViewerKey","isDisabled","useDispatch","useTranslation","_useState2","useState","isAutoSizeFont","setAutoSizeFont","handleSliderChange","property","value","doneSliderChange","handleStyleChange","annotationManager","getAnnotationManager","adjustFreeTextBoundingBox","redrawAnnotation","Core","Annotations","WidgetAnnotation","refresh","handlePropertyChange","setAnnotationStyles","_defineProperty","setToolStyles","ToolName","handleRichTextStyleChange","updateAnnotationRichTextStyle","handleLineStyleChange","section","lineStyle","setStartStyle","setEndStyle","dashes","split","shift","trigger","handleClick","e","isMobile","target","currentTarget","closeElement","ANNOTATION_POPUP","className","getClassName","React","createElement","Measure","_ref","measureRef","data-element","onClick","ref","ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER","ActionButton","dataElement","ANNOTATION_STYLE_POPUP_BACK_BUTTON","label","img","StylePopup","isFreeTextAutoSize","onFreeTextSizeToggle","handleFreeTextAutoSizeToggle","onStyleChange","onSliderChange","onPropertyChange","disableSeparator","onRichTextStyleChange","onLineStyleChange","r","Symbol","n","iterator","o","toStringTag","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","DatePicker","onDatePickerShow","dateRef","useRef","dateContainerRef","useEffect","datePicker","_ref2","_callee","_context","createDatePicker","field","current","container","format","getDateFormat","apply","_next","_throw","getDatePicker","destroy","Scale","parseMeasurementContentsByAnnotation","factor","axis","getLineLength","CalibrationPropType","shape","arrayOf","CalibrationPopup","_Scale$worldScale","_Scale$worldScale2","getMeasurementUnits","getCalibrationInfo","shallowEqual","measurementUnits","_useSelector2$","tempScale","isFractionalUnit","defaultUnit","valueDisplay","setValueDisplay","inputRef","unitTo","worldScale","unit","unitToOptions","to","filter","fractionalUnits","isFractionalUnitsToggleDisabled","valueInputType","inputValueClass","classNames","updateTempScale","scaleValue","scaleUnit","pageUnit","currentDistance","currentScale","newRatio","pageScale","defaultPageUnit","metricUnits","defaultPageValue","convertUnit","updateCalibrationInfo","concat","setValue","_Scale$worldScale3","updateValueDisplay","_Scale$worldScale5","newValueDisplay","getFormattedValue","tempScaleRef","onAnnotationChanged","action","_Scale$worldScale6","currentUnit","addEventListener","removeEventListener","deleteAnnotations","activeElement","id","htmlFor","type","min","onChange","inputValue","trim","inFractionalRegex","test","result","parseInFractional","ftInFractionalRegex","parseFtInFractional","ftInDecimalRegex","parseFtInDecimal","floatRegex","parseFloat","onBlur","placeholder","hintValues","Tooltip","Dropdown","items","currentSelectionKey","onClickItem","_Scale$worldScale4","labelledById","Choice","isSwitch","leftLabel","disabled","checked","isIE","isOpen","isRightClickMenu","isNotesPanelOpenOrActive","isRichTextPopupOpen","isLinkModalOpen","isWarningModalOpen","isContextMenuPopupOpen","isVisible","focusedAnnotation","popupRef","any","position","showViewFileButton","onViewFile","showCommentButton","onCommentAnnotation","isDateFreeTextCanEdit","isDatePickerOpen","handleDateChange","isCalibrationPopupOpen","showEditStyleButton","isStylePopupOpen","openEditStylePopup","closeEditStylePopup","annotationStyle","showContentEditButton","onEditContent","openContentEditDeleteWarningModal","showClearSignatureButton","onClearAppearanceSignature","showRedactionButton","onApplyRedaction","showGroupButton","onGroupAnnotations","showUngroupButton","onUngroupAnnotations","showFormFieldButton","onOpenFormField","showDeleteButton","onDeleteAnnotation","showLinkButton","hasAssociatedLink","linkAnnotationToURL","showFileDownloadButton","downloadFileAttachment","showAudioPlayButton","handlePlaySound","showCalibrateButton","onOpenCalibration","showAlignButton","onOpenAlignmentModal","customizableUI","toggleStylePanel","isInReadOnlyMode","AnnotationPopup","_document$activeEleme","_focusedAnnotation$is","shortCutKeysFor3DVisible","setShortCutKeysFor3DVisible","commentButtonLabel","commentButtonImg","show3DShortCutButton","Model3DAnnotation","isRectangle","RectangleAnnotation","EllipseAnnotation","isPolygon","PolygonAnnotation","FreeTextAnnotation","getIntent","Intent","FreeText","FreeTextCallout","RedactionAnnotation","mapAnnotationToKey","getDataWithKey","mapToolNameToKey","hasLineEndings","isInstanceActive","getRootNode","StrokeStyle","isContentEdit","isContentEditPlaceholder","isReadOnlySignature","SignatureWidgetAnnotation","fieldFlags","get","WidgetFlags","READ_ONLY","error","StartLineStyle","getStartStyle","EndLineStyle","getEndStyle","_richTextStyles$","_ref3","_richTextStyles$2","_richTextStyles$3","_richTextStyles$3$tex","_richTextStyles$4","_richTextStyles$4$tex","_richTextStyles$0$tex","_richTextStyles$5","_richTextStyles$5$tex","richTextStyles","getRichTextStyle","calculatedFontSize","getCalculatedFontSize","Font","FontSize","TextAlign","TextVerticalAlign","bold","italic","underline","strikeout","OverlayText","annotationPopup","Popup","open","closed","stylePopupOpen","_objectSpread","visibility","FocusTrap","locked","CustomizablePopup","childrenClassName","isNotClickableSelector","CALIBRATION_POPUP_BUTTON","renderPopup","Draggable","cancel","_asyncToGenerator","Array","isArray","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","_unsupportedIterableToArray","_nonIterableRest","ToolNames","Tools","selectedMultipleAnnotations","canModify","focusedAnnotationStyle","setIsStylePopupOpen","setDatePickerOpen","isDatePickerMount","setDatePickerMount","includesFormFieldAnnotation","stylePopupRepositionFlag","setStylePopupRepositionFlag","closePopup","widgetThatOpenedPopupRef","AnnotationPopupContainer","isElementOpen","CONTEXT_MENU_POPUP","isRightClickAnnotationPopupEnabled","isNotesPanelDisabled","NOTES_PANEL","isAnnotationStylePopupDisabled","isInlineCommentingDisabled","INLINE_COMMENT_POPUP","isNotesPanelOpen","LINK_MODAL","WARNING_MODAL","isMultiTab","getIsMultiTab","tabManager","getTabManager","tabs","getTabs","notesInLeftPanel","getNotesInLeftPanel","leftPanelOpen","LEFT_PANEL","activeLeftPanel","getActiveLeftPanel","isAnyCustomPanelOpen","featureFlags","getFeatureFlags","isStylePanelOpen","STYLE_PANEL","isStylePanelDisabled","stylePanelInFlyout","getIsPanelInFlyout","ITEM_RENDER_PREFIXES","MULTI_SELECT_STYLE_PANEL_FLYOUT","isStylePanelFlyoutOpen","left","top","setPosition","_useState4","setIsVisible","_useState6","setCalibrationPopupOpen","isFocusedAnnotationSelected","isAnnotationSelected","annotManager","useOnClickOutside","useCallback","_getRootNode$querySel","notesPanel","querySelector","clickedInNotesPanel","contains","clickedInLinkModal","stylePanelFlyout","clickedInStylePanelFlyout","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","handleResize","debounce","visiblePages","isFocusableInCurrentDisplayMode","getAnnotationPopupPositionBasedOn","annotationInPage","getSelectedAnnotations","find","setPopupPosition","handleVisibility","sixtyFramesPerSecondIncrement","useLayoutEffect","CALIBRATION_MEASUREMENT","acceptFormats","getHashParameters","SupportedFileFormats","SERVER","CLIENT","FileAttachmentAnnotation","mimeTypeToExtension","getFileMetadata","mimeType","metaData","fileAttachmentTab","_t","_t2","_t3","tab","setActiveTab","getFileData","extension","saveCurrentActiveTabState","setActive","addTab","popup","associatedSignatureAnnotation","getAssociatedSignatureAnnotation","handleKeyDown","event","_widgetThatOpenedPopu","key","preventDefault","stopPropagation","deselectAnnotation","isSignedByAppearance","clearSignature","deleteAnnotation","selectedAnnotations","numberOfSelectedAnnotations","multipleAnnotationsSelected","canModifyContents","numberOfGroups","getNumberOfGroups","canGroup","canUngroup","isAppearanceSignature","getIsReadOnly","CROP","hasStyle","keys","toolsWithNoStyling","VIDEO_REDACTION","VIDEO_AND_AUDIO_REDACTION","AUDIO_REDACTION","PushButtonWidgetAnnotation","isFullPDFEnabled","getContentEditType","ContentEdit","Types","TEXT","_callee2","_context2","isAnnotationRedactable","primaryAnnotation","selectedAnnotation","InReplyTo","isInFormFieldCreationMode","getFormFieldCreationManager","toolsThatCantHaveLinks","SIGNATURE","REDACTION","REDACTION2","REDACTION3","REDACTION4","STICKY","STICKY2","STICKY3","STICKY4","SoundAnnotation","LineAnnotation","_ref4","_callee3","annot","_yield$annot$getFullF","fileData","fileName","_context3","getFullFileMetadata","saveAs","_x","hasAudioData","contentEditManager","getContentEditManager","isInContentEditMode","endContentEditMode","triggerNoteEditing","openElement","text","setNoteContents","updateAnnotation","isDatePickerShowed","groupAnnotations","ungroupAnnotations","disableElement","PRIORITY_THREE","FORM_FIELD_EDIT_POPUP","FORM_FIELD_PANEL","getGroupedLinkAnnotations","linkAnnot","index","TextHighlightAnnotation","Opacity","setActiveSoundAnnotation","triggerResetAudioPlaybackPosition","CALIBRATION_MODAL","openFlyout","ANNOTATION_ALIGNMENT_POPUP"],"mappings":"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","file":"chunks/chunk.40.js","sourcesContent":["export const isAnnotationRenderedInDisplayMode = (core, annotation) => {\n  const visiblePages = core.getDisplayModeObject().getVisiblePages();\n  const isAnnotationInVisiblePages = visiblePages.includes(annotation.PageNumber);\n  const isFocusableInCurrentDisplayMode = core.isContinuousDisplayMode() || (!core.isContinuousDisplayMode() && isAnnotationInVisiblePages);\n  return isFocusableInCurrentDisplayMode;\n};","import core from 'core';\nimport i18next from 'i18next';\n\nimport actions from 'actions';\nimport { fireError } from 'helpers/fireEvent';\nimport downloadPdf from 'helpers/downloadPdf';\n\nfunction noop() { }\n\nexport default (annotations, onRedactionCompleted = noop, activeDocumentViewerKey = 1) => (dispatch) => {\n  if (core.isWebViewerServerDocument()) {\n    // when are using Webviewer Server, it'll download the redacted document\n    return webViewerServerApply(annotations, dispatch, activeDocumentViewerKey);\n  }\n  return webViewerApply(annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey);\n};\n\nconst webViewerServerApply = (annotations, dispatch, activeDocumentViewerKey) => core.applyRedactions(annotations, activeDocumentViewerKey).then((results) => {\n  if (results && results.url) {\n    return downloadPdf(dispatch, {\n      filename: 'redacted.pdf',\n      includeAnnotations: true,\n      externalURL: results.url,\n    });\n  }\n  console.warn('WebViewer Server did not return a valid result');\n});\n\nconst webViewerApply = (annotations, onRedactionCompleted, dispatch, activeDocumentViewerKey) => {\n  const message = i18next.t('warning.redaction.applyMessage');\n  const title = i18next.t('warning.redaction.applyTile');\n  const confirmBtnText = i18next.t('action.apply');\n\n  const warning = {\n    message,\n    title,\n    confirmBtnText,\n    onConfirm: () => {\n      core.applyRedactions(annotations, activeDocumentViewerKey)\n        .then(() => {\n          onRedactionCompleted();\n        })\n        .catch((err) => fireError(err));\n      return Promise.resolve();\n    },\n  };\n\n  return dispatch(actions.showWarningMessage(warning));\n};\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach((el) => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach((el) => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function() {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-inline-end:var(--padding-medium);margin-inline-start:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Measure from 'react-measure';\nimport { useTranslation } from 'react-i18next';\nimport StylePopup from 'components/StylePopup';\nimport ActionButton from 'components/ActionButton';\nimport core from 'core';\nimport getClassName from 'helpers/getClassName';\nimport setToolStyles from 'helpers/setToolStyles';\nimport { isMobile } from 'helpers/device';\nimport adjustFreeTextBoundingBox from 'helpers/adjustFreeTextBoundingBox';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport handleFreeTextAutoSizeToggle from 'src/helpers/handleFreeTextAutoSizeToggle';\n\nimport './AnnotationStylePopup.scss';\n\nconst propTypes = {\n  annotations: PropTypes.array.isRequired,\n  style: PropTypes.object.isRequired,\n  properties: PropTypes.object.isRequired,\n  isRedaction: PropTypes.bool,\n  isFreeText: PropTypes.bool,\n  isEllipse: PropTypes.bool,\n  hasBackToMenu: PropTypes.bool,\n  onBackToMenu: PropTypes.func,\n};\n\nconst AnnotationStylePopup = (props) => {\n  const {\n    annotations,\n    style,\n    isRedaction,\n    isFreeText,\n    isEllipse,\n    isMeasure,\n    colorMapKey,\n    showLineStyleOptions,\n    properties,\n    hideSnapModeCheckbox,\n    onResize,\n    hasBackToMenu,\n    onBackToMenu\n  } = props;\n\n  const [\n    isDisabled,\n    isToolDefaultStyleUpdateFromAnnotationPopupEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP),\n    selectors.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state),\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const [isAutoSizeFont, setAutoSizeFont] = useState(properties.isAutoSizeFont);\n\n  const handleSliderChange = (property, value, doneSliderChange) => {\n    if (doneSliderChange) {\n      handleStyleChange();\n    }\n\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotations.forEach((annotation) => {\n      annotation[property] = value;\n      if (property === 'StrokeThickness') {\n        adjustFreeTextBoundingBox(annotation);\n      }\n      annotationManager.redrawAnnotation(annotation);\n\n      if (annotation instanceof window.Core.Annotations.WidgetAnnotation) {\n        annotation.refresh();\n      }\n    });\n  };\n\n  const handlePropertyChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n      if (property === 'FontSize' || property === 'Font') {\n        adjustFreeTextBoundingBox(annotation);\n      }\n    });\n  };\n\n  const handleStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n    });\n  };\n\n  const handleRichTextStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.updateAnnotationRichTextStyle(annotation, { [property]: value }, activeDocumentViewerKey);\n    });\n  };\n\n  const handleLineStyleChange = (section, value) => {\n    annotations.forEach((annotation) => {\n      let lineStyle = '';\n      if (section === 'start') {\n        annotation.setStartStyle(value);\n        lineStyle = 'StartLineStyle';\n      } else if (section === 'end') {\n        annotation.setEndStyle(value);\n        lineStyle = 'EndLineStyle';\n      } else if (section === 'middle') {\n        const dashes = value.split(',');\n        const style = dashes.shift();\n        annotation['Style'] = style;\n        annotation['Dashes'] = dashes;\n        lineStyle = 'StrokeStyle';\n      }\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, lineStyle, value);\n      }\n\n      core.getAnnotationManager(activeDocumentViewerKey).redrawAnnotation(annotation);\n    });\n\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [annotations, 'modify', {}]);\n  };\n\n  const handleClick = (e) => {\n    if (isMobile() && e.target === e.currentTarget) {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    }\n  };\n\n  const handleResize = () => {\n    onResize && onResize();\n  };\n\n  const className = getClassName('Popup AnnotationStylePopup', props);\n\n  return isDisabled ? null : (\n    <Measure\n      onResize={handleResize}\n    >\n      {({ measureRef }) => (\n        <div\n          className={className}\n          data-element={DataElements.ANNOTATION_STYLE_POPUP}\n          onClick={handleClick}\n          ref={measureRef}\n        >\n          {hasBackToMenu &&\n            <div\n              className=\"back-to-menu-container\"\n              data-element={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER}\n            >\n              <ActionButton\n                className=\"back-to-menu-button\"\n                dataElement={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON}\n                label={t('action.backToMenu')}\n                img=\"icon-chevron-left\"\n                onClick={onBackToMenu}\n              />\n            </div>\n          }\n          {/* Do not show checkbox for ellipse as snap mode does not exist for it */}\n          <StylePopup\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\n            colorMapKey={colorMapKey}\n            style={style}\n            isFreeText={isFreeText}\n            isFreeTextAutoSize={isAutoSizeFont}\n            onFreeTextSizeToggle={() => handleFreeTextAutoSizeToggle(annotations[0], setAutoSizeFont, isAutoSizeFont)}\n            isEllipse={isEllipse}\n            isMeasure={isMeasure}\n            onStyleChange={handleStyleChange}\n            onSliderChange={handleSliderChange}\n            onPropertyChange={handlePropertyChange}\n            disableSeparator\n            properties={properties}\n            onRichTextStyleChange={handleRichTextStyleChange}\n            isRedaction={isRedaction}\n            showLineStyleOptions={showLineStyleOptions}\n            onLineStyleChange={handleLineStyleChange}\n          />\n        </div>\n      )}\n    </Measure>\n  );\n};\n\nAnnotationStylePopup.propTypes = propTypes;\n\nexport default AnnotationStylePopup;\n","import AnnotationStylePopup from './AnnotationStylePopup';\n\nexport default AnnotationStylePopup;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach((el) => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach((el) => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function() {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./CalibrationPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach((el) => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach((el) => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function() {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.CalibrationPopup{display:flex;flex-direction:column;align-items:flex-start;padding:var(--padding-medium);width:220px;background:var(--gray-0);box-shadow:0 0 3px var(--gray-7);border-radius:4px}.CalibrationPopup .calibration-popup-label{font-weight:700;margin-bottom:var(--padding-medium)}.CalibrationPopup .pop-switch{margin-top:var(--padding-medium)}.CalibrationPopup .pop-switch.ui__choice--disabled .ui__choice__label{color:var(--gray-5)}.CalibrationPopup .input-container{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;grid-gap:var(--padding-small);gap:var(--padding-small);height:32px}.CalibrationPopup .input-container .input-field{width:94px;height:32px}.CalibrationPopup .input-container .input-field.invalid-value{border-color:red}.CalibrationPopup .input-container .input-field:focus{border:1px solid var(--blue-5)}.CalibrationPopup .input-container .input-field .Dropdown__wrapper{width:100%;height:100%}.CalibrationPopup .input-container .input-field .Dropdown__wrapper .Dropdown{height:100%;width:100%!important;text-align:start}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".open.AnnotationPopup{visibility:visible}.closed.AnnotationPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.AnnotationPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.AnnotationPopup:empty{padding:0}.AnnotationPopup .buttons{display:flex}.AnnotationPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button{width:42px;height:42px}}.AnnotationPopup .Button:hover{background:var(--popup-button-hover)}.AnnotationPopup .Button:hover:disabled{background:none}.AnnotationPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationPopup .Button .Icon{width:24px;height:24px}}.is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-inline-start:var(--padding-small);padding-inline-end:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.AnnotationPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.AnnotationPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.AnnotationPopup .Button.main-menu-button .Icon{margin-inline-end:10px}.is-vertical.AnnotationPopup .Button.main-menu-button span{white-space:nowrap}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.AnnotationPopup{position:fixed;border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background)}.AnnotationPopup.is-horizontal .container{display:inherit}.AnnotationPopup.is-vertical{flex-direction:column;align-items:flex-start}.shortCuts3D{position:relative}.shortCuts3D .closeButton{position:absolute;inset-inline-end:4px;padding:2px;cursor:pointer;width:20px;text-align:center}.shortCuts3D .row{padding:4px 0;margin:8px 26px 8px 16px}.shortCuts3D .row span{background:#e7ebee;padding:4px 8px;border-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst DatePicker = ({ onClick, annotation, onDatePickerShow }) => {\n  const dateRef = useRef(null);\n  const dateContainerRef = useRef(null);\n  useEffect(() => {\n    let datePicker;\n    const getDatePicker = async () => {\n      datePicker = await window.Core.createDatePicker({\n        field: dateRef.current,\n        onClick,\n        container: dateContainerRef.current,\n        format: annotation.getDateFormat(),\n      });\n      onDatePickerShow(true);\n    };\n    getDatePicker();\n\n    return () => {\n      datePicker.destroy();\n      datePicker = null;\n      onDatePickerShow(false);\n    };\n  }, []);\n  return (\n    <div data-element=\"datePickerContainer\">\n      <div ref={dateRef} />\n      <div ref={dateContainerRef}/>\n    </div>\n  );\n};\n\nDatePicker.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  annotation: PropTypes.object.isRequired,\n  onDatePickerShow: PropTypes.func.isRequired\n};\n\nexport default DatePicker;\n","import DatePicker from './DatePicker';\n\nexport default DatePicker;","import React, { useState, useEffect, useRef } from 'react';\nimport selectors from 'selectors';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport core from 'core';\nimport actions from 'actions';\nimport Choice from 'components/Choice';\nimport Dropdown from '../Dropdown';\nimport Tooltip from '../Tooltip';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport {\n  metricUnits,\n  convertUnit,\n  fractionalUnits,\n  floatRegex,\n  inFractionalRegex,\n  ftInFractionalRegex,\n  ftInDecimalRegex,\n  parseFtInDecimal,\n  parseInFractional,\n  parseFtInFractional,\n  hintValues\n} from 'constants/measurementScale';\nimport classNames from 'classnames';\n\nimport './CalibrationPopup.scss';\n\nconst Scale = window.Core.Scale;\n\nconst parseMeasurementContentsByAnnotation = (annotation) => {\n  const factor = annotation.Measure.axis[0].factor;\n  const unit = annotation.Scale[1][1];\n\n  switch (unit) {\n    case 'ft-in':\n      return (annotation.getLineLength() * factor) / 12;\n    case 'in':\n    default:\n      return annotation.getLineLength() * factor;\n  }\n};\n\nconst getDefaultPageUnit = (pageUnit) => {\n  if (pageUnit === 'pt') {\n    return 'pt';\n  }\n  if (metricUnits.includes(pageUnit)) {\n    return 'mm';\n  }\n  return 'in';\n};\n\nconst CalibrationPropType = {\n  annotation: PropTypes.shape({\n    Scale: PropTypes.arrayOf(PropTypes.array),\n  }),\n};\n\nconst CalibrationPopup = ({ annotation }) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n\n  const [\n    measurementUnits,\n    { tempScale, isFractionalUnit, defaultUnit }\n  ] = useSelector((state) => [\n    selectors.getMeasurementUnits(state),\n    selectors.getCalibrationInfo(state)\n  ], shallowEqual);\n  const [valueDisplay, setValueDisplay] = useState('');\n  const inputRef = useRef(null);\n\n  const unitTo = new Scale(tempScale).worldScale?.unit || 'mm';\n  const unitToOptions = isFractionalUnit ? measurementUnits.to.filter((unit) => fractionalUnits.includes(unit)) : measurementUnits.to;\n  const isFractionalUnitsToggleDisabled = !fractionalUnits.includes(unitTo);\n  const valueInputType = (isFractionalUnit || unitTo === 'ft-in') ? 'text' : 'number';\n  const inputValueClass = classNames('input-field', {\n    'invalid-value': !(tempScale && new Scale(tempScale).worldScale?.value > 0)\n  });\n\n  const updateTempScale = (scaleValue, scaleUnit) => {\n    const currentDistance = parseMeasurementContentsByAnnotation(annotation);\n    const currentScale = annotation.Scale;\n    const newRatio = currentDistance / currentScale[1][0];\n    const pageScale = [currentScale[0][0] * newRatio, currentScale[0][1]];\n    const defaultPageUnit = getDefaultPageUnit(scaleUnit);\n    const defaultPageValue = convertUnit(pageScale[0], pageScale[1], defaultPageUnit);\n    dispatch(actions.updateCalibrationInfo({ tempScale: `${defaultPageValue} ${defaultPageUnit} = ${scaleValue} ${scaleUnit}`, isFractionalUnit }));\n  };\n\n  const setValue = (scaleValue) => {\n    updateTempScale(scaleValue, new Scale(tempScale).worldScale?.unit);\n  };\n\n  const setUnitTo = (scaleUnit) => {\n    updateTempScale(new Scale(tempScale).worldScale?.value, scaleUnit);\n  };\n\n  const toggleFractionalUnits = () => {\n    dispatch(actions.updateCalibrationInfo({ tempScale, isFractionalUnit: !isFractionalUnit }));\n  };\n\n  const onValueInputChange = (e) => {\n    setValueDisplay(e.target.value);\n    const inputValue = e.target.value.trim();\n    if (!isFractionalUnit) {\n      if (unitTo === 'ft-in' && ftInDecimalRegex.test(inputValue)) {\n        const result = parseFtInDecimal(inputValue);\n        if (result > 0) {\n          setValue(result);\n          return;\n        }\n      } else if (floatRegex.test(inputValue)) {\n        const result = parseFloat(inputValue) || 0;\n        setValue(result);\n        return;\n      }\n    } else {\n      if (unitTo === 'in') {\n        if (inFractionalRegex.test(inputValue)) {\n          const result = parseInFractional(inputValue);\n          if (result > 0) {\n            setValue(result);\n            return;\n          }\n        }\n      } else if (unitTo === 'ft-in') {\n        if (ftInFractionalRegex.test(inputValue)) {\n          const result = parseFtInFractional(inputValue);\n          if (result > 0) {\n            setValue(result);\n            return;\n          }\n        }\n      }\n    }\n    setValue(0);\n  };\n\n  const onValueInputBlur = () => {\n    updateValueDisplay();\n  };\n\n  const updateValueDisplay = () => {\n    const scaleValue = new Scale(tempScale).worldScale?.value;\n    let newValueDisplay;\n    if (!isFractionalUnit && unitTo !== 'ft-in') {\n      newValueDisplay = `${scaleValue}`;\n    } else {\n      newValueDisplay = Scale.getFormattedValue(scaleValue, unitTo, isFractionalUnit ? 1 / 64 : 0.0001, false, true);\n    }\n    setValueDisplay(newValueDisplay || '');\n  };\n\n  const tempScaleRef = useRef(tempScale);\n  useEffect(() => {\n    tempScaleRef.current = tempScale;\n  }, [tempScale]);\n  useEffect(() => {\n    if (annotation) {\n      const value = parseMeasurementContentsByAnnotation(annotation);\n      const unit = annotation.Scale[1][1];\n      if (defaultUnit) {\n        updateTempScale(convertUnit(value, unit, defaultUnit), defaultUnit);\n      } else {\n        updateTempScale(value, unit);\n      }\n    }\n\n    const onAnnotationChanged = (annotations, action) => {\n      if (action === 'modify' && annotations.length === 1 && annotations[0] === annotation) {\n        const value = parseMeasurementContentsByAnnotation(annotation);\n        const unit = annotation.Scale[1][1];\n        const currentUnit = new Scale(tempScaleRef.current).worldScale?.unit;\n        if (currentUnit) {\n          updateTempScale(convertUnit(value, unit, currentUnit), currentUnit);\n        } else {\n          updateTempScale(value, unit);\n        }\n      }\n    };\n    core.addEventListener('annotationChanged', onAnnotationChanged);\n\n    return () => {\n      core.removeEventListener('annotationChanged', onAnnotationChanged);\n      core.deleteAnnotations([annotation]);\n    };\n  }, [annotation]);\n\n  useEffect(() => {\n    if (inputRef?.current !== document.activeElement) {\n      updateValueDisplay();\n    }\n  }, [tempScale, isFractionalUnit]);\n\n  return (\n    <div className=\"CalibrationPopup\" data-element=\"calibrationPopup\">\n      <label className=\"calibration-popup-label\" id='calibration-popup-label' htmlFor='calibration-popup-value'>{t('option.measurement.scaleModal.units')}</label>\n      <div className=\"input-container\">\n        <input\n          id='calibration-popup-value'\n          className={inputValueClass}\n          ref={inputRef}\n          type={valueInputType}\n          value={valueDisplay}\n          min='0'\n          onChange={onValueInputChange}\n          onBlur={onValueInputBlur}\n          placeholder={isFractionalUnit ? hintValues[unitTo] : (unitTo === 'ft-in' ? hintValues['ft-in decimal'] : '')}\n        />\n        <Tooltip content={'option.measurement.scaleModal.displayUnits'}>\n          <div className=\"input-field\">\n            <Dropdown\n              id=\"calibration-popup-units\"\n              dataElement=\"calibrationUnits\"\n              items={unitToOptions}\n              currentSelectionKey={unitTo}\n              onClickItem={setUnitTo}\n              labelledById='calibration-popup-label'\n            />\n          </div>\n        </Tooltip>\n      </div>\n      <Tooltip content={t('option.measurement.scaleModal.fractionUnitsTooltip')}>\n        <div>\n          <Choice\n            isSwitch\n            leftLabel\n            label={t('option.measurement.scaleModal.fractionalUnits')}\n            disabled={isFractionalUnitsToggleDisabled}\n            checked={isFractionalUnit}\n            id=\"calibration-popup-fractional-units\"\n            className=\"pop-switch\"\n            onChange={toggleFractionalUnits}\n          />\n        </div>\n      </Tooltip>\n    </div>\n  );\n};\n\nCalibrationPopup.propTypes = CalibrationPropType;\n\nexport default CalibrationPopup;\n","import CalibrationPopup from './CalibrationPopup';\n\nexport default CalibrationPopup;","import React, { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport FocusTrap from 'components/FocusTrap';\n\nimport ActionButton from 'components/ActionButton';\nimport AnnotationStylePopup from 'components/AnnotationStylePopup';\nimport DatePicker from 'components/DatePicker';\nimport CustomizablePopup from 'components/CustomizablePopup';\nimport CalibrationPopup from 'components/CalibrationPopup';\n\nimport { getDataWithKey, mapToolNameToKey, mapAnnotationToKey } from 'constants/map';\n\nimport DataElements from 'constants/dataElement';\n\nimport './AnnotationPopup.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst propTypes = {\n  isMobile: PropTypes.bool,\n  isIE: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  isRightClickMenu: PropTypes.bool,\n  isNotesPanelOpenOrActive: PropTypes.bool,\n  isRichTextPopupOpen: PropTypes.bool,\n  isLinkModalOpen: PropTypes.bool,\n  isWarningModalOpen: PropTypes.bool,\n  isContextMenuPopupOpen: PropTypes.bool,\n  isVisible: PropTypes.bool,\n\n  focusedAnnotation: PropTypes.object,\n  popupRef: PropTypes.any,\n  position: PropTypes.object,\n\n  showViewFileButton: PropTypes.bool,\n  onViewFile: PropTypes.func,\n\n  showCommentButton: PropTypes.bool,\n  onCommentAnnotation: PropTypes.func,\n  isDateFreeTextCanEdit: PropTypes.bool,\n  isDatePickerOpen: PropTypes.bool,\n  handleDateChange: PropTypes.func,\n  onDatePickerShow: PropTypes.func,\n  isCalibrationPopupOpen: PropTypes.bool,\n\n  showEditStyleButton: PropTypes.bool,\n  isStylePopupOpen: PropTypes.bool,\n  hideSnapModeCheckbox: PropTypes.bool,\n  openEditStylePopup: PropTypes.func,\n  closeEditStylePopup: PropTypes.func,\n  annotationStyle: PropTypes.object,\n  onResize: PropTypes.func,\n\n  showContentEditButton: PropTypes.bool,\n  onEditContent: PropTypes.func,\n  openContentEditDeleteWarningModal: PropTypes.func,\n\n  showClearSignatureButton: PropTypes.bool,\n  onClearAppearanceSignature: PropTypes.func,\n\n  showRedactionButton: PropTypes.bool,\n  onApplyRedaction: PropTypes.func,\n\n  showGroupButton: PropTypes.bool,\n  onGroupAnnotations: PropTypes.func,\n  showUngroupButton: PropTypes.bool,\n  onUngroupAnnotations: PropTypes.func,\n\n  showFormFieldButton: PropTypes.bool,\n  onOpenFormField: PropTypes.func,\n\n  showDeleteButton: PropTypes.bool,\n  onDeleteAnnotation: PropTypes.func,\n\n  showLinkButton: PropTypes.bool,\n  hasAssociatedLink: PropTypes.bool,\n  linkAnnotationToURL: PropTypes.func,\n\n  showFileDownloadButton: PropTypes.bool,\n  downloadFileAttachment: PropTypes.func,\n\n  showAudioPlayButton: PropTypes.bool,\n  handlePlaySound: PropTypes.func,\n\n  showCalibrateButton: PropTypes.bool,\n  onOpenCalibration: PropTypes.func,\n\n  showAlignButton: PropTypes.bool,\n  onOpenAlignmentModal: PropTypes.func,\n\n  customizableUI: PropTypes.bool,\n  toggleStylePanel: PropTypes.func,\n  isInReadOnlyMode: PropTypes.bool,\n};\n\nconst AnnotationPopup = ({\n  isMobile,\n  isIE,\n  isOpen,\n  isRightClickMenu,\n  isNotesPanelOpenOrActive,\n  isRichTextPopupOpen,\n  isLinkModalOpen,\n  isWarningModalOpen,\n  isContextMenuPopupOpen,\n  isVisible,\n\n  focusedAnnotation,\n  popupRef,\n  position,\n\n  showViewFileButton,\n  onViewFile,\n\n  showCommentButton,\n  onCommentAnnotation,\n  isDateFreeTextCanEdit,\n  isDatePickerOpen,\n  handleDateChange,\n  onDatePickerShow,\n  isCalibrationPopupOpen,\n\n  showEditStyleButton,\n  isStylePopupOpen,\n  hideSnapModeCheckbox,\n  openEditStylePopup,\n  closeEditStylePopup,\n  annotationStyle,\n  onResize,\n\n  showContentEditButton,\n  onEditContent,\n  openContentEditDeleteWarningModal,\n\n  showClearSignatureButton,\n  onClearAppearanceSignature,\n\n  showRedactionButton,\n  onApplyRedaction,\n\n  showGroupButton,\n  onGroupAnnotations,\n  showUngroupButton,\n  onUngroupAnnotations,\n\n  showFormFieldButton,\n  onOpenFormField,\n\n  showDeleteButton,\n  onDeleteAnnotation,\n\n  showLinkButton,\n  hasAssociatedLink,\n  linkAnnotationToURL,\n\n  showFileDownloadButton,\n  downloadFileAttachment,\n\n  showAudioPlayButton,\n  handlePlaySound,\n\n  showCalibrateButton,\n  onOpenCalibration,\n\n  showAlignButton,\n  onOpenAlignmentModal,\n\n  customizableUI,\n  toggleStylePanel,\n  isInReadOnlyMode,\n}) => {\n  const [t] = useTranslation();\n  const [shortCutKeysFor3DVisible, setShortCutKeysFor3DVisible] = useState(false);\n\n  const commentButtonLabel = isDateFreeTextCanEdit ? 'action.changeDate' : 'action.comment';\n  const commentButtonImg = isDateFreeTextCanEdit ? 'icon-tool-fill-and-sign-calendar' : 'icon-header-chat-line';\n  const show3DShortCutButton = !isInReadOnlyMode && focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation && !isMobile;\n  const isRectangle = focusedAnnotation instanceof window.Core.Annotations.RectangleAnnotation;\n  const isEllipse = focusedAnnotation instanceof window.Core.Annotations.EllipseAnnotation;\n  const isPolygon = focusedAnnotation instanceof window.Core.Annotations.PolygonAnnotation;\n  const isFreeText =\n    focusedAnnotation instanceof window.Core.Annotations.FreeTextAnnotation &&\n    (focusedAnnotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeText ||\n      focusedAnnotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout);\n  const isRedaction = focusedAnnotation instanceof window.Core.Annotations.RedactionAnnotation;\n  const colorMapKey = mapAnnotationToKey(focusedAnnotation);\n  const isMeasure = !!focusedAnnotation.Measure;\n  const showLineStyleOptions = getDataWithKey(mapToolNameToKey(focusedAnnotation.ToolName)).hasLineEndings;\n  const isInstanceActive = !window.isApryseWebViewerWebComponent || document.activeElement?.shadowRoot === getRootNode();\n  let StrokeStyle = 'solid';\n  const isContentEdit = focusedAnnotation.isContentEditPlaceholder?.();\n  const isReadOnlySignature = focusedAnnotation instanceof window.Core.Annotations.SignatureWidgetAnnotation && focusedAnnotation.fieldFlags.get(window.Core.Annotations.WidgetFlags.READ_ONLY);\n  try {\n    StrokeStyle = (focusedAnnotation['Style'] === 'dash')\n      ? `${focusedAnnotation['Style']},${focusedAnnotation['Dashes']}`\n      : focusedAnnotation['Style'];\n  } catch (err) {\n    console.error(err);\n  }\n  let properties = {};\n  if (showLineStyleOptions) {\n    properties = {\n      StartLineStyle: focusedAnnotation.getStartStyle(),\n      EndLineStyle: focusedAnnotation.getEndStyle(),\n      StrokeStyle,\n    };\n  }\n\n  if (isRectangle || isEllipse || isPolygon) {\n    properties = {\n      StrokeStyle,\n    };\n  }\n\n  if (isFreeText) {\n    const richTextStyles = focusedAnnotation.getRichTextStyle();\n    const isAutoSizeFont = focusedAnnotation.isAutoSizeFont();\n    const calculatedFontSize = focusedAnnotation.getCalculatedFontSize();\n\n    properties = {\n      Font: focusedAnnotation.Font,\n      FontSize: focusedAnnotation.FontSize,\n      TextAlign: focusedAnnotation.TextAlign,\n      TextVerticalAlign: focusedAnnotation.TextVerticalAlign,\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\n      StrokeStyle,\n      isAutoSizeFont,\n      calculatedFontSize,\n    };\n  }\n\n  if (isRedaction) {\n    properties = {\n      OverlayText: focusedAnnotation['OverlayText'],\n      Font: focusedAnnotation['Font'],\n      FontSize: focusedAnnotation['FontSize'],\n      TextAlign: focusedAnnotation['TextAlign']\n    };\n  }\n\n  const renderPopup = () => {\n    switch (true) {\n      case isStylePopupOpen:\n        return (\n          <AnnotationStylePopup\n            annotations={[focusedAnnotation]}\n            style={annotationStyle}\n            isOpen={isOpen}\n            onResize={onResize}\n            isFreeText={isFreeText}\n            isEllipse={isEllipse}\n            isRedaction={isRedaction}\n            isMeasure={isMeasure}\n            colorMapKey={colorMapKey}\n            showLineStyleOptions={showLineStyleOptions}\n            properties={properties}\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\n            hasBackToMenu={isRightClickMenu}\n            onBackToMenu={closeEditStylePopup}\n          />\n        );\n      case isDatePickerOpen:\n        return (\n          <DatePicker onClick={handleDateChange} annotation={focusedAnnotation} onDatePickerShow={onDatePickerShow} />\n        );\n      case isCalibrationPopupOpen:\n        return <CalibrationPopup annotation={focusedAnnotation} />;\n      case shortCutKeysFor3DVisible && focusedAnnotation instanceof window.Core.Annotations.Model3DAnnotation:\n        return (\n          <div className=\"shortCuts3D\">\n            <div className=\"closeButton\" onClick={() => setShortCutKeysFor3DVisible(false)}>x</div>\n            <div className=\"row\">{t('action.rotate3D')} <span>{t('shortcut.rotate3D')}</span></div>\n            <div className=\"row\">{t('action.zoom')} <span>{t('shortcut.zoom3D')}</span></div>\n          </div>\n        );\n      default:\n        return (\n          <FocusTrap\n            locked={isOpen && isInstanceActive && !isRichTextPopupOpen && !isNotesPanelOpenOrActive && !isLinkModalOpen && !isWarningModalOpen && !isFreeText && !isContextMenuPopupOpen}\n          >\n            <div className=\"container\">\n              <CustomizablePopup\n                dataElement={DataElements.ANNOTATION_POPUP}\n                childrenClassName='main-menu-button'\n              >\n                {showViewFileButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"viewFileButton\"\n                    label={isRightClickMenu ? 'action.viewFile' : ''}\n                    title={!isRightClickMenu ? 'action.viewFile' : ''}\n                    img=\"icon-view\"\n                    onClick={onViewFile}\n                  />\n                )}\n                {showCommentButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationCommentButton\"\n                    label={isRightClickMenu ? commentButtonLabel : ''}\n                    title={!isRightClickMenu ? commentButtonLabel : ''}\n                    img={commentButtonImg}\n                    onClick={onCommentAnnotation}\n                  />\n                )}\n                {showEditStyleButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationStyleEditButton\"\n                    label={isRightClickMenu ? 'action.style' : ''}\n                    title={!isRightClickMenu ? 'action.style' : ''}\n                    img=\"icon-menu-style-line\"\n                    onClick={customizableUI ? toggleStylePanel : openEditStylePopup}\n                  />\n                )}\n                {showContentEditButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationContentEditButton\"\n                    label={isRightClickMenu ? 'action.edit' : ''}\n                    title={!isRightClickMenu ? 'action.edit' : ''}\n                    img=\"ic_edit_page_24px\"\n                    onClick={onEditContent}\n                  />\n                )}\n                {showClearSignatureButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationClearSignatureButton\"\n                    label={!isReadOnlySignature && isRightClickMenu ? 'action.clearSignature' : ''}\n                    title={isReadOnlySignature ? 'action.readOnlySignature' : (!isRightClickMenu ? 'action.clearSignature' : '')}\n                    img={'icon-delete-line'}\n                    onClick={onClearAppearanceSignature}\n                    isNotClickableSelector={() => isReadOnlySignature}\n                  />\n                )}\n                {showRedactionButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationRedactButton\"\n                    label={isRightClickMenu ? 'action.apply' : ''}\n                    title={!isRightClickMenu ? 'action.apply' : ''}\n                    img=\"ic_check_black_24px\"\n                    onClick={onApplyRedaction}\n                  />\n                )}\n                {showGroupButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationGroupButton\"\n                    label={isRightClickMenu ? 'action.group' : ''}\n                    title={!isRightClickMenu ? 'action.group' : ''}\n                    img=\"group-annotations-icon\"\n                    onClick={onGroupAnnotations}\n                  />\n                )}\n                {showUngroupButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationUngroupButton\"\n                    label={isRightClickMenu ? 'action.ungroup' : ''}\n                    title={!isRightClickMenu ? 'action.ungroup' : ''}\n                    img=\"ungroup-annotations-icon\"\n                    onClick={onUngroupAnnotations}\n                  />\n                )}\n                {showAlignButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement='openAlignmentButton'\n                    label={isRightClickMenu ? 'alignmentPopup.alignment' : ''}\n                    title={!isRightClickMenu ? 'alignmentPopup.alignment' : ''}\n                    img=\"ic-alignment-main\"\n                    onClick={onOpenAlignmentModal}\n                  />\n                )}\n                {showFormFieldButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"formFieldEditButton\"\n                    label={isRightClickMenu ? 'action.formFieldEdit' : ''}\n                    title={!isRightClickMenu ? 'action.formFieldEdit' : ''}\n                    img=\"icon-edit-form-field\"\n                    onClick={onOpenFormField}\n                  />\n                )}\n                {showDeleteButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"annotationDeleteButton\"\n                    label={isRightClickMenu ? 'action.delete' : ''}\n                    title={!isRightClickMenu ? 'action.delete' : ''}\n                    img=\"icon-delete-line\"\n                    onClick={isContentEdit ? openContentEditDeleteWarningModal : onDeleteAnnotation}\n                  />\n                )}\n                {showCalibrateButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement={DataElements.CALIBRATION_POPUP_BUTTON}\n                    label={isRightClickMenu ? 'action.calibrate' : ''}\n                    title={!isRightClickMenu ? 'action.calibrate' : ''}\n                    img=\"calibrate\"\n                    onClick={onOpenCalibration}\n                  />\n                )}\n                {showLinkButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"linkButton\"\n                    label={isRightClickMenu ? 'tool.Link' : ''}\n                    title={!isRightClickMenu ? 'tool.Link' : ''}\n                    img={hasAssociatedLink ? 'icon-tool-unlink' : 'icon-tool-link'}\n                    onClick={linkAnnotationToURL}\n                  />\n                )}\n                {showFileDownloadButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"fileAttachmentDownload\"\n                    label={isRightClickMenu ? 'action.fileAttachmentDownload' : ''}\n                    title={!isRightClickMenu ? 'action.fileAttachmentDownload' : ''}\n                    img=\"icon-download\"\n                    onClick={() => downloadFileAttachment(focusedAnnotation)}\n                  />\n                )}\n                {show3DShortCutButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"shortCutKeysFor3D\"\n                    label={isRightClickMenu ? 'action.viewShortCutKeysFor3D' : ''}\n                    title={!isRightClickMenu ? 'action.viewShortCutKeysFor3D' : ''}\n                    img=\"icon-keyboard\"\n                    onClick={() => setShortCutKeysFor3DVisible(true)}\n                  />\n                )}\n                {showAudioPlayButton && (\n                  <ActionButton\n                    className=\"main-menu-button\"\n                    dataElement=\"playSoundButton\"\n                    label={isRightClickMenu ? 'action.playAudio' : ''}\n                    title={!isRightClickMenu ? 'action.playAudio' : ''}\n                    img=\"ic_play_24px\"\n                    onClick={() => handlePlaySound(focusedAnnotation)}\n                  />\n                )}\n              </CustomizablePopup>\n            </div>\n          </FocusTrap>\n        );\n    }\n  };\n\n  const annotationPopup = (\n    <div\n      className={classNames({\n        Popup: true,\n        AnnotationPopup: true,\n        open: isOpen,\n        closed: !isOpen,\n        stylePopupOpen: isStylePopupOpen,\n        'is-vertical': isRightClickMenu,\n        'is-horizontal': !isRightClickMenu,\n      })}\n      ref={popupRef}\n      data-element={DataElements.ANNOTATION_POPUP}\n      style={{ ...position, visibility: isVisible || isVisible === undefined ? 'visible' : 'hidden' }}\n    >\n      {renderPopup()}\n    </div>\n  );\n\n  return isIE || isMobile ? (\n    annotationPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, .sliders-container svg, select, button, input\">{annotationPopup}</Draggable>\n  );\n};\n\nAnnotationPopup.propTypes = propTypes;\n\nexport default AnnotationPopup;","import React, { useState, useEffect, useRef, useCallback, useLayoutEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport debounce from 'lodash/debounce';\nimport { saveAs } from 'file-saver';\n\nimport core from 'core';\nimport { getAnnotationPopupPositionBasedOn } from 'helpers/getPopupPosition';\nimport applyRedactions from 'helpers/applyRedactions';\nimport { isMobile, isIE } from 'helpers/device';\nimport { useTranslation } from 'react-i18next';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport getGroupedLinkAnnotations from 'helpers/getGroupedLinkAnnotations';\nimport getHashParameters from 'helpers/getHashParameters';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport { PRIORITY_THREE } from 'constants/actionPriority';\nimport getRootNode from 'helpers/getRootNode';\nimport { ITEM_RENDER_PREFIXES } from 'constants/customizationVariables';\nimport AnnotationPopup from './AnnotationPopup';\n\nimport './AnnotationPopup.scss';\nimport { isAnnotationRenderedInDisplayMode } from 'src/helpers/isAnnotationRenderedInDisplayMode';\n\nconst { ToolNames } = window.Core.Tools;\nconst { Annotations } = window.Core;\n\nconst propTypes = {\n  focusedAnnotation: PropTypes.object,\n  selectedMultipleAnnotations: PropTypes.bool,\n  canModify: PropTypes.bool,\n  focusedAnnotationStyle: PropTypes.object,\n  isStylePopupOpen: PropTypes.bool,\n  setIsStylePopupOpen: PropTypes.func,\n  isDatePickerOpen: PropTypes.bool,\n  setDatePickerOpen: PropTypes.func,\n  isDatePickerMount: PropTypes.bool,\n  setDatePickerMount: PropTypes.func,\n  hasAssociatedLink: PropTypes.bool,\n  includesFormFieldAnnotation: PropTypes.bool,\n  stylePopupRepositionFlag: PropTypes.bool,\n  setStylePopupRepositionFlag: PropTypes.func,\n  closePopup: PropTypes.func,\n  widgetThatOpenedPopupRef: PropTypes.object,\n};\n\nconst AnnotationPopupContainer = ({\n  focusedAnnotation,\n  selectedMultipleAnnotations,\n  canModify,\n  focusedAnnotationStyle,\n  isStylePopupOpen,\n  setIsStylePopupOpen,\n  isDatePickerOpen,\n  setDatePickerOpen,\n  isDatePickerMount,\n  setDatePickerMount,\n  hasAssociatedLink,\n  includesFormFieldAnnotation,\n  stylePopupRepositionFlag,\n  setStylePopupRepositionFlag,\n  closePopup,\n  widgetThatOpenedPopupRef,\n}) => {\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.ANNOTATION_POPUP));\n  const isOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.ANNOTATION_POPUP));\n  const isContextMenuPopupOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.CONTEXT_MENU_POPUP));\n  const isRightClickAnnotationPopupEnabled = useSelector(selectors.isRightClickAnnotationPopupEnabled);\n  const isNotesPanelDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NOTES_PANEL));\n  const isAnnotationStylePopupDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP));\n  const isInlineCommentingDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP));\n  const isNotesPanelOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.NOTES_PANEL));\n  const isLinkModalOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.LINK_MODAL));\n  const isWarningModalOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.WARNING_MODAL));\n  const isRichTextPopupOpen = useSelector((state) => selectors.isElementOpen(state, 'richTextPopup'));\n  const isMultiTab = useSelector(selectors.getIsMultiTab);\n  const tabManager = useSelector(selectors.getTabManager);\n  const tabs = useSelector(selectors.getTabs);\n  const notesInLeftPanel = useSelector(selectors.getNotesInLeftPanel);\n  const leftPanelOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.LEFT_PANEL));\n  const activeLeftPanel = useSelector(selectors.getActiveLeftPanel);\n  const activeDocumentViewerKey = useSelector(selectors.getActiveDocumentViewerKey);\n  const isAnyCustomPanelOpen = useSelector(selectors.isAnyCustomPanelOpen);\n  const featureFlags = useSelector(selectors.getFeatureFlags);\n  const isStylePanelOpen = useSelector((state) => selectors.isElementOpen(state, DataElements.STYLE_PANEL));\n  const isStylePanelDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.STYLE_PANEL));\n  const stylePanelInFlyout = useSelector((state) => selectors.getIsPanelInFlyout(state, ITEM_RENDER_PREFIXES.STYLE_PANEL, [DataElements.MULTI_SELECT_STYLE_PANEL_FLYOUT]));\n  const isStylePanelFlyoutOpen = useSelector((state) => selectors.isElementOpen(state, stylePanelInFlyout?.dataElement));\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const [isVisible, setIsVisible] = useState(false);\n  const [isCalibrationPopupOpen, setCalibrationPopupOpen] = useState(false);\n  const popupRef = useRef();\n\n  const isFocusedAnnotationSelected = isRightClickAnnotationPopupEnabled ? core.isAnnotationSelected(focusedAnnotation, activeDocumentViewerKey) : true;\n  const annotManager = core.getAnnotationManager(activeDocumentViewerKey);\n  const sixtyFramesPerSecondIncrement = 16;\n  // on tablet, the behaviour will be like on desktop, including being draggable\n\n  const { customizableUI } = featureFlags;\n\n  const toggleStylePanel = () => {\n    if (!isStylePanelOpen && !isStylePanelDisabled && !stylePanelInFlyout) {\n      dispatch(actions.openElement(DataElements.STYLE_PANEL));\n    }\n    if (stylePanelInFlyout) {\n      if (isStylePanelFlyoutOpen) {\n        dispatch(actions.closeElement(stylePanelInFlyout.dataElement));\n      } else {\n        dispatch(actions.openFlyout(stylePanelInFlyout.dataElement, 'annotationStyleEditButton'));\n      }\n    }\n    if (!stylePanelInFlyout) {\n      closePopup();\n    }\n  };\n\n  useOnClickOutside(\n    popupRef,\n    useCallback((e) => {\n      const notesPanel = getRootNode().querySelector(`[data-element=\"${DataElements.NOTES_PANEL}\"]`);\n      const clickedInNotesPanel = notesPanel?.contains(e.target);\n      const clickedInLinkModal = getRootNode().querySelector('.LinkModal.open')?.contains(e.target);\n      const stylePanelFlyout = getRootNode().querySelector(`[data-element=${stylePanelInFlyout?.dataElement}]`);\n      const clickedInStylePanelFlyout = stylePanelFlyout?.contains(e.target);\n      const datePicker = getDatePicker();\n      const warningModal = getOpenedWarningModal();\n      const colorPicker = getOpenedColorPicker();\n\n      // the notes panel has mousedown handlers to handle the opening/closing states of this component\n      // we don't want this handler to run when clicked in the notes panel otherwise the opening/closing states may mess up\n      // for example: click on a note will call core.selectAnnotation which triggers the annotationSelected event\n      // and opens this component. If we don't exclude the notes panel this handler will run and close it after\n      // Similarly, we don't want the popup to close when clicking on the style panel flyout or the flyout loses its anchor.\n      if (!clickedInNotesPanel && !clickedInLinkModal && !clickedInStylePanelFlyout && !warningModal && !colorPicker && !datePicker) {\n        if (isRightClickAnnotationPopupEnabled) {\n          closePopup();\n        } else {\n          dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n        }\n      }\n    }, [isRightClickAnnotationPopupEnabled])\n  );\n\n  const setPopupPosition = () => {\n    const visiblePages = core.getDisplayModeObject().getVisiblePages();\n    const isFocusableInCurrentDisplayMode = isAnnotationRenderedInDisplayMode(core, focusedAnnotation);\n    if (popupRef.current && isFocusableInCurrentDisplayMode && focusedAnnotation) {\n      setPosition(getAnnotationPopupPositionBasedOn(focusedAnnotation, popupRef, activeDocumentViewerKey));\n    } else if (!isNotesPanelDisabled && !isFocusableInCurrentDisplayMode) {\n      const annotations = core.getSelectedAnnotations();\n      const annotationInPage = annotations.find(\n        (annotation) => visiblePages.includes(annotation.PageNumber)\n      );\n      setPosition(getAnnotationPopupPositionBasedOn(annotationInPage, popupRef, activeDocumentViewerKey));\n    }\n  };\n\n  const handleResize = debounce(() => {\n    if (AnnotationPopupContainer) {\n      setPopupPosition();\n    }\n  }, sixtyFramesPerSecondIncrement, { 'trailing': true, 'leading': false });\n\n  const handleVisibility = debounce(() => {\n    if (AnnotationPopupContainer) {\n      setIsVisible(isFocusedAnnotationSelected);\n    }\n  }, sixtyFramesPerSecondIncrement * 2, { 'trailing': true, 'leading': false });\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // useLayoutEffect here to avoid flashing issue when popup is close and open on scroll\n  useLayoutEffect(() => {\n    if (focusedAnnotation || isStylePopupOpen || isDatePickerMount) {\n      handleResize();\n      setIsVisible(false);\n      handleVisibility();\n    }\n    // canModify is needed here because the effect from useOnAnnotationPopupOpen hook will run again and determine which button to show, which in turn change the popup size and will need to recalculate position\n  }, [focusedAnnotation, isStylePopupOpen, isDatePickerMount, canModify, activeDocumentViewerKey]);\n\n  useEffect(() => {\n    if (focusedAnnotation && focusedAnnotation.ToolName === ToolNames.CALIBRATION_MEASUREMENT) {\n      setCalibrationPopupOpen(true);\n    }\n  }, [focusedAnnotation]);\n\n  useEffect(() => {\n    if (isOpen || isRichTextPopupOpen) {\n      dispatch(actions.closeElement(DataElements.INLINE_COMMENT_POPUP));\n    }\n  }, [isOpen, isRichTextPopupOpen]);\n\n  /* VIEW FILE */\n  const wvServer = !!getHashParameters('webviewerServerURL', null);\n  const acceptFormats = wvServer ? window.Core.SupportedFileFormats.SERVER : window.Core.SupportedFileFormats.CLIENT;\n  const showViewFileButton = focusedAnnotation instanceof Annotations.FileAttachmentAnnotation && isMultiTab\n    && acceptFormats.includes(window.Core.mimeTypeToExtension[focusedAnnotation.getFileMetadata().mimeType]);\n\n  const onViewFile = useCallback(async () => {\n    if (!tabManager || !isMultiTab) {\n      return console.warn('Can\\'t open file in non-multi-tab mode');\n    }\n    const metaData = focusedAnnotation.getFileMetadata();\n    const fileAttachmentTab = tabs.find((tab) => tab.options.filename === metaData.filename);\n    if (fileAttachmentTab) { // If already opened once\n      await tabManager.setActiveTab(fileAttachmentTab.id, true);\n      return;\n    }\n    await tabManager.addTab(await focusedAnnotation.getFileData(), {\n      extension: window.Core.mimeTypeToExtension[metaData.mimeType],\n      filename: metaData.filename,\n      saveCurrentActiveTabState: true,\n      setActive: true,\n    });\n  }, [tabManager, focusedAnnotation, tabs, isMultiTab]);\n\n  useEffect(() => {\n    const popup = popupRef.current;\n    if (!popup) {\n      return;\n    }\n    if (widgetThatOpenedPopupRef?.current) {\n      const associatedSignatureAnnotation = widgetThatOpenedPopupRef.current.getAssociatedSignatureAnnotation();\n      const handleKeyDown = (event) => {\n        if (event.key === 'Escape' && isOpen) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (associatedSignatureAnnotation === focusedAnnotation) {\n            annotManager.deselectAnnotation(focusedAnnotation, activeDocumentViewerKey);\n          }\n          closePopup();\n        }\n        if (canModify && (event.key === 'Delete' || event.key === 'Backspace') && isOpen) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (widgetThatOpenedPopupRef?.current?.isSignedByAppearance()) {\n            widgetThatOpenedPopupRef.current.clearSignature(annotManager);\n          } else if (associatedSignatureAnnotation) {\n            annotManager.deleteAnnotation(associatedSignatureAnnotation, activeDocumentViewerKey);\n          }\n          closePopup();\n        }\n      };\n\n      popup.addEventListener('keydown', handleKeyDown, true);\n      return () => popup.removeEventListener('keydown', handleKeyDown, true);\n    }\n  }, [popupRef,isOpen, widgetThatOpenedPopupRef, focusedAnnotation, closePopup, annotManager, activeDocumentViewerKey]);\n\n  /* ALL REACT HOOKS NEED TO BE BEFORE RENDERING */\n  if (isDisabled || !focusedAnnotation) {\n    return null;\n  }\n\n  /* COMMENT / DATE */\n  const selectedAnnotations = core.getSelectedAnnotations(activeDocumentViewerKey);\n  const numberOfSelectedAnnotations = selectedAnnotations.length;\n  const multipleAnnotationsSelected = numberOfSelectedAnnotations > 1;\n  const isFreeTextAnnot = focusedAnnotation instanceof Annotations.FreeTextAnnotation;\n  const isDateFreeTextCanEdit = isFreeTextAnnot && !!focusedAnnotation.getDateFormat() && core.canModifyContents(focusedAnnotation, activeDocumentViewerKey);\n  const numberOfGroups = core.getNumberOfGroups(selectedAnnotations, activeDocumentViewerKey);\n  const canGroup = numberOfGroups > 1;\n  const canUngroup = numberOfGroups === 1 && numberOfSelectedAnnotations > 1 && isFocusedAnnotationSelected;\n  const isAppearanceSignature =\n    focusedAnnotation instanceof Annotations.SignatureWidgetAnnotation\n    && focusedAnnotation.isSignedByAppearance();\n  const isInReadOnlyMode = core.getIsReadOnly();\n\n  const showCommentButton = (\n    (!isNotesPanelDisabled || !isInlineCommentingDisabled)\n    && (!multipleAnnotationsSelected || (multipleAnnotationsSelected && !isFocusedAnnotationSelected))\n    && focusedAnnotation.ToolName !== ToolNames.CROP\n    && !includesFormFieldAnnotation\n    && !focusedAnnotation.isContentEditPlaceholder()\n    && !isAppearanceSignature\n  );\n\n  const onCommentAnnotation = () => {\n    if (isDateFreeTextCanEdit) {\n      setDatePickerOpen(true);\n      return;\n    }\n\n    dispatch(actions.closeElement('searchPanel'));\n    dispatch(actions.closeElement('redactionPanel'));\n    const contentEditManager = core.getContentEditManager(activeDocumentViewerKey);\n    if (contentEditManager.isInContentEditMode()) {\n      dispatch(actions.closeElement('textEditingPanel'));\n      contentEditManager.endContentEditMode();\n    }\n\n    dispatch(actions.triggerNoteEditing());\n    if (isInlineCommentingDisabled) {\n      dispatch(actions.openElement(DataElements.NOTES_PANEL));\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    } else {\n      if (!isNotesPanelOpen) {\n        dispatch(actions.openElement(DataElements.INLINE_COMMENT_POPUP));\n      }\n      closePopup();\n    }\n  };\n\n  /* ALIGN */\n  const showAlignButton = (\n    canModify\n    && multipleAnnotationsSelected\n    && !isMobile()\n  );\n\n  const onOpenAlignmentModal = () => {\n    dispatch(actions.openElement(DataElements.ANNOTATION_ALIGNMENT_POPUP));\n    closePopup();\n  };\n\n  const handleDateChange = (text) => {\n    annotManager.setNoteContents(focusedAnnotation, text);\n    annotManager.updateAnnotation(focusedAnnotation);\n  };\n\n  const onDatePickerShow = (isDatePickerShowed) => {\n    setDatePickerMount(isDatePickerShowed);\n  };\n\n  /* EDIT STYLE */\n  const hasStyle = Object.keys(focusedAnnotationStyle).length > 0;\n\n  const toolsWithNoStyling = [\n    ToolNames.CROP,\n    ToolNames.VIDEO_REDACTION,\n    ToolNames.VIDEO_AND_AUDIO_REDACTION,\n    ToolNames.AUDIO_REDACTION,\n  ];\n\n  const showEditStyleButton = (\n    canModify\n    && hasStyle\n    && (!isAnnotationStylePopupDisabled || customizableUI)\n    && (!multipleAnnotationsSelected || canUngroup || (multipleAnnotationsSelected && !isFocusedAnnotationSelected))\n    && !toolsWithNoStyling.includes(focusedAnnotation.ToolName)\n    && !(focusedAnnotation instanceof Annotations.Model3DAnnotation)\n    && !focusedAnnotation.isContentEditPlaceholder()\n    && !isAppearanceSignature\n    && !(focusedAnnotation instanceof Annotations.PushButtonWidgetAnnotation)\n  );\n\n  const hideSnapModeCheckbox = focusedAnnotation instanceof Annotations.EllipseAnnotation || !core.isFullPDFEnabled();\n\n  const onResize = () => {\n    setStylePopupRepositionFlag(!stylePopupRepositionFlag);\n  };\n\n  /* EDIT CONTENT */\n  const showContentEditButton =\n    focusedAnnotation.isContentEditPlaceholder()\n    && focusedAnnotation.getContentEditType() === window.Core.ContentEdit.Types.TEXT;\n\n  const onEditContent = async () => {\n    annotManager.trigger('annotationDoubleClicked', focusedAnnotation);\n\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n  };\n\n  /* CLEAR APPEARANCE SIGNATURE */\n  const showClearSignatureButton = canModify && isAppearanceSignature && !showFormFieldButton;\n\n  const onClearAppearanceSignature = () => {\n    focusedAnnotation.clearSignature(annotManager);\n    closePopup();\n  };\n\n  /* REDACTION */\n  const redactionEnabled = core.isAnnotationRedactable(focusedAnnotation, activeDocumentViewerKey);\n  const showRedactionButton = redactionEnabled && !multipleAnnotationsSelected && !includesFormFieldAnnotation;\n\n  const onApplyRedaction = () => {\n    dispatch(applyRedactions(focusedAnnotation, undefined, activeDocumentViewerKey));\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n  };\n\n  /* GROUP / UNGROUP */\n  const primaryAnnotation = selectedAnnotations.find((selectedAnnotation) => !selectedAnnotation.InReplyTo);\n\n  const showGroupButton =\n    canModify\n    && isFocusedAnnotationSelected\n    && canGroup\n    && !includesFormFieldAnnotation;\n\n  const onGroupAnnotations = () => {\n    core.groupAnnotations(primaryAnnotation, selectedAnnotations, activeDocumentViewerKey);\n  };\n\n  const showUngroupButton = canUngroup;\n\n  const onUngroupAnnotations = () => {\n    core.ungroupAnnotations(selectedAnnotations, activeDocumentViewerKey);\n  };\n\n  /* FORM FIELD */\n  const formFieldCreationManager = core.getFormFieldCreationManager(activeDocumentViewerKey);\n  const isInFormFieldCreationMode = formFieldCreationManager.isInFormFieldCreationMode();\n  const showFormFieldButton = includesFormFieldAnnotation\n    && isInFormFieldCreationMode\n    && !(focusedAnnotation instanceof Annotations.PushButtonWidgetAnnotation);\n\n  const onOpenFormField = () => {\n    closePopup();\n    // We disable it while the form field popup is open to prevent having both open\n    // at the same time. We re-enable it when the form field popup is closed.\n    if (customizableUI) {\n      dispatch(actions.disableElement(PRIORITY_THREE));\n      dispatch(actions.closeElement(DataElements.FORM_FIELD_EDIT_POPUP));\n    } else {\n      dispatch(actions.disableElement(DataElements.ANNOTATION_POPUP, PRIORITY_THREE));\n    }\n    dispatch(actions.openElement(DataElements.FORM_FIELD_EDIT_POPUP));\n    dispatch(actions.openElement(DataElements.FORM_FIELD_PANEL));\n  };\n\n  /* DELETE ANNOTATION */\n  const showDeleteButton = canModify && !showClearSignatureButton;\n\n  const openContentEditDeleteWarningModal = () => {\n    const message = t('option.contentEdit.deletionModal.message');\n    const title = t('option.contentEdit.deletionModal.title');\n    const confirmBtnText = t('action.ok');\n\n    const warning = {\n      message,\n      title,\n      confirmBtnText,\n      onConfirm: () => onDeleteAnnotation(),\n    };\n    dispatch(actions.showWarningMessage(warning));\n  };\n\n  const onDeleteAnnotation = () => {\n    if (isFocusedAnnotationSelected) {\n      core.deleteAnnotations(core.getSelectedAnnotations(activeDocumentViewerKey), undefined, activeDocumentViewerKey);\n    } else {\n      core.deleteAnnotations([focusedAnnotation], undefined, activeDocumentViewerKey);\n    }\n    closePopup();\n  };\n\n  /* LINK ANNOTATION */\n  const toolsThatCantHaveLinks = [\n    ToolNames.CROP,\n    ToolNames.SIGNATURE,\n    ToolNames.REDACTION,\n    ToolNames.REDACTION2,\n    ToolNames.REDACTION3,\n    ToolNames.REDACTION4,\n    ToolNames.STICKY,\n    ToolNames.STICKY2,\n    ToolNames.STICKY3,\n    ToolNames.STICKY4,\n  ];\n\n  const showLinkButton = (\n    canModify\n    && !toolsThatCantHaveLinks.includes(focusedAnnotation.ToolName)\n    && !includesFormFieldAnnotation\n    && !focusedAnnotation.isContentEditPlaceholder()\n    // TODO(Adam): Update this once SoundAnnotation tool is created.\n    && !(focusedAnnotation instanceof Annotations.SoundAnnotation)\n    && !isAppearanceSignature\n  );\n\n  const showCalibrateButton =\n    canModify\n    && focusedAnnotation.Measure\n    && focusedAnnotation instanceof Annotations.LineAnnotation;\n\n  const onOpenCalibration = () => {\n    dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    dispatch(actions.openElement(DataElements.CALIBRATION_MODAL));\n  };\n\n  const linkAnnotationToURL = () => {\n    if (hasAssociatedLink) {\n      const annotationsToUnlink = isFocusedAnnotationSelected ? selectedAnnotations : [focusedAnnotation];\n      annotationsToUnlink.forEach((annot) => {\n        const linkAnnotations = getGroupedLinkAnnotations(annot);\n        linkAnnotations.forEach((linkAnnot, index) => {\n          annotManager.ungroupAnnotations([linkAnnot]);\n          if (annot instanceof Annotations.TextHighlightAnnotation && annot.Opacity === 0 && index === 0) {\n            annotManager.deleteAnnotations([annot, linkAnnot], null, true);\n          } else {\n            annotManager.deleteAnnotation(linkAnnot, null, true);\n          }\n        });\n      });\n      closePopup();\n    } else {\n      dispatch(actions.openElement(DataElements.LINK_MODAL));\n    }\n  };\n\n  /* DOWNLOAD FILE ATTACHMENT */\n  const showFileDownloadButton = focusedAnnotation instanceof Annotations.FileAttachmentAnnotation;\n\n  const downloadFileAttachment = async (annot) => {\n    // no need to check that annot is of type file annot as the check is done in the JSX\n    const { fileData, fileName } = await annot.getFullFileMetadata();\n    saveAs(fileData, fileName);\n  };\n\n  /* AUDIO ANNOTATION */\n  const showAudioPlayButton = (\n    !isIE &&\n    !selectedMultipleAnnotations &&\n    focusedAnnotation instanceof Annotations.SoundAnnotation &&\n    focusedAnnotation.hasAudioData()\n  );\n\n  const isNotesPanelOpenOrActive = isNotesPanelOpen\n    || (notesInLeftPanel && leftPanelOpen && activeLeftPanel === 'notesPanel')\n    || isAnyCustomPanelOpen\n    || isInFormFieldCreationMode;\n\n  const handlePlaySound = (annotation) => {\n    dispatch(actions.setActiveSoundAnnotation(annotation));\n    dispatch(actions.triggerResetAudioPlaybackPosition(true));\n    dispatch(actions.openElement('audioPlaybackPopup'));\n  };\n\n  return (\n    <AnnotationPopup\n      isMobile={isMobile()}\n      isIE={isIE}\n      isOpen={isOpen}\n      isRightClickMenu={isRightClickAnnotationPopupEnabled}\n      isNotesPanelOpenOrActive={isNotesPanelOpenOrActive}\n      isRichTextPopupOpen={isRichTextPopupOpen}\n      isLinkModalOpen={isLinkModalOpen}\n      isWarningModalOpen={isWarningModalOpen}\n      isContextMenuPopupOpen={isContextMenuPopupOpen}\n      isVisible={isVisible}\n\n      popupRef={popupRef}\n      position={position}\n      focusedAnnotation={focusedAnnotation}\n      multipleAnnotationsSelected={multipleAnnotationsSelected}\n\n      showViewFileButton={showViewFileButton}\n      onViewFile={onViewFile}\n\n      showCommentButton={showCommentButton}\n      onCommentAnnotation={onCommentAnnotation}\n      isDateFreeTextCanEdit={isDateFreeTextCanEdit}\n      isDatePickerOpen={isDatePickerOpen}\n      handleDateChange={handleDateChange}\n      onDatePickerShow={onDatePickerShow}\n      isCalibrationPopupOpen={isCalibrationPopupOpen}\n\n      showEditStyleButton={showEditStyleButton}\n      isStylePopupOpen={isStylePopupOpen}\n      hideSnapModeCheckbox={hideSnapModeCheckbox}\n      openEditStylePopup={() => setIsStylePopupOpen(true)}\n      closeEditStylePopup={() => setIsStylePopupOpen(false)}\n      annotationStyle={focusedAnnotationStyle}\n      onResize={onResize}\n\n      showContentEditButton={showContentEditButton}\n      onEditContent={onEditContent}\n      openContentEditDeleteWarningModal={openContentEditDeleteWarningModal}\n\n      showClearSignatureButton={showClearSignatureButton}\n      onClearAppearanceSignature={onClearAppearanceSignature}\n\n      showRedactionButton={showRedactionButton}\n      onApplyRedaction={onApplyRedaction}\n\n      showGroupButton={showGroupButton}\n      onGroupAnnotations={onGroupAnnotations}\n      showUngroupButton={showUngroupButton}\n      onUngroupAnnotations={onUngroupAnnotations}\n\n      showFormFieldButton={showFormFieldButton}\n      onOpenFormField={onOpenFormField}\n\n      showDeleteButton={showDeleteButton}\n      onDeleteAnnotation={onDeleteAnnotation}\n\n      showLinkButton={showLinkButton}\n      hasAssociatedLink={hasAssociatedLink}\n      linkAnnotationToURL={linkAnnotationToURL}\n\n      showFileDownloadButton={showFileDownloadButton}\n      downloadFileAttachment={downloadFileAttachment}\n\n      showAudioPlayButton={showAudioPlayButton}\n      handlePlaySound={handlePlaySound}\n\n      showCalibrateButton={showCalibrateButton}\n      onOpenCalibration={onOpenCalibration}\n\n      customizableUI={customizableUI}\n      toggleStylePanel={toggleStylePanel}\n      isStylePanelOpen={isStylePanelOpen}\n      isInReadOnlyMode={isInReadOnlyMode}\n\n      showAlignButton={showAlignButton}\n      onOpenAlignmentModal={onOpenAlignmentModal}\n    />\n  );\n};\n\nAnnotationPopupContainer.propTypes = propTypes;\n\nexport default AnnotationPopupContainer;\n","import AnnotationPopupContainer from './AnnotationPopupContainer';\n\nexport default AnnotationPopupContainer;"],"sourceRoot":""}