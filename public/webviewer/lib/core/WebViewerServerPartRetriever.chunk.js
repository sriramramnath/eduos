/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{694:function(wa,ua,e){function ka(){return!1}function pa(aa,z,fa){if(!(z in w))return!0;z=w[z];for(var ea=0;ea<z.length;ea++){var ma=aa;var ha=z[ea];var la=fa;if(ha.name in ma){var qa="",ja=!1;ma=ma[ha.name];switch(ha.type){case "s":qa="String";ja=Object(ca.isString)(ma);break;case "a":qa="Array";ja=Object(ca.isArray)(ma);break;case "n":qa="Number";ja=Object(ca.isNumber)(ma)&&Object(ca.isFinite)(ma);break;case "o":qa="Object",
ja=Object(ca.isObject)(ma)&&!Object(ca.isArray)(ma)}ja||la.reject('Expected response field "'.concat(ha.name,'" to have type ').concat(qa));ha=ja}else la.reject('Response missing field "'.concat(ha.name,'"')),ha=!1;if(!ha)return!1}return!0}function na(aa){for(var z=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];z<fa.length;z++){var ea=fa[z],ma=ea;ea=ea.charAt(0).toUpperCase()+ea.slice(1);aa[ma]&&(Object.defineProperty(aa,ea,
Object.getOwnPropertyDescriptor(aa,ma)),delete aa[ma])}return aa}e.r(ua);var ia=e(0),ca=e(1);e.n(ca);var ba=e(2);wa=e(50);var x=e(39),y=e(713),r=e(146),b=e(605),h=e(56),n=e(276),f=function(){function aa(){this.request=this.result=null;this.state=0;var z=this;z.promise=new Promise(function(fa,ea){z.resolve=function(){if(0===z.state||4===z.state)z.state=1,z.result=arguments[0],fa.apply(null,arguments)};z.reject=function(){if(0===z.state||4===z.state)z.state=2,ea.apply(null,arguments)}})}aa.prototype.xp=
function(){return 1===(this.state&1)};aa.prototype.MQa=function(){return 2===(this.state&2)};aa.prototype.rn=function(){return!this.MQa()&&!this.xp()};aa.prototype.$Pa=function(){return 4===(this.state&4)};aa.prototype.p4=function(){this.state|=4};return aa}(),a=function(){function aa(){this.PB={};this.Xc=[]}aa.prototype.pop=function(){var z=this.Xc.pop();this.PB[z.key]=void 0;return z};aa.prototype.push=function(z,fa){fa={key:z,data:fa};this.Xc.push(fa);this.PB[z]=fa.data};aa.prototype.contains=
function(z){return!!this.PB[z]};aa.prototype.get=function(z){return this.PB[z]};aa.prototype.set=function(z,fa){var ea=this;this.PB[z]=fa;this.Xc.forEach(function(ma,ha){ma.key===z&&(ea.Xc[ha]=ma)})};aa.prototype.remove=function(z){var fa=this;this.PB[z]=void 0;this.Xc.forEach(function(ea,ma){ea.key===z&&fa.Xc.splice(ma,1)})};aa.prototype.length=function(){return this.Xc.length};return aa}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],
health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};e=function(){function aa(z,fa,ea){var ma=this;this.c5=this.nca=!1;this.vk=this.BT=this.XD=this.Lg=this.FF=
this.Zr=this.EF=this.Ms=null;this.ds=new f;this.Hw=new f;this.sN=!1;this.fi=this.Qg=this.Rg=this.Th=null;this.Ii=[];this.DO=[];this.cache={};this.timeStamp=0;this.qk=[];this.qj=[];this.xY=null;this.Wba=!1;this.tma=this.id=null;this.a1=this.hga=ka;this.Ei=0;this.u_=!1;this.Jia=1;this.zn={};this.lA=0;this.bD=new a;fa.endsWith("/")||(fa+="/");ea=ea||{};this.nca=ea.disableWebsockets||!1;this.c5=ea.singleServerMode||!1;null!=ea.customQueryParameters&&Object(h.b)("wvsQueryParameters",ea.customQueryParameters);
fa.endsWith("blackbox/")||(fa+="blackbox/");this.Ms=ea.uploadData||null;this.XD=ea.uriData||null;this.EF=ea.cacheKey||null;if(this.Zr=ea.officeOptions||null)this.Zr=na(this.Zr);this.Lg=ea.rasterizerOptions||null;this.FF=ea.cadOptions||null;this.Xh=fa;this.TX=z;this.qv(!0);this.NA=(new y.a(fa,null,this.en())).sIa(!this.nca,function(ha){ma.ITa(ha)},function(){return null},function(){ma.sN=!1},function(){ma.PYa()})}aa.prototype.m0a=function(z){this.hga=z||ka;this.a1=ka};aa.prototype.MAa=function(){this.Jla();
return this.NA.ix()};aa.prototype.Jla=function(){Object(ia.c)(this,void 0,void 0,function(){return Object(ia.e)(this,function(){this.Hw=new f;this.ds=new f;this.sN=!1;this.id=null;this.Wba=!1;return[2]})})};aa.prototype.PYa=function(){this.hga();this.Jla();this.Th&&(this.Th.rn()?this.zk(this.Th.request):this.Th.xp()&&this.a1(this.Th.result.url,"pdf")&&(this.Th=null,this.Gla()));this.fi&&this.fi.rn()&&this.zk(this.fi.request);this.Rg&&this.Rg.rn()?this.zk(this.Rg.request):this.Qg&&this.Qg.rn()&&this.Kfa();
var z;for(z=0;z<this.qk.length;z++)this.qk[z]&&(this.qk[z].rn()?this.zk(this.qk[z].request):this.qk[z].xp()&&this.a1(this.qk[z].result.url,"image")&&(this.qk[z]=null,this.VR(Object(ca.uniqueId)(),z)));for(z=0;z<this.qj.length;z++)this.qj[z]&&this.qj[z].rn()&&!this.qj[z].$Pa()&&this.zk(this.qj[z].request);for(z=0;z<this.Ii.length;z++)this.Ii[z]&&this.Ii[z].rn()&&this.zk(this.Ii[z].request)};aa.prototype.UOa=function(){return this.sN?Promise.resolve():(this.sN=!0,this.timeStamp=Date.now(),this.NA.cQ())};
aa.prototype.e5a=function(){var z=this,fa,ea,ma,ha,la;return new Promise(function(qa,ja){if(z.Ms)fa=new FormData,fa.append("file",z.Ms.fileHandle,z.Ms.fileHandle.name),z.Zr&&fa.append("officeOptions",JSON.stringify(z.Zr)),z.Lg&&fa.append("rasterizerOptions",JSON.stringify(z.Lg)),z.FF&&fa.append("cadOptions",z.FF.getJsonString()),z.EF&&fa.append("cacheKey",z.EF),ea=z.Ms.loadCallback,ha="upload",ma=z.Ms.extension;else if(z.XD)fa={uri:z.XD.uri,qab:z.XD.shareId},fa=Object.keys(fa).map(function(ra){return"".concat(ra,
"=").concat(fa[ra]?encodeURIComponent(fa[ra]):"")}).join("&"),la="application/x-www-form-urlencoded; charset=UTF-8",ea=z.XD.loadCallback,ha="url",ma=z.XD.extension;else{qa();return}var sa=new XMLHttpRequest,oa=Object(x.l)(z.Xh,"AuxUpload");oa=Object(n.a)(oa,{type:ha,ext:ma});sa.open("POST",oa);sa.withCredentials=z.en();la&&sa.setRequestHeader("Content-Type",la);sa.addEventListener("load",function(){if(sa.readyState===sa.DONE&&200===sa.status){var ra=JSON.parse(sa.response);z.TX=ra.uri;ea(ra);qa(ra)}});
sa.addEventListener("error",function(){ja("".concat(sa.statusText," ").concat(JSON.stringify(sa)))});z.Ms&&null!=z.Ms.onProgress&&(sa.upload.onprogress=function(ra){z.Ms.onProgress(ra)});sa.send(fa)})};aa.prototype.zYa=function(z){this.password=z||null;this.ds.xp()||(this.ds=new f,this.zk({t:"pages"}));return this.ds.promise};aa.prototype.uJ=function(z){this.xY=z||null;this.ds.xp()||this.zk({t:"pages"});return this.ds.promise};aa.prototype.UF=function(z){z=Object.assign(z,{uri:encodeURIComponent(this.TX)});
this.xY&&(z.ext=this.xY);this.vk&&(z.c=this.vk);this.password&&(z.pswd=this.password);this.EF&&(z.cacheKey=this.EF);this.Zr&&(z.officeOptions=this.Zr);this.Lg&&(z.rastOptions=this.Lg);this.FF&&(z.cadOptions=this.FF.mImpl);return z};aa.prototype.NZa=function(){0<this.bD.length()&&10>=this.lA&&this.OZa(this.bD.pop().data)};aa.prototype.Qza=function(z){0<this.bD.length()&&this.bD.contains(z)&&this.bD.remove(z)};aa.prototype.zk=function(z){z=this.UF(z);this.NA.send(z)};aa.prototype.pma=function(z,fa){10<
this.lA?this.bD.push(z,fa):(this.lA++,z=this.UF(fa),this.NA.send(z))};aa.prototype.OZa=function(z){this.lA++;z=this.UF(z);this.NA.send(z)};aa.prototype.$q=function(z){return z};aa.prototype.gga=function(z){this.c5&&z?Object(ba.j)("Server failed health check. Single server mode ignoring check."):!this.Y8a&&z&&3>=this.Ei?(this.u_=!0,this.NA.ix()):3<this.Ei&&(this.c5=!0)};aa.prototype.ITa=function(z){var fa=this,ea=z.data,ma=z.err,ha=z.t;switch(ha){case "upload":ma?this.f5a.reject(ma):this.f5a.resolve("Success");
break;case "pages":ma?this.ds.reject(ma):pa(ea,ha,this.ds)&&this.ds.resolve(ea);break;case "config":if(ma)this.Hw.reject(ma);else if(pa(ea,ha,this.Hw)){this.gga(ea.unhealthy);ea.id&&(this.id=ea.id);if(ea.auth){var la=Object(h.a)("wvsQueryParameters");la.auth=ea.auth;Object(h.b)("wvsQueryParameters",la)}ea.serverVersion&&(this.BT=ea.serverVersion,Object(ba.h)("[WebViewer Server] server version: ".concat(this.BT)));ea.serverID?(this.Ei=ea.serverID===this.tma&&this.u_?this.Ei+1:0,this.tma=ea.serverID):
this.Ei=0;this.u_=!1;this.Hw.resolve(ea)}break;case "health":ma?this.Hw.reject(ma):pa(ea,ha,this.Hw)&&this.gga(ea.unhealthy);break;case "pdf":ea.url=Object(n.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url)));ma?this.Th.reject(ma):pa(ea,ha,this.Th)&&this.Th.resolve(ea);break;case "ApString2Xod":ea.url=Object(n.a)("".concat(this.Xh,"../data/").concat(encodeURI(ea.url)));ma?this.zn[ea.rID].reject(ma):pa(ea,ha,this.zn[ea.rID])&&this.zn[ea.rID].resolve(ea);break;case "docmod":ea.url=Object(n.a)("".concat(this.Xh,
"../").concat(encodeURI(ea.url)));ma?this.zn[ea.rID].reject(ma):pa(ea,ha,this.Th)&&this.zn[ea.rID].resolve(ea);break;case "xod":if(ma)this.Rg&&this.Rg.rn()&&this.Rg.reject(ma),this.Qg&&this.Qg.rn()&&this.Qg.reject(ma);else if(ea.notFound)ea.noCreate||this.Rg&&this.Rg.rn()&&this.Rg.resolve(ea),this.Qg&&this.Qg.rn()&&this.Qg.resolve(ea);else{ea.url&&(ea.url=Object(n.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url))));if(!this.Qg||this.Qg.xp())this.Qg=new f,this.Qg.request={t:"xod",noCreate:!0};
this.Rg||(this.Rg=new f,this.Rg.request={t:"xod"});this.Qg.resolve(ea);this.Rg.resolve(ea)}break;case "cAnnots":la=this.fi;if(ma)la.reject(ma);else if(pa(ea,ha,la)){la.p4();var qa=[],ja=ea.annots;ea=function(Ca){var Aa=ja[Ca].s,Ba=ja[Ca].e,Ea="".concat(sa.Xh,"../").concat(encodeURI(ja[Ca].xfdf)),xa="true"===ja[Ca].hasAppearance?Object(n.a)("".concat(Ea,".xodapp")):null,Da=Object(ca.range)(Aa,Ba);qa[Ca]={range:Da,promise:new Promise(function(Ma,Ka){var Oa=new XMLHttpRequest;Oa.open("GET",Object(n.a)(Ea));
Oa.responseType="text";Oa.withCredentials=fa.en();Oa.addEventListener("load",function(){Oa.readyState===Oa.DONE&&200===Oa.status&&Ma({Rs:Oa.response,Nq:xa,range:Da})});Oa.addEventListener("error",function(){Ka("".concat(Oa.statusText," ").concat(JSON.stringify(Oa)))});Oa.send()})}};var sa=this;for(ma=0;ma<ja.length;ma++)ea(ma);la.resolve(qa)}break;case "annots":if(ma)this.fi.reject(ma);else if(pa(ea,ha,this.fi)){this.fi.p4();var oa=new XMLHttpRequest;la="".concat(this.Xh,"../").concat(encodeURI(ea.url));
var ra=ea.hasAppearance?Object(n.a)("".concat(la,".xodapp")):null;oa.open("GET",Object(n.a)(la));oa.responseType="text";oa.withCredentials=this.en();oa.addEventListener("load",function(){oa.readyState===oa.DONE&&200===oa.status&&fa.fi.resolve({Rs:oa.response,Nq:ra})});oa.addEventListener("error",function(){fa.fi.reject("".concat(oa.statusText," ").concat(JSON.stringify(oa)))});oa.send()}break;case "image":this.lA--;var ta=this.qk[ea.p];ma?ta.promise.reject(ma):pa(ea,ha,ta)&&(ta.result=ea,ta.result.url=
Object(n.a)("".concat(this.Xh,"../").concat(encodeURI(ta.result.url))),ta.resolve(ta.result));break;case "tiles":this.lA--;ta=ea.rID;la=this.Ii[ta];this.Ii[ta]=null;this.DO.push(ta);if(ma)la.reject(ma);else if(pa(ea,ha,la)){for(ma=0;ma<ea.tiles.length;ma++)ea.tiles[ma]=Object(n.a)("".concat(this.Xh,"../").concat(encodeURI(ea.tiles[ma])));la.resolve(ea)}break;case "text":ta=this.qj[ea.p];if(ma)ta.reject(ma);else if(pa(ea,ha,ta)){ta.p4();var va=new XMLHttpRequest;ea=Object(n.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url)));
va.open("GET",ea);va.withCredentials=this.en();va.addEventListener("load",function(){va.readyState===va.DONE&&200===va.status&&(ta.result=JSON.parse(va.response),ta.resolve(ta.result))});va.addEventListener("error",function(Ca){ta.reject("".concat(va.statusText," ").concat(JSON.stringify(Ca)))});va.send()}break;case "progress":"loading"===ea.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[ea.bytes,ea.total])}this.NZa();!ha&&z.echo&&z&&"apstring2xod"===z.echo.t&&(z=z.echo.reqID)&&(2<=parseInt(this.BT,
10)?this.zn[z].reject("Message unhandled by server"):this.zn[z].reject())};aa.prototype.jJa=function(){return Object(ia.c)(this,void 0,void 0,function(){return Object(ia.e)(this,function(z){switch(z.label){case 0:return[4,this.UOa()];case 1:return z.aa(),[2,this.Hw.promise]}})})};aa.prototype.KIa=function(z){for(var fa=this,ea=new XMLHttpRequest,ma=Object(n.a)("".concat(this.Xh,"aul"),{id:this.id}),ha=new FormData,la={},qa=0;qa<z.body.length;qa++){var ja=z.body[qa];la[ja.id]="".concat(ja.eW.w,";").concat(ja.eW.h);
ha.append(ja.id,ja.eW.dataString)}z={t:"apstring2xod",reqID:this.Jia++,parts:la};var sa=this.UF(z);ha.append("msg",JSON.stringify(sa));this.zn[sa.reqID]=new f;ea.open("POST",ma);ea.withCredentials=this.en;ma=new Promise(function(oa,ra){ea.onreadystatechange=function(){4===ea.readyState&&(200===ea.status?oa():ra("An error occurred while sending down appearance strings to the server"))}});ea.send(ha);return ma.then(function(){return fa.zn[sa.reqID].promise})};aa.prototype.SAa=function(){var z=this.BT.split("-")[0].split("."),
fa=["1","5","9"];if(3!==z.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var ea=0;ea<z.length;++ea){if(fa.length===ea||z[ea]>fa[ea])return-1;if(z[ea]!==fa[ea])return 1}return 0};aa.prototype.Ew=function(){return 0>=this.SAa()};aa.prototype.TY=function(){this.fi||(this.fi=new f,this.Ew()?this.fi.request={t:"cAnnots"}:this.fi.request={t:"annots"},this.zk(this.fi.request));return this.fi.promise};aa.prototype.VR=function(z,fa){this.qk[fa]||
(this.qk[fa]=new f,this.qk[fa].request={t:"image",p:fa},this.pma(z,this.qk[fa].request));return this.qk[fa].promise};aa.prototype.AYa=function(z){this.qj[z]||(this.qj[z]=new f,this.qj[z].request={t:"text",p:z},this.zk(this.qj[z].request));return this.qj[z].promise};aa.prototype.BYa=function(z,fa,ea,ma,ha){var la=this.Ii.length;this.DO.length&&(la=this.DO.pop());this.Ii[la]=new f;this.Ii[la].request={t:"tiles",p:fa,z:ea,r:ma,size:ha,rID:la};this.pma(z,this.Ii[la].request);return this.Ii[la].promise};
aa.prototype.Gla=function(){this.Th||(this.Th=new f,this.Th.request={t:"pdf"},this.Wba?this.Th.resolve({url:this.TX}):this.zk(this.Th.request));return this.Th.promise};aa.prototype.Hea=function(z){var fa=this,ea=new XMLHttpRequest,ma=Object(n.a)("".concat(this.Xh,"aul"),{id:this.id}),ha=new FormData,la={};z.annots&&(la.annots="xfdf");z.watermark&&(la.watermark="png");z.redactions&&(la.redactions="redact");la={t:"docmod",reqID:this.Jia++,parts:la};z.print&&(la.print=!0);var qa=this.UF(la);ha.append("msg",
JSON.stringify(qa));return Promise.all([z.annots,z.watermark,z.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var sa=ja[0],oa=ja[1];ja=ja[2];sa&&ha.append("annots",sa);oa&&ha.append("watermark",oa);ja&&ha.append("redactions",ja);fa.zn[qa.reqID]=new f;ea.open("POST",ma);ea.withCredentials=fa.en;sa=new Promise(function(ra,ta){ea.onreadystatechange=function(){4===ea.readyState&&(200===ea.status?ra():ta("An error occurred while sending down annotation data to the server"))}});
ea.send(ha);return sa.then(function(){return fa.zn[qa.reqID].promise})})};aa.prototype.Kfa=function(){this.Qg||(this.Qg=new f,this.Qg.request={t:"xod",noCreate:!0},this.zk(this.Qg.request));return this.Qg.promise};aa.prototype.CYa=function(){this.Rg||(this.Rg=new f,this.Rg.request={t:"xod"},this.zk(this.Rg.request));return this.Rg.promise};aa.prototype.jv=function(){return!0};aa.prototype.request=function(){};aa.prototype.Tka=function(){};aa.prototype.abort=function(){for(var z=0;z<this.Ii.length;z++)this.Ii[z]&&
(this.Ii[z].resolve(null),this.Ii[z]=null,this.DO.push(z));this.close()};aa.prototype.tS=function(z){this.vk=this.vk||{};this.vk.headers=z};aa.prototype.qv=function(z){this.vk=this.vk||{};this.vk.internal=this.vk.internal||{};this.vk.internal.withCredentials=z};aa.prototype.en=function(){return this.vk&&this.vk.internal?this.vk.internal.withCredentials:null};aa.prototype.getFileData=function(){return Promise.reject()};return aa}();Object(wa.b)(e);Object(b.a)(e);Object(b.b)(e);ua["default"]=e},713:function(wa,
ua,e){var ka=e(0),pa=e(2),na=e(39),ia=e(56),ca=e(276),ba=e(114),x=function(){function r(b,h,n,f,a,w){void 0===n&&(n=null);void 0===f&&(f=null);void 0===a&&(a=null);void 0===w&&(w=null);this.x_=!1;this.Ei=0;this.tI=8;this.Xla=3E3;this.SS=!1;this.jaa=this.N5a(b);this.url=h?"".concat(this.jaa,"/").concat(h):"".concat(this.jaa,"/ws");this.yX=n;this.NI=f;this.SF=a;this.Hla=w}r.prototype.N5a=function(b){var h=b.indexOf("://"),n="ws://";0>h?h=0:(5===h&&(n="wss://"),h+=3);var f=b.lastIndexOf("/");0>f&&(f=
b.length);return n+b.slice(h,f)};r.prototype.send=function(b){this.Cv.readyState===WebSocket.CLOSED||this.x_||this.Cv.send(JSON.stringify(b))};r.prototype.cQ=function(){return Object(ka.c)(this,void 0,void 0,function(){var b,h=this;return Object(ka.e)(this,function(){b=Object(ia.a)("wvsQueryParameters");b.bcid=Object(na.m)(8);Object(ia.b)("wvsQueryParameters",b);return[2,new Promise(function(n,f){var a=Object(ca.a)(h.url);h.SS=!1;h.Cv=new WebSocket(a);h.Cv.onopen=function(){h.x_=!1;h.Ei=0;h.NI&&h.NI();
n()};h.Cv.onerror=function(){h.x_=!0};h.Cv.onclose=function(w){w=w.code;h.SF&&h.SF();1E3!==w&&3E3!==w&&h.bOa(w,n,f)};h.Cv.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?h.send({hb:!0}):w.end?close():h.yX(w))}})]})})};r.prototype.bOa=function(b,h,n){Object(ka.c)(this,void 0,void 0,function(){var f=this;return Object(ka.e)(this,function(){if(this.SS)return h(),[2];this.Ei<this.tI?setTimeout(function(){f.SS?h():(f.Ei++,Object(pa.j)("Failed to connect to server with WebSocket close code ".concat(b,
". Reconnecting to WebViewer Server, attempt ").concat(f.Ei," of ").concat(f.tI," ...")),f.cQ().then(h).catch(n))},this.Xla):n(ba.a);return[2]})})};r.prototype.ix=function(){var b;void 0===b&&(b=!1);this.Ei=0;this.SS=!0;b?this.Cv.close(3E3):this.Cv.close();return Promise.resolve()};return r}(),y=function(){function r(b,h,n,f,a,w,aa){void 0===f&&(f=null);void 0===a&&(a=null);void 0===w&&(w=null);void 0===aa&&(aa=null);this.Ei=this.UR=this.id=0;this.AH=!1;this.request=null;this.tI=8;this.Xla=3E3;b=
this.KVa(b);this.url=h?"".concat(b,"/").concat(h,"pf"):"".concat(b,"/pf");this.tT=n;this.yX=f;this.NI=a;this.SF=w;this.Hla=aa}r.prototype.KVa=function(b){var h=b.lastIndexOf("/");0>h&&(h=b.length);return b.slice(0,h)};r.prototype.SCa=function(b){b=b.split("\n");for(b[b.length-1]&&b.pop();0<b.length&&3>b[b.length-1].length;)"]"===b.pop()&&(this.id=0);0<b.length&&3>b[0].length&&b.shift();for(var h=0;h<b.length;++h)b[h].endsWith(",")&&(b[h]=b[h].substr(0,b[h].length-1));return b};r.prototype.Wla=function(){return Object(ka.c)(this,
void 0,void 0,function(){var b=this;return Object(ka.e)(this,function(h){switch(h.label){case 0:return this.Ei++<this.tI?[4,new Promise(function(n){return setTimeout(function(){b.Hla();b.cQ();n()},3E3)})]:[3,2];case 1:h.aa(),h.label=2;case 2:return[2]}})})};r.prototype.aWa=function(b){Object(ka.c)(this,void 0,void 0,function(){var h,n;return Object(ka.e)(this,function(f){switch(f.label){case 0:h=null,n=0,f.label=1;case 1:if(!(n<b.length))return[3,6];h=JSON.parse(b[n]);if(!h)return[3,5];if(!h.end)return[3,
2];close();return[3,5];case 2:if(!h.id||Number(h.id)===this.id)return[3,4];Object(pa.j)("Reconnecting, new server detected");this.ix();return[4,this.Wla()];case 3:return f.aa(),[3,5];case 4:h.hb&&Number(h.id)===this.id?this.send({hb:!0}):this.AH||this.yX(h),f.label=5;case 5:return++n,[3,1];case 6:return[2]}})})};r.prototype.CTa=function(b){Object(ka.c)(this,void 0,void 0,function(){var h,n,f;return Object(ka.e)(this,function(a){switch(a.label){case 0:if(!(3<=b.readyState))return[3,2];try{h=b.responseText.length}catch(w){return Object(pa.h)("caught exception"),
[2]}if(0<h)try{n=this.SCa(b.responseText),0===this.id&&0<n.length&&(f=JSON.parse(n.shift()),this.id=f.id,this.Ei=0),this.aWa(n)}catch(w){}return this.AH?[3,2]:[4,this.nda()];case 1:a.aa(),a.label=2;case 2:return[2]}})})};r.prototype.nda=function(){return Object(ka.c)(this,void 0,void 0,function(){var b=this;return Object(ka.e)(this,function(){return[2,new Promise(function(h,n){function f(){return Object(ka.c)(b,void 0,void 0,function(){return Object(ka.e)(this,function(w){switch(w.label){case 0:n(),
this.ix(),w.label=1;case 1:return this.AH&&this.Ei<this.tI?[4,this.Wla()]:[3,3];case 2:return w.aa(),[3,1];case 3:return[2]}})})}b.request=new XMLHttpRequest;b.request.withCredentials=b.tT;var a=Object(ca.a)(b.url,0!==b.id?{id:String(b.id),uc:String(b.UR)}:{uc:String(b.UR)});b.UR++;b.request.open("GET",a,!0);b.request.setRequestHeader("Cache-Control","no-cache");b.request.setRequestHeader("X-Requested-With","XMLHttpRequest");b.request.onreadystatechange=function(){b.CTa(b.request)};b.request.addEventListener("error",
f);b.request.addEventListener("timeout",f);b.request.addEventListener("load",function(){b.NI&&b.NI();h()});b.request.send()})]})})};r.prototype.cQ=function(){var b=Object(ia.a)("wvsQueryParameters");b.bcid=Object(na.m)(8);Object(ia.b)("wvsQueryParameters",b);this.UR=this.id=0;this.AH=!1;return this.nda()};r.prototype.send=function(b){var h=this,n=new XMLHttpRequest;n.withCredentials=this.tT;var f=Object(ca.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(b));n.addEventListener("error",
function(){h.ix()});n.open("POST",f);n.setRequestHeader("X-Requested-With","XMLHttpRequest");n.send(a)};r.prototype.ix=function(){this.id=0;this.AH=!0;this.SF&&this.SF();this.request.abort();return Promise.resolve()};return r}();wa=function(){function r(b,h,n){this.gba=b;this.target=h;this.tT=n}r.prototype.sIa=function(b,h,n,f,a){void 0===b&&(b=!0);void 0===h&&(h=null);void 0===n&&(n=null);void 0===f&&(f=null);void 0===a&&(a=null);return b?new x(this.gba,this.target,h,n,f,a):new y(this.gba,this.target,
this.tT,h,n,f,a)};return r}();ua.a=wa}}]);}).call(this || window)
